<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta charset="utf-8">
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" />
<!--
   Note to customizers: the body of the webrev is IDed as SUNWwebrev
   to allow easy overriding by users of webrev via the userContent.css
   mechanism available in some browsers.

   For example, to have all "removed" information be red instead of
   brown, set a rule in your userContent.css file like:

       body#SUNWwebrev span.removed { color: red ! important; }
-->
<style type="text/css" media="screen">
body {
    background-color: #eeeeee;
}
hr {
    border: none 0;
    border-top: 1px solid #aaa;
    height: 1px;
}
div.summary {
    font-size: .8em;
    border-bottom: 1px solid #aaa;
    padding-left: 1em;
    padding-right: 1em;
}
div.summary h2 {
    margin-bottom: 0.3em;
}
div.summary table th {
    text-align: right;
    vertical-align: top;
    white-space: nowrap;
}
span.lineschanged {
    font-size: 0.7em;
}
span.oldmarker {
    color: red;
    font-size: large;
    font-weight: bold;
}
span.newmarker {
    color: green;
    font-size: large;
    font-weight: bold;
}
span.removed {
    color: brown;
}
span.changed {
    color: blue;
}
span.new {
    color: blue;
    font-weight: bold;
}
a.print { font-size: x-small; }

</style>

<style type="text/css" media="print">
pre { font-size: 0.8em; font-family: courier, monospace; }
span.removed { color: #444; font-style: italic }
span.changed { font-weight: bold; }
span.new { font-weight: bold; }
span.newmarker { font-size: 1.2em; font-weight: bold; }
span.oldmarker { font-size: 1.2em; font-weight: bold; }
a.print {display: none}
hr { border: none 0; border-top: 1px solid #aaa; height: 1px; }
</style>

    <script type="text/javascript" src="../../../../ancnav.js"></script>
    </head>
    <body id="SUNWwebrev" onkeypress="keypress(event);">
    <a name="0"></a>
    <pre>rev <a href="https://bugs.openjdk.java.net/browse/JDK-60800">60800</a> : imported patch jep387-misc.patch</pre><hr></hr>
<pre>
   1 /*
   2  * Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  *
  23  */
  24 
  25 #include "precompiled.hpp"
  26 #include "ci/ciField.hpp"
  27 #include "ci/ciInstance.hpp"
  28 #include "ci/ciMethodData.hpp"
  29 #include "ci/ciObjArrayKlass.hpp"
  30 #include "ci/ciSymbol.hpp"
  31 #include "classfile/compactHashtable.hpp"
  32 #include "classfile/classLoaderDataGraph.hpp"
  33 #include "classfile/dictionary.hpp"
  34 #include "classfile/javaClasses.hpp"
  35 #include "classfile/stringTable.hpp"
  36 #include "classfile/symbolTable.hpp"
  37 #include "classfile/systemDictionary.hpp"
  38 #include "code/codeBlob.hpp"
  39 #include "code/codeCache.hpp"
  40 #include "code/compressedStream.hpp"
  41 #include "code/location.hpp"
  42 #include "code/nmethod.hpp"
  43 #include "code/pcDesc.hpp"
  44 #include "code/stubs.hpp"
  45 #include "code/vmreg.hpp"
  46 #include "compiler/compileBroker.hpp"
  47 #include "compiler/oopMap.hpp"
  48 #include "gc/shared/vmStructs_gc.hpp"
  49 #include "interpreter/bytecodes.hpp"
  50 #include "interpreter/interpreter.hpp"
  51 #include "memory/allocation.hpp"
  52 #include "memory/allocation.inline.hpp"
  53 #include "memory/heap.hpp"
<a name="1" id="anc1"></a><span class="removed">  54 #include "memory/metaspace/metablock.hpp"</span>
  55 #include "memory/padded.hpp"
  56 #include "memory/referenceType.hpp"
  57 #include "memory/universe.hpp"
  58 #include "memory/virtualspace.hpp"
  59 #include "memory/filemap.hpp"
  60 #include "oops/array.hpp"
  61 #include "oops/arrayKlass.hpp"
  62 #include "oops/arrayOop.hpp"
  63 #include "oops/compiledICHolder.hpp"
  64 #include "oops/constMethod.hpp"
  65 #include "oops/constantPool.hpp"
  66 #include "oops/cpCache.hpp"
  67 #include "oops/instanceClassLoaderKlass.hpp"
  68 #include "oops/instanceKlass.hpp"
  69 #include "oops/instanceMirrorKlass.hpp"
  70 #include "oops/instanceOop.hpp"
  71 #include "oops/klass.hpp"
  72 #include "oops/markWord.hpp"
  73 #include "oops/method.hpp"
  74 #include "oops/methodCounters.hpp"
  75 #include "oops/methodData.hpp"
  76 #include "oops/objArrayKlass.hpp"
  77 #include "oops/objArrayOop.hpp"
  78 #include "oops/oop.inline.hpp"
  79 #include "oops/oopHandle.hpp"
  80 #include "oops/symbol.hpp"
  81 #include "oops/typeArrayKlass.hpp"
  82 #include "oops/typeArrayOop.hpp"
  83 #include "prims/jvmtiAgentThread.hpp"
  84 #include "runtime/arguments.hpp"
  85 #include "runtime/deoptimization.hpp"
  86 #include "runtime/flags/jvmFlag.hpp"
  87 #include "runtime/globals.hpp"
  88 #include "runtime/java.hpp"
  89 #include "runtime/javaCalls.hpp"
  90 #include "runtime/notificationThread.hpp"
  91 #include "runtime/os.hpp"
  92 #include "runtime/perfMemory.hpp"
  93 #include "runtime/serviceThread.hpp"
  94 #include "runtime/sharedRuntime.hpp"
  95 #include "runtime/stubRoutines.hpp"
  96 #include "runtime/synchronizer.hpp"
  97 #include "runtime/thread.inline.hpp"
  98 #include "runtime/threadSMR.hpp"
  99 #include "runtime/vframeArray.hpp"
 100 #include "runtime/vmStructs.hpp"
 101 #include "utilities/globalDefinitions.hpp"
 102 #include "utilities/hashtable.hpp"
 103 #include "utilities/macros.hpp"
 104 
 105 #include CPU_HEADER(vmStructs)
 106 #include OS_HEADER(vmStructs)
 107 #include OS_CPU_HEADER(vmStructs)
 108 
 109 #ifdef COMPILER2
 110 #include "opto/addnode.hpp"
 111 #include "opto/block.hpp"
 112 #include "opto/callnode.hpp"
 113 #include "opto/castnode.hpp"
 114 #include "opto/cfgnode.hpp"
 115 #include "opto/chaitin.hpp"
 116 #include "opto/convertnode.hpp"
 117 #include "opto/divnode.hpp"
 118 #include "opto/intrinsicnode.hpp"
 119 #include "opto/locknode.hpp"
 120 #include "opto/loopnode.hpp"
 121 #include "opto/machnode.hpp"
 122 #include "opto/matcher.hpp"
 123 #include "opto/mathexactnode.hpp"
 124 #include "opto/movenode.hpp"
 125 #include "opto/mulnode.hpp"
 126 #include "opto/narrowptrnode.hpp"
 127 #include "opto/opaquenode.hpp"
 128 #include "opto/optoreg.hpp"
 129 #include "opto/parse.hpp"
 130 #include "opto/phaseX.hpp"
 131 #include "opto/regalloc.hpp"
 132 #include "opto/rootnode.hpp"
 133 #include "opto/subnode.hpp"
 134 #include "opto/vectornode.hpp"
 135 #endif // COMPILER2
 136 
 137 // Note: the cross-product of (c1, c2, product, nonproduct, ...),
 138 // (nonstatic, static), and (unchecked, checked) has not been taken.
 139 // Only the macros currently needed have been defined.
 140 
 141 // A field whose type is not checked is given a null string as the
 142 // type name, indicating an "opaque" type to the serviceability agent.
 143 
 144 // NOTE: there is an interdependency between this file and
 145 // HotSpotTypeDataBase.java, which parses the type strings.
 146 
 147 #ifndef REG_COUNT
 148   #define REG_COUNT 0
 149 #endif
 150 
 151 #if INCLUDE_JVMTI
 152   #define JVMTI_STRUCTS(static_field) \
 153     static_field(JvmtiExport,                     _can_access_local_variables,                  bool)                                  \
 154     static_field(JvmtiExport,                     _can_hotswap_or_post_breakpoint,              bool)                                  \
 155     static_field(JvmtiExport,                     _can_post_on_exceptions,                      bool)                                  \
 156     static_field(JvmtiExport,                     _can_walk_any_space,                          bool)
 157 #else
 158   #define JVMTI_STRUCTS(static_field)
 159 #endif // INCLUDE_JVMTI
 160 
 161 typedef HashtableEntry&lt;intptr_t, mtInternal&gt;  IntptrHashtableEntry;
 162 typedef Hashtable&lt;intptr_t, mtInternal&gt;       IntptrHashtable;
 163 typedef Hashtable&lt;InstanceKlass*, mtClass&gt;       KlassHashtable;
 164 typedef HashtableEntry&lt;InstanceKlass*, mtClass&gt;  KlassHashtableEntry;
 165 
 166 //--------------------------------------------------------------------------------
 167 // VM_STRUCTS
 168 //
 169 // This list enumerates all of the fields the serviceability agent
 170 // needs to know about. Be sure to see also the type table below this one.
 171 // NOTE that there are platform-specific additions to this table in
 172 // vmStructs_&lt;os&gt;_&lt;cpu&gt;.hpp.
 173 
 174 #define VM_STRUCTS(nonstatic_field,                                                                                                  \
 175                    static_field,                                                                                                     \
 176                    static_ptr_volatile_field,                                                                                        \
 177                    unchecked_nonstatic_field,                                                                                        \
 178                    volatile_nonstatic_field,                                                                                         \
 179                    nonproduct_nonstatic_field,                                                                                       \
 180                    c1_nonstatic_field,                                                                                               \
 181                    c2_nonstatic_field,                                                                                               \
 182                    unchecked_c1_static_field,                                                                                        \
 183                    unchecked_c2_static_field)                                                                                        \
 184                                                                                                                                      \
 185   /*************/                                                                                                                    \
 186   /* GC fields */                                                                                                                    \
 187   /*************/                                                                                                                    \
 188                                                                                                                                      \
 189   VM_STRUCTS_GC(nonstatic_field,                                                                                                     \
 190                 volatile_nonstatic_field,                                                                                            \
 191                 static_field,                                                                                                        \
 192                 unchecked_nonstatic_field)                                                                                           \
 193                                                                                                                                      \
 194   /******************************************************************/                                                               \
 195   /* OopDesc and Klass hierarchies (NOTE: MethodData* incomplete)   */                                                               \
 196   /******************************************************************/                                                               \
 197                                                                                                                                      \
 198   volatile_nonstatic_field(oopDesc,            _mark,                                         markWord)                              \
 199   volatile_nonstatic_field(oopDesc,            _metadata._klass,                              Klass*)                                \
 200   volatile_nonstatic_field(oopDesc,            _metadata._compressed_klass,                   narrowKlass)                           \
 201   static_field(BarrierSet,                     _barrier_set,                                  BarrierSet*)                           \
 202   nonstatic_field(ArrayKlass,                  _dimension,                                    int)                                   \
 203   volatile_nonstatic_field(ArrayKlass,         _higher_dimension,                             Klass*)                                \
 204   volatile_nonstatic_field(ArrayKlass,         _lower_dimension,                              Klass*)                                \
 205   nonstatic_field(CompiledICHolder,            _holder_metadata,                              Metadata*)                             \
 206   nonstatic_field(CompiledICHolder,            _holder_klass,                                 Klass*)                                \
 207   nonstatic_field(ConstantPool,                _tags,                                         Array&lt;u1&gt;*)                            \
 208   nonstatic_field(ConstantPool,                _cache,                                        ConstantPoolCache*)                    \
 209   nonstatic_field(ConstantPool,                _pool_holder,                                  InstanceKlass*)                        \
 210   nonstatic_field(ConstantPool,                _operands,                                     Array&lt;u2&gt;*)                            \
 211   nonstatic_field(ConstantPool,                _resolved_klasses,                             Array&lt;Klass*&gt;*)                        \
 212   nonstatic_field(ConstantPool,                _length,                                       int)                                   \
 213   nonstatic_field(ConstantPool,                _minor_version,                                u2)                                    \
 214   nonstatic_field(ConstantPool,                _major_version,                                u2)                                    \
 215   nonstatic_field(ConstantPool,                _generic_signature_index,                      u2)                                    \
 216   nonstatic_field(ConstantPool,                _source_file_name_index,                       u2)                                    \
 217   nonstatic_field(ConstantPoolCache,           _resolved_references,                          OopHandle)                             \
 218   nonstatic_field(ConstantPoolCache,           _reference_map,                                Array&lt;u2&gt;*)                            \
 219   nonstatic_field(ConstantPoolCache,           _length,                                       int)                                   \
 220   nonstatic_field(ConstantPoolCache,           _constant_pool,                                ConstantPool*)                         \
 221   volatile_nonstatic_field(InstanceKlass,      _array_klasses,                                ObjArrayKlass*)                        \
 222   nonstatic_field(InstanceKlass,               _methods,                                      Array&lt;Method*&gt;*)                       \
 223   nonstatic_field(InstanceKlass,               _default_methods,                              Array&lt;Method*&gt;*)                       \
 224   nonstatic_field(InstanceKlass,               _local_interfaces,                             Array&lt;InstanceKlass*&gt;*)                \
 225   nonstatic_field(InstanceKlass,               _transitive_interfaces,                        Array&lt;InstanceKlass*&gt;*)                \
 226   nonstatic_field(InstanceKlass,               _fields,                                       Array&lt;u2&gt;*)                            \
 227   nonstatic_field(InstanceKlass,               _java_fields_count,                            u2)                                    \
 228   nonstatic_field(InstanceKlass,               _constants,                                    ConstantPool*)                         \
 229   nonstatic_field(InstanceKlass,               _source_debug_extension,                       const char*)                           \
 230   nonstatic_field(InstanceKlass,               _inner_classes,                                Array&lt;jushort&gt;*)                       \
 231   nonstatic_field(InstanceKlass,               _nonstatic_field_size,                         int)                                   \
 232   nonstatic_field(InstanceKlass,               _static_field_size,                            int)                                   \
 233   nonstatic_field(InstanceKlass,               _static_oop_field_count,                       u2)                                    \
 234   nonstatic_field(InstanceKlass,               _nonstatic_oop_map_size,                       int)                                   \
 235   nonstatic_field(InstanceKlass,               _is_marked_dependent,                          bool)                                  \
 236   nonstatic_field(InstanceKlass,               _misc_flags,                                   u2)                                    \
 237   nonstatic_field(InstanceKlass,               _init_state,                                   u1)                                    \
 238   nonstatic_field(InstanceKlass,               _init_thread,                                  Thread*)                               \
 239   nonstatic_field(InstanceKlass,               _itable_len,                                   int)                                   \
 240   nonstatic_field(InstanceKlass,               _reference_type,                               u1)                                    \
 241   volatile_nonstatic_field(InstanceKlass,      _oop_map_cache,                                OopMapCache*)                          \
 242   nonstatic_field(InstanceKlass,               _jni_ids,                                      JNIid*)                                \
 243   nonstatic_field(InstanceKlass,               _osr_nmethods_head,                            nmethod*)                              \
 244   JVMTI_ONLY(nonstatic_field(InstanceKlass,    _breakpoints,                                  BreakpointInfo*))                      \
 245   volatile_nonstatic_field(InstanceKlass,      _methods_jmethod_ids,                          jmethodID*)                            \
 246   volatile_nonstatic_field(InstanceKlass,      _idnum_allocated_count,                        u2)                                    \
 247   nonstatic_field(InstanceKlass,               _annotations,                                  Annotations*)                          \
 248   nonstatic_field(InstanceKlass,               _method_ordering,                              Array&lt;int&gt;*)                           \
 249   nonstatic_field(InstanceKlass,               _default_vtable_indices,                       Array&lt;int&gt;*)                           \
 250   nonstatic_field(Klass,                       _super_check_offset,                           juint)                                 \
 251   nonstatic_field(Klass,                       _secondary_super_cache,                        Klass*)                                \
 252   nonstatic_field(Klass,                       _secondary_supers,                             Array&lt;Klass*&gt;*)                        \
 253   nonstatic_field(Klass,                       _primary_supers[0],                            Klass*)                                \
 254   nonstatic_field(Klass,                       _java_mirror,                                  OopHandle)                             \
 255   nonstatic_field(Klass,                       _modifier_flags,                               jint)                                  \
 256   nonstatic_field(Klass,                       _super,                                        Klass*)                                \
 257   volatile_nonstatic_field(Klass,              _subklass,                                     Klass*)                                 \
 258   nonstatic_field(Klass,                       _layout_helper,                                jint)                                  \
 259   nonstatic_field(Klass,                       _name,                                         Symbol*)                               \
 260   nonstatic_field(Klass,                       _access_flags,                                 AccessFlags)                           \
 261   nonstatic_field(Klass,                       _prototype_header,                             markWord)                              \
 262   volatile_nonstatic_field(Klass,              _next_sibling,                                 Klass*)                                \
 263   nonstatic_field(Klass,                       _next_link,                                    Klass*)                                \
 264   nonstatic_field(Klass,                       _vtable_len,                                   int)                                   \
 265   nonstatic_field(Klass,                       _class_loader_data,                            ClassLoaderData*)                      \
 266   nonstatic_field(vtableEntry,                 _method,                                       Method*)                               \
 267   nonstatic_field(MethodData,                  _size,                                         int)                                   \
 268   nonstatic_field(MethodData,                  _method,                                       Method*)                               \
 269   nonstatic_field(MethodData,                  _data_size,                                    int)                                   \
 270   nonstatic_field(MethodData,                  _data[0],                                      intptr_t)                              \
 271   nonstatic_field(MethodData,                  _parameters_type_data_di,                      int)                                   \
 272   nonstatic_field(MethodData,                  _nof_decompiles,                               uint)                                  \
 273   nonstatic_field(MethodData,                  _nof_overflow_recompiles,                      uint)                                  \
 274   nonstatic_field(MethodData,                  _nof_overflow_traps,                           uint)                                  \
 275   nonstatic_field(MethodData,                  _trap_hist._array[0],                          u1)                                    \
 276   nonstatic_field(MethodData,                  _eflags,                                       intx)                                  \
 277   nonstatic_field(MethodData,                  _arg_local,                                    intx)                                  \
 278   nonstatic_field(MethodData,                  _arg_stack,                                    intx)                                  \
 279   nonstatic_field(MethodData,                  _arg_returned,                                 intx)                                  \
 280   nonstatic_field(MethodData,                  _tenure_traps,                                 uint)                                  \
 281   nonstatic_field(MethodData,                  _invoke_mask,                                  int)                                   \
 282   nonstatic_field(MethodData,                  _backedge_mask,                                int)                                   \
 283   nonstatic_field(DataLayout,                  _header._struct._tag,                          u1)                                    \
 284   nonstatic_field(DataLayout,                  _header._struct._flags,                        u1)                                    \
 285   nonstatic_field(DataLayout,                  _header._struct._bci,                          u2)                                    \
 286   nonstatic_field(DataLayout,                  _header._struct._traps,                        u4)                                    \
 287   nonstatic_field(DataLayout,                  _cells[0],                                     intptr_t)                              \
 288   nonstatic_field(MethodCounters,              _nmethod_age,                                  int)                                   \
 289   nonstatic_field(MethodCounters,              _interpreter_invocation_limit,                 int)                                   \
 290   nonstatic_field(MethodCounters,              _interpreter_backward_branch_limit,            int)                                   \
 291   nonstatic_field(MethodCounters,              _interpreter_profile_limit,                    int)                                   \
 292   nonstatic_field(MethodCounters,              _invoke_mask,                                  int)                                   \
 293   nonstatic_field(MethodCounters,              _backedge_mask,                                int)                                   \
 294   COMPILER2_OR_JVMCI_PRESENT(nonstatic_field(MethodCounters, _interpreter_invocation_count,   int))                                  \
 295   COMPILER2_OR_JVMCI_PRESENT(nonstatic_field(MethodCounters, _interpreter_throwout_count,     u2))                                   \
 296   JVMTI_ONLY(nonstatic_field(MethodCounters,   _number_of_breakpoints,                        u2))                                   \
 297   nonstatic_field(MethodCounters,              _invocation_counter,                           InvocationCounter)                     \
 298   nonstatic_field(MethodCounters,              _backedge_counter,                             InvocationCounter)                     \
 299   nonstatic_field(Method,                      _constMethod,                                  ConstMethod*)                          \
 300   nonstatic_field(Method,                      _method_data,                                  MethodData*)                           \
 301   nonstatic_field(Method,                      _method_counters,                              MethodCounters*)                       \
 302   nonstatic_field(Method,                      _access_flags,                                 AccessFlags)                           \
 303   nonstatic_field(Method,                      _vtable_index,                                 int)                                   \
 304   nonstatic_field(Method,                      _intrinsic_id,                                 u2)                                    \
 305   nonstatic_field(Method,                      _flags,                                        u2)                                    \
 306   nonproduct_nonstatic_field(Method,           _compiled_invocation_count,                    int)                                   \
 307   volatile_nonstatic_field(Method,             _code,                                         CompiledMethod*)                       \
 308   nonstatic_field(Method,                      _i2i_entry,                                    address)                               \
 309   volatile_nonstatic_field(Method,             _from_compiled_entry,                          address)                               \
 310   volatile_nonstatic_field(Method,             _from_interpreted_entry,                       address)                               \
 311   volatile_nonstatic_field(ConstMethod,        _fingerprint,                                  uint64_t)                              \
 312   nonstatic_field(ConstMethod,                 _constants,                                    ConstantPool*)                         \
 313   nonstatic_field(ConstMethod,                 _stackmap_data,                                Array&lt;u1&gt;*)                            \
 314   nonstatic_field(ConstMethod,                 _constMethod_size,                             int)                                   \
 315   nonstatic_field(ConstMethod,                 _flags,                                        u2)                                    \
 316   nonstatic_field(ConstMethod,                 _code_size,                                    u2)                                    \
 317   nonstatic_field(ConstMethod,                 _name_index,                                   u2)                                    \
 318   nonstatic_field(ConstMethod,                 _signature_index,                              u2)                                    \
 319   nonstatic_field(ConstMethod,                 _method_idnum,                                 u2)                                    \
 320   nonstatic_field(ConstMethod,                 _max_stack,                                    u2)                                    \
 321   nonstatic_field(ConstMethod,                 _max_locals,                                   u2)                                    \
 322   nonstatic_field(ConstMethod,                 _size_of_parameters,                           u2)                                    \
 323   nonstatic_field(ObjArrayKlass,               _element_klass,                                Klass*)                                \
 324   nonstatic_field(ObjArrayKlass,               _bottom_klass,                                 Klass*)                                \
 325   volatile_nonstatic_field(Symbol,             _hash_and_refcount,                            unsigned int)                          \
 326   nonstatic_field(Symbol,                      _length,                                       u2)                                    \
 327   unchecked_nonstatic_field(Symbol,            _body,                                         sizeof(u1)) /* NOTE: no type */        \
 328   nonstatic_field(Symbol,                      _body[0],                                      u1)                                    \
 329   nonstatic_field(TypeArrayKlass,              _max_length,                                   jint)                                  \
 330   nonstatic_field(OopHandle,                   _obj,                                          oop*)                                  \
 331                                                                                                                                      \
 332   /***********************/                                                                                                          \
 333   /* Constant Pool Cache */                                                                                                          \
 334   /***********************/                                                                                                          \
 335                                                                                                                                      \
 336   volatile_nonstatic_field(ConstantPoolCacheEntry,      _indices,                             intx)                                  \
 337   volatile_nonstatic_field(ConstantPoolCacheEntry,      _f1,                                  Metadata*)                             \
 338   volatile_nonstatic_field(ConstantPoolCacheEntry,      _f2,                                  intx)                                  \
 339   volatile_nonstatic_field(ConstantPoolCacheEntry,      _flags,                               intx)                                  \
 340                                                                                                                                      \
 341   /********************************/                                                                                                 \
 342   /* MethodOop-related structures */                                                                                                 \
 343   /********************************/                                                                                                 \
 344                                                                                                                                      \
 345   nonstatic_field(CheckedExceptionElement,     class_cp_index,                                u2)                                    \
 346   nonstatic_field(LocalVariableTableElement,   start_bci,                                     u2)                                    \
 347   nonstatic_field(LocalVariableTableElement,   length,                                        u2)                                    \
 348   nonstatic_field(LocalVariableTableElement,   name_cp_index,                                 u2)                                    \
 349   nonstatic_field(LocalVariableTableElement,   descriptor_cp_index,                           u2)                                    \
 350   nonstatic_field(LocalVariableTableElement,   signature_cp_index,                            u2)                                    \
 351   nonstatic_field(LocalVariableTableElement,   slot,                                          u2)                                    \
 352   nonstatic_field(ExceptionTableElement,       start_pc,                                      u2)                                    \
 353   nonstatic_field(ExceptionTableElement,       end_pc,                                        u2)                                    \
 354   nonstatic_field(ExceptionTableElement,       handler_pc,                                    u2)                                    \
 355   nonstatic_field(ExceptionTableElement,       catch_type_index,                              u2)                                    \
 356   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _orig_bytecode,                                Bytecodes::Code))                      \
 357   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _bci,                                          int))                                  \
 358   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _name_index,                                   u2))                                   \
 359   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _signature_index,                              u2))                                   \
 360   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _next,                                         BreakpointInfo*))                      \
 361   /***********/                                                                                                                      \
 362   /* JNI IDs */                                                                                                                      \
 363   /***********/                                                                                                                      \
 364                                                                                                                                      \
 365   nonstatic_field(JNIid,                       _holder,                                       Klass*)                                \
 366   nonstatic_field(JNIid,                       _next,                                         JNIid*)                                \
 367   nonstatic_field(JNIid,                       _offset,                                       int)                                   \
 368                                                                                                                                      \
 369   /************/                                                                                                                     \
 370   /* Universe */                                                                                                                     \
 371   /************/                                                                                                                     \
 372      static_field(Universe,                    _collectedHeap,                                CollectedHeap*)                        \
 373   /******************/                                                                                                               \
 374   /* CompressedOops */                                                                                                               \
 375   /******************/                                                                                                               \
 376                                                                                                                                      \
 377      static_field(CompressedOops,              _narrow_oop._base,                             address)                               \
 378      static_field(CompressedOops,              _narrow_oop._shift,                            int)                                   \
 379      static_field(CompressedOops,              _narrow_oop._use_implicit_null_checks,         bool)                                  \
 380                                                                                                                                      \
 381   /***************************/                                                                                                      \
 382   /* CompressedKlassPointers */                                                                                                      \
 383   /***************************/                                                                                                      \
 384                                                                                                                                      \
 385      static_field(CompressedKlassPointers,     _narrow_klass._base,                           address)                               \
 386      static_field(CompressedKlassPointers,     _narrow_klass._shift,                          int)                                   \
 387                                                                                                                                      \
 388   /******/                                                                                                                           \
 389   /* os */                                                                                                                           \
 390   /******/                                                                                                                           \
 391                                                                                                                                      \
 392      static_field(os,                          _polling_page,                                 address)                               \
 393                                                                                                                                      \
 394   /**********/                                                                                                                       \
 395   /* Memory */                                                                                                                       \
 396   /**********/                                                                                                                       \
 397                                                                                                                                      \
 398      static_field(MetaspaceObj,                _shared_metaspace_base,                        void*)                                 \
 399      static_field(MetaspaceObj,                _shared_metaspace_top,                         void*)                                 \
 400   nonstatic_field(ThreadLocalAllocBuffer,      _start,                                        HeapWord*)                             \
 401   nonstatic_field(ThreadLocalAllocBuffer,      _top,                                          HeapWord*)                             \
 402   nonstatic_field(ThreadLocalAllocBuffer,      _end,                                          HeapWord*)                             \
 403   nonstatic_field(ThreadLocalAllocBuffer,      _pf_top,                                       HeapWord*)                             \
 404   nonstatic_field(ThreadLocalAllocBuffer,      _desired_size,                                 size_t)                                \
 405   nonstatic_field(ThreadLocalAllocBuffer,      _refill_waste_limit,                           size_t)                                \
 406      static_field(ThreadLocalAllocBuffer,      _reserve_for_allocation_prefetch,              int)                                   \
 407      static_field(ThreadLocalAllocBuffer,      _target_refills,                               unsigned)                              \
 408   nonstatic_field(ThreadLocalAllocBuffer,      _number_of_refills,                            unsigned)                              \
 409   nonstatic_field(ThreadLocalAllocBuffer,      _fast_refill_waste,                            unsigned)                              \
 410   nonstatic_field(ThreadLocalAllocBuffer,      _slow_refill_waste,                            unsigned)                              \
 411   nonstatic_field(ThreadLocalAllocBuffer,      _gc_waste,                                     unsigned)                              \
 412   nonstatic_field(ThreadLocalAllocBuffer,      _slow_allocations,                             unsigned)                              \
 413   nonstatic_field(VirtualSpace,                _low_boundary,                                 char*)                                 \
 414   nonstatic_field(VirtualSpace,                _high_boundary,                                char*)                                 \
 415   nonstatic_field(VirtualSpace,                _low,                                          char*)                                 \
 416   nonstatic_field(VirtualSpace,                _high,                                         char*)                                 \
 417   nonstatic_field(VirtualSpace,                _lower_high,                                   char*)                                 \
 418   nonstatic_field(VirtualSpace,                _middle_high,                                  char*)                                 \
 419   nonstatic_field(VirtualSpace,                _upper_high,                                   char*)                                 \
 420                                                                                                                                      \
 421   /************************/                                                                                                         \
 422   /* PerfMemory - jvmstat */                                                                                                         \
 423   /************************/                                                                                                         \
 424                                                                                                                                      \
 425   nonstatic_field(PerfDataPrologue,            magic,                                         jint)                                  \
 426   nonstatic_field(PerfDataPrologue,            byte_order,                                    jbyte)                                 \
 427   nonstatic_field(PerfDataPrologue,            major_version,                                 jbyte)                                 \
 428   nonstatic_field(PerfDataPrologue,            minor_version,                                 jbyte)                                 \
 429   nonstatic_field(PerfDataPrologue,            accessible,                                    jbyte)                                 \
 430   nonstatic_field(PerfDataPrologue,            used,                                          jint)                                  \
 431   nonstatic_field(PerfDataPrologue,            overflow,                                      jint)                                  \
 432   nonstatic_field(PerfDataPrologue,            mod_time_stamp,                                jlong)                                 \
 433   nonstatic_field(PerfDataPrologue,            entry_offset,                                  jint)                                  \
 434   nonstatic_field(PerfDataPrologue,            num_entries,                                   jint)                                  \
 435                                                                                                                                      \
 436   nonstatic_field(PerfDataEntry,               entry_length,                                  jint)                                  \
 437   nonstatic_field(PerfDataEntry,               name_offset,                                   jint)                                  \
 438   nonstatic_field(PerfDataEntry,               vector_length,                                 jint)                                  \
 439   nonstatic_field(PerfDataEntry,               data_type,                                     jbyte)                                 \
 440   nonstatic_field(PerfDataEntry,               flags,                                         jbyte)                                 \
 441   nonstatic_field(PerfDataEntry,               data_units,                                    jbyte)                                 \
 442   nonstatic_field(PerfDataEntry,               data_variability,                              jbyte)                                 \
 443   nonstatic_field(PerfDataEntry,               data_offset,                                   jint)                                  \
 444                                                                                                                                      \
 445      static_field(PerfMemory,                  _start,                                        char*)                                 \
 446      static_field(PerfMemory,                  _end,                                          char*)                                 \
 447      static_field(PerfMemory,                  _top,                                          char*)                                 \
 448      static_field(PerfMemory,                  _capacity,                                     size_t)                                \
 449      static_field(PerfMemory,                  _prologue,                                     PerfDataPrologue*)                     \
 450      static_field(PerfMemory,                  _initialized,                                  int)                                   \
 451                                                                                                                                      \
 452   /********************/                                                                                                             \
 453   /* SystemDictionary */                                                                                                             \
 454   /********************/                                                                                                             \
 455                                                                                                                                      \
 456      static_field(SystemDictionary,            WK_KLASS(Object_klass),                        InstanceKlass*)                        \
 457      static_field(SystemDictionary,            WK_KLASS(String_klass),                        InstanceKlass*)                        \
 458      static_field(SystemDictionary,            WK_KLASS(Class_klass),                         InstanceKlass*)                        \
 459      static_field(SystemDictionary,            WK_KLASS(ClassLoader_klass),                   InstanceKlass*)                        \
 460      static_field(SystemDictionary,            WK_KLASS(System_klass),                        InstanceKlass*)                        \
 461      static_field(SystemDictionary,            WK_KLASS(Thread_klass),                        InstanceKlass*)                        \
 462      static_field(SystemDictionary,            WK_KLASS(ThreadGroup_klass),                   InstanceKlass*)                        \
 463      static_field(SystemDictionary,            WK_KLASS(MethodHandle_klass),                  InstanceKlass*)                        \
 464                                                                                                                                      \
 465   /*************/                                                                                                                    \
 466   /* vmSymbols */                                                                                                                    \
 467   /*************/                                                                                                                    \
 468                                                                                                                                      \
 469      static_field(vmSymbols,                   _symbols[0],                                   Symbol*)                               \
 470                                                                                                                                      \
 471   /*******************/                                                                                                              \
 472   /* HashtableBucket */                                                                                                              \
 473   /*******************/                                                                                                              \
 474                                                                                                                                      \
 475   nonstatic_field(HashtableBucket&lt;mtInternal&gt;, _entry,                                        BasicHashtableEntry&lt;mtInternal&gt;*)      \
 476                                                                                                                                      \
 477   /******************/                                                                                                               \
 478   /* HashtableEntry */                                                                                                               \
 479   /******************/                                                                                                               \
 480                                                                                                                                      \
 481   nonstatic_field(BasicHashtableEntry&lt;mtInternal&gt;, _next,                                     BasicHashtableEntry&lt;mtInternal&gt;*)      \
 482   nonstatic_field(BasicHashtableEntry&lt;mtInternal&gt;, _hash,                                     unsigned int)                          \
 483   nonstatic_field(IntptrHashtableEntry,            _literal,                                  intptr_t)                              \
 484                                                                                                                                      \
 485   /*************/                                                                                                                    \
 486   /* Hashtable */                                                                                                                    \
 487   /*************/                                                                                                                    \
 488                                                                                                                                      \
 489   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _table_size,                                   int)                                   \
 490   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _buckets,                                      HashtableBucket&lt;mtInternal&gt;*)          \
 491   volatile_nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _free_list,                           BasicHashtableEntry&lt;mtInternal&gt;*)      \
 492   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _first_free_entry,                             char*)                                 \
 493   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _end_block,                                    char*)                                 \
 494   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _entry_size,                                   int)                                   \
 495                                                                                                                                      \
 496   /*******************/                                                                                                              \
 497   /* ClassLoaderData */                                                                                                              \
 498   /*******************/                                                                                                              \
 499   nonstatic_field(ClassLoaderData,             _class_loader,                                 OopHandle)                             \
 500   nonstatic_field(ClassLoaderData,             _next,                                         ClassLoaderData*)                      \
 501   volatile_nonstatic_field(ClassLoaderData,    _klasses,                                      Klass*)                                \
 502   nonstatic_field(ClassLoaderData,             _has_class_mirror_holder,                      bool)                                  \
 503   volatile_nonstatic_field(ClassLoaderData,    _dictionary,                                   Dictionary*)                           \
 504                                                                                                                                      \
 505   static_ptr_volatile_field(ClassLoaderDataGraph, _head,                                      ClassLoaderData*)                      \
 506                                                                                                                                      \
 507   /**********/                                                                                                                       \
 508   /* Arrays */                                                                                                                       \
 509   /**********/                                                                                                                       \
 510                                                                                                                                      \
 511   nonstatic_field(Array&lt;Klass*&gt;,               _length,                                       int)                                   \
 512   nonstatic_field(Array&lt;Klass*&gt;,               _data[0],                                      Klass*)                                \
 513                                                                                                                                      \
 514   /*******************/                                                                                                              \
 515   /* GrowableArrays  */                                                                                                              \
 516   /*******************/                                                                                                              \
 517                                                                                                                                      \
 518   nonstatic_field(GrowableArrayBase,           _len,                                          int)                                   \
 519   nonstatic_field(GrowableArrayBase,           _max,                                          int)                                   \
 520   nonstatic_field(GrowableArray&lt;int&gt;,          _data,                                         int*)                                  \
 521                                                                                                                                      \
 522   /********************************/                                                                                                 \
 523   /* CodeCache (NOTE: incomplete) */                                                                                                 \
 524   /********************************/                                                                                                 \
 525                                                                                                                                      \
 526      static_field(CodeCache,                   _heaps,                                        GrowableArray&lt;CodeHeap*&gt;*)             \
 527      static_field(CodeCache,                   _low_bound,                                    address)                               \
 528      static_field(CodeCache,                   _high_bound,                                   address)                               \
 529                                                                                                                                      \
 530   /*******************************/                                                                                                  \
 531   /* CodeHeap (NOTE: incomplete) */                                                                                                  \
 532   /*******************************/                                                                                                  \
 533                                                                                                                                      \
 534   nonstatic_field(CodeHeap,                    _memory,                                       VirtualSpace)                          \
 535   nonstatic_field(CodeHeap,                    _segmap,                                       VirtualSpace)                          \
 536   nonstatic_field(CodeHeap,                    _log2_segment_size,                            int)                                   \
 537   nonstatic_field(HeapBlock,                   _header,                                       HeapBlock::Header)                     \
 538   nonstatic_field(HeapBlock::Header,           _length,                                       size_t)                                \
 539   nonstatic_field(HeapBlock::Header,           _used,                                         bool)                                  \
 540                                                                                                                                      \
 541   /**********************************/                                                                                               \
 542   /* Interpreter (NOTE: incomplete) */                                                                                               \
 543   /**********************************/                                                                                               \
 544                                                                                                                                      \
 545      static_field(AbstractInterpreter,         _code,                                         StubQueue*)                            \
 546                                                                                                                                      \
 547   /****************************/                                                                                                     \
 548   /* Stubs (NOTE: incomplete) */                                                                                                     \
 549   /****************************/                                                                                                     \
 550                                                                                                                                      \
 551   nonstatic_field(StubQueue,                   _stub_buffer,                                  address)                               \
 552   nonstatic_field(StubQueue,                   _buffer_limit,                                 int)                                   \
 553   nonstatic_field(StubQueue,                   _queue_begin,                                  int)                                   \
 554   nonstatic_field(StubQueue,                   _queue_end,                                    int)                                   \
 555   nonstatic_field(StubQueue,                   _number_of_stubs,                              int)                                   \
 556   nonstatic_field(InterpreterCodelet,          _size,                                         int)                                   \
 557   nonstatic_field(InterpreterCodelet,          _description,                                  const char*)                           \
 558   nonstatic_field(InterpreterCodelet,          _bytecode,                                     Bytecodes::Code)                       \
 559                                                                                                                                      \
 560   /***********************************/                                                                                              \
 561   /* StubRoutines (NOTE: incomplete) */                                                                                              \
 562   /***********************************/                                                                                              \
 563                                                                                                                                      \
 564      static_field(StubRoutines,                _verify_oop_count,                             jint)                                  \
 565      static_field(StubRoutines,                _call_stub_return_address,                     address)                               \
 566      static_field(StubRoutines,                _aescrypt_encryptBlock,                        address)                               \
 567      static_field(StubRoutines,                _aescrypt_decryptBlock,                        address)                               \
 568      static_field(StubRoutines,                _cipherBlockChaining_encryptAESCrypt,          address)                               \
 569      static_field(StubRoutines,                _cipherBlockChaining_decryptAESCrypt,          address)                               \
 570      static_field(StubRoutines,                _electronicCodeBook_encryptAESCrypt,           address)                               \
 571      static_field(StubRoutines,                _electronicCodeBook_decryptAESCrypt,           address)                               \
 572      static_field(StubRoutines,                _counterMode_AESCrypt,                         address)                               \
 573      static_field(StubRoutines,                _ghash_processBlocks,                          address)                               \
 574      static_field(StubRoutines,                _base64_encodeBlock,                           address)                               \
 575      static_field(StubRoutines,                _updateBytesCRC32,                             address)                               \
 576      static_field(StubRoutines,                _crc_table_adr,                                address)                               \
 577      static_field(StubRoutines,                _crc32c_table_addr,                            address)                               \
 578      static_field(StubRoutines,                _updateBytesCRC32C,                            address)                               \
 579      static_field(StubRoutines,                _multiplyToLen,                                address)                               \
 580      static_field(StubRoutines,                _squareToLen,                                  address)                               \
 581      static_field(StubRoutines,                _bigIntegerRightShiftWorker,                   address)                               \
 582      static_field(StubRoutines,                _bigIntegerLeftShiftWorker,                    address)                               \
 583      static_field(StubRoutines,                _mulAdd,                                       address)                               \
 584      static_field(StubRoutines,                _dexp,                                         address)                               \
 585      static_field(StubRoutines,                _dlog,                                         address)                               \
 586      static_field(StubRoutines,                _dlog10,                                       address)                               \
 587      static_field(StubRoutines,                _dpow,                                         address)                               \
 588      static_field(StubRoutines,                _dsin,                                         address)                               \
 589      static_field(StubRoutines,                _dcos,                                         address)                               \
 590      static_field(StubRoutines,                _dtan,                                         address)                               \
 591      static_field(StubRoutines,                _vectorizedMismatch,                           address)                               \
 592      static_field(StubRoutines,                _jbyte_arraycopy,                              address)                               \
 593      static_field(StubRoutines,                _jshort_arraycopy,                             address)                               \
 594      static_field(StubRoutines,                _jint_arraycopy,                               address)                               \
 595      static_field(StubRoutines,                _jlong_arraycopy,                              address)                               \
 596      static_field(StubRoutines,                _oop_arraycopy,                                address)                               \
 597      static_field(StubRoutines,                _oop_arraycopy_uninit,                         address)                               \
 598      static_field(StubRoutines,                _jbyte_disjoint_arraycopy,                     address)                               \
 599      static_field(StubRoutines,                _jshort_disjoint_arraycopy,                    address)                               \
 600      static_field(StubRoutines,                _jint_disjoint_arraycopy,                      address)                               \
 601      static_field(StubRoutines,                _jlong_disjoint_arraycopy,                     address)                               \
 602      static_field(StubRoutines,                _oop_disjoint_arraycopy,                       address)                               \
 603      static_field(StubRoutines,                _oop_disjoint_arraycopy_uninit,                address)                               \
 604      static_field(StubRoutines,                _arrayof_jbyte_arraycopy,                      address)                               \
 605      static_field(StubRoutines,                _arrayof_jshort_arraycopy,                     address)                               \
 606      static_field(StubRoutines,                _arrayof_jint_arraycopy,                       address)                               \
 607      static_field(StubRoutines,                _arrayof_jlong_arraycopy,                      address)                               \
 608      static_field(StubRoutines,                _arrayof_oop_arraycopy,                        address)                               \
 609      static_field(StubRoutines,                _arrayof_oop_arraycopy_uninit,                 address)                               \
 610      static_field(StubRoutines,                _arrayof_jbyte_disjoint_arraycopy,             address)                               \
 611      static_field(StubRoutines,                _arrayof_jshort_disjoint_arraycopy,            address)                               \
 612      static_field(StubRoutines,                _arrayof_jint_disjoint_arraycopy,              address)                               \
 613      static_field(StubRoutines,                _arrayof_jlong_disjoint_arraycopy,             address)                               \
 614      static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy,               address)                               \
 615      static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy_uninit,        address)                               \
 616      static_field(StubRoutines,                _checkcast_arraycopy,                          address)                               \
 617      static_field(StubRoutines,                _checkcast_arraycopy_uninit,                   address)                               \
 618      static_field(StubRoutines,                _unsafe_arraycopy,                             address)                               \
 619      static_field(StubRoutines,                _generic_arraycopy,                            address)                               \
 620                                                                                                                                      \
 621   /*****************/                                                                                                                \
 622   /* SharedRuntime */                                                                                                                \
 623   /*****************/                                                                                                                \
 624                                                                                                                                      \
 625      static_field(SharedRuntime,               _wrong_method_blob,                            RuntimeStub*)                          \
 626      static_field(SharedRuntime,               _ic_miss_blob,                                 RuntimeStub*)                          \
 627      static_field(SharedRuntime,               _deopt_blob,                                   DeoptimizationBlob*)                   \
 628                                                                                                                                      \
 629   /***************************************/                                                                                          \
 630   /* PcDesc and other compiled code info */                                                                                          \
 631   /***************************************/                                                                                          \
 632                                                                                                                                      \
 633   nonstatic_field(PcDesc,                      _pc_offset,                                    int)                                   \
 634   nonstatic_field(PcDesc,                      _scope_decode_offset,                          int)                                   \
 635   nonstatic_field(PcDesc,                      _obj_decode_offset,                            int)                                   \
 636   nonstatic_field(PcDesc,                      _flags,                                        int)                                   \
 637                                                                                                                                      \
 638   /***************************************************/                                                                              \
 639   /* CodeBlobs (NOTE: incomplete, but only a little) */                                                                              \
 640   /***************************************************/                                                                              \
 641                                                                                                                                      \
 642   nonstatic_field(CodeBlob,                 _name,                                   const char*)                                    \
 643   nonstatic_field(CodeBlob,                 _size,                                   int)                                            \
 644   nonstatic_field(CodeBlob,                 _header_size,                            int)                                            \
 645   nonstatic_field(CodeBlob,                 _frame_complete_offset,                  int)                                            \
 646   nonstatic_field(CodeBlob,                 _data_offset,                            int)                                            \
 647   nonstatic_field(CodeBlob,                 _frame_size,                             int)                                            \
 648   nonstatic_field(CodeBlob,                 _oop_maps,                               ImmutableOopMapSet*)                            \
 649   nonstatic_field(CodeBlob,                 _code_begin,                             address)                                        \
 650   nonstatic_field(CodeBlob,                 _code_end,                               address)                                        \
 651   nonstatic_field(CodeBlob,                 _content_begin,                          address)                                        \
 652   nonstatic_field(CodeBlob,                 _data_end,                               address)                                        \
 653                                                                                                                                      \
 654   nonstatic_field(DeoptimizationBlob,          _unpack_offset,                                int)                                   \
 655                                                                                                                                      \
 656   nonstatic_field(RuntimeStub,                 _caller_must_gc_arguments,                     bool)                                  \
 657                                                                                                                                      \
 658   /********************************************************/                                                                         \
 659   /* CompiledMethod (NOTE: incomplete, but only a little) */                                                                         \
 660   /********************************************************/                                                                         \
 661                                                                                                                                      \
 662   nonstatic_field(CompiledMethod,                     _method,                                       Method*)                        \
 663   volatile_nonstatic_field(CompiledMethod,            _exception_cache,                              ExceptionCache*)                \
 664   nonstatic_field(CompiledMethod,                     _scopes_data_begin,                            address)                        \
 665   nonstatic_field(CompiledMethod,                     _deopt_handler_begin,                          address)                        \
 666   nonstatic_field(CompiledMethod,                     _deopt_mh_handler_begin,                       address)                        \
 667                                                                                                                                      \
 668   /**************************************************/                                                                               \
 669   /* NMethods (NOTE: incomplete, but only a little) */                                                                               \
 670   /**************************************************/                                                                               \
 671                                                                                                                                      \
 672   nonstatic_field(nmethod,                     _entry_bci,                                    int)                                   \
 673   nonstatic_field(nmethod,                     _osr_link,                                     nmethod*)                              \
 674   nonstatic_field(nmethod,                     _state,                                        volatile signed char)                  \
 675   nonstatic_field(nmethod,                     _exception_offset,                             int)                                   \
 676   nonstatic_field(nmethod,                     _orig_pc_offset,                               int)                                   \
 677   nonstatic_field(nmethod,                     _stub_offset,                                  int)                                   \
 678   nonstatic_field(nmethod,                     _consts_offset,                                int)                                   \
 679   nonstatic_field(nmethod,                     _oops_offset,                                  int)                                   \
 680   nonstatic_field(nmethod,                     _metadata_offset,                              int)                                   \
 681   nonstatic_field(nmethod,                     _scopes_pcs_offset,                            int)                                   \
 682   nonstatic_field(nmethod,                     _dependencies_offset,                          int)                                   \
 683   nonstatic_field(nmethod,                     _handler_table_offset,                         int)                                   \
 684   nonstatic_field(nmethod,                     _nul_chk_table_offset,                         int)                                   \
 685   nonstatic_field(nmethod,                     _nmethod_end_offset,                           int)                                   \
 686   nonstatic_field(nmethod,                     _entry_point,                                  address)                               \
 687   nonstatic_field(nmethod,                     _verified_entry_point,                         address)                               \
 688   nonstatic_field(nmethod,                     _osr_entry_point,                              address)                               \
 689   volatile_nonstatic_field(nmethod,            _lock_count,                                   jint)                                  \
 690   volatile_nonstatic_field(nmethod,            _stack_traversal_mark,                         long)                                  \
 691   nonstatic_field(nmethod,                     _compile_id,                                   int)                                   \
 692   nonstatic_field(nmethod,                     _comp_level,                                   int)                                   \
 693                                                                                                                                      \
 694   unchecked_c2_static_field(Deoptimization,    _trap_reason_name,                             void*)                                 \
 695                                                                                                                                      \
 696   nonstatic_field(Deoptimization::UnrollBlock, _size_of_deoptimized_frame,                    int)                                   \
 697   nonstatic_field(Deoptimization::UnrollBlock, _caller_adjustment,                            int)                                   \
 698   nonstatic_field(Deoptimization::UnrollBlock, _number_of_frames,                             int)                                   \
 699   nonstatic_field(Deoptimization::UnrollBlock, _total_frame_sizes,                            int)                                   \
 700   nonstatic_field(Deoptimization::UnrollBlock, _unpack_kind,                                  int)                                   \
 701   nonstatic_field(Deoptimization::UnrollBlock, _frame_sizes,                                  intptr_t*)                             \
 702   nonstatic_field(Deoptimization::UnrollBlock, _frame_pcs,                                    address*)                              \
 703   nonstatic_field(Deoptimization::UnrollBlock, _register_block,                               intptr_t*)                             \
 704   nonstatic_field(Deoptimization::UnrollBlock, _return_type,                                  BasicType)                             \
 705   nonstatic_field(Deoptimization::UnrollBlock, _initial_info,                                 intptr_t)                              \
 706   nonstatic_field(Deoptimization::UnrollBlock, _caller_actual_parameters,                     int)                                   \
 707                                                                                                                                      \
 708   /********************************/                                                                                                 \
 709   /* JavaCalls (NOTE: incomplete) */                                                                                                 \
 710   /********************************/                                                                                                 \
 711                                                                                                                                      \
 712   nonstatic_field(JavaCallWrapper,             _anchor,                                       JavaFrameAnchor)                       \
 713   /********************************/                                                                                                 \
 714   /* JavaFrameAnchor (NOTE: incomplete) */                                                                                           \
 715   /********************************/                                                                                                 \
 716   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_sp,                                 intptr_t*)                             \
 717   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_pc,                                 address)                               \
 718                                                                                                                                      \
 719   /******************************/                                                                                                   \
 720   /* Threads (NOTE: incomplete) */                                                                                                   \
 721   /******************************/                                                                                                   \
 722                                                                                                                                      \
 723   static_field(Threads,                     _number_of_threads,                               int)                                   \
 724   static_field(Threads,                     _number_of_non_daemon_threads,                    int)                                   \
 725   static_field(Threads,                     _return_code,                                     int)                                   \
 726                                                                                                                                      \
 727   static_ptr_volatile_field(ThreadsSMRSupport, _java_thread_list,                             ThreadsList*)                          \
 728   nonstatic_field(ThreadsList,                 _length,                                       const uint)                            \
 729   nonstatic_field(ThreadsList,                 _threads,                                      JavaThread *const *const)              \
 730                                                                                                                                      \
 731   nonstatic_field(ThreadShadow,                _pending_exception,                            oop)                                   \
 732   nonstatic_field(ThreadShadow,                _exception_file,                               const char*)                           \
 733   nonstatic_field(ThreadShadow,                _exception_line,                               int)                                   \
 734   volatile_nonstatic_field(Thread,             _suspend_flags,                                uint32_t)                              \
 735   nonstatic_field(Thread,                      _active_handles,                               JNIHandleBlock*)                       \
 736   nonstatic_field(Thread,                      _tlab,                                         ThreadLocalAllocBuffer)                \
 737   nonstatic_field(Thread,                      _allocated_bytes,                              jlong)                                 \
 738   nonstatic_field(Thread,                      _current_pending_monitor,                      ObjectMonitor*)                        \
 739   nonstatic_field(Thread,                      _current_pending_monitor_is_from_java,         bool)                                  \
 740   nonstatic_field(Thread,                      _current_waiting_monitor,                      ObjectMonitor*)                        \
 741   nonstatic_field(NamedThread,                 _name,                                         char*)                                 \
 742   nonstatic_field(NamedThread,                 _processed_thread,                             JavaThread*)                           \
 743   nonstatic_field(JavaThread,                  _threadObj,                                    OopHandle)                             \
 744   nonstatic_field(JavaThread,                  _anchor,                                       JavaFrameAnchor)                       \
 745   nonstatic_field(JavaThread,                  _vm_result,                                    oop)                                   \
 746   nonstatic_field(JavaThread,                  _vm_result_2,                                  Metadata*)                             \
 747   nonstatic_field(JavaThread,                  _pending_async_exception,                      oop)                                   \
 748   volatile_nonstatic_field(JavaThread,         _exception_oop,                                oop)                                   \
 749   volatile_nonstatic_field(JavaThread,         _exception_pc,                                 address)                               \
 750   volatile_nonstatic_field(JavaThread,         _is_method_handle_return,                      int)                                   \
 751   nonstatic_field(JavaThread,                  _special_runtime_exit_condition,               JavaThread::AsyncRequests)             \
 752   nonstatic_field(JavaThread,                  _saved_exception_pc,                           address)                               \
 753   volatile_nonstatic_field(JavaThread,         _thread_state,                                 JavaThreadState)                       \
 754   nonstatic_field(JavaThread,                  _osthread,                                     OSThread*)                             \
 755   nonstatic_field(JavaThread,                  _stack_base,                                   address)                               \
 756   nonstatic_field(JavaThread,                  _stack_size,                                   size_t)                                \
 757   nonstatic_field(JavaThread,                  _vframe_array_head,                            vframeArray*)                          \
 758   nonstatic_field(JavaThread,                  _vframe_array_last,                            vframeArray*)                          \
 759   volatile_nonstatic_field(JavaThread,         _terminated,                                   JavaThread::TerminatedTypes)           \
 760   nonstatic_field(Thread,                      _resource_area,                                ResourceArea*)                         \
 761   nonstatic_field(CompilerThread,              _env,                                          ciEnv*)                                \
 762                                                                                                                                      \
 763   /************/                                                                                                                     \
 764   /* OSThread */                                                                                                                     \
 765   /************/                                                                                                                     \
 766                                                                                                                                      \
 767   volatile_nonstatic_field(OSThread,           _state,                                        ThreadState)                           \
 768                                                                                                                                      \
 769   /************************/                                                                                                         \
 770   /* ImmutableOopMap      */                                                                                                         \
 771   /************************/                                                                                                         \
 772                                                                                                                                      \
 773   nonstatic_field(ImmutableOopMapSet,          _count,                                        int)                                   \
 774   nonstatic_field(ImmutableOopMapSet,          _size,                                         int)                                   \
 775                                                                                                                                      \
 776   nonstatic_field(ImmutableOopMapPair,         _pc_offset,                                    int)                                   \
 777   nonstatic_field(ImmutableOopMapPair,         _oopmap_offset,                                int)                                   \
 778                                                                                                                                      \
 779   nonstatic_field(ImmutableOopMap,             _count,                                        int)                                   \
 780                                                                                                                                      \
 781   /*********************************/                                                                                                \
 782   /* JNIHandles and JNIHandleBlock */                                                                                                \
 783   /*********************************/                                                                                                \
 784   static_field(JNIHandles,                     _global_handles,                               OopStorage*)                           \
 785   static_field(JNIHandles,                     _weak_global_handles,                          OopStorage*)                           \
 786   unchecked_nonstatic_field(JNIHandleBlock,    _handles,       JNIHandleBlock::block_size_in_oops * sizeof(Oop)) /* Note: no type */ \
 787   nonstatic_field(JNIHandleBlock,              _top,                                          int)                                   \
 788   nonstatic_field(JNIHandleBlock,              _next,                                         JNIHandleBlock*)                       \
 789                                                                                                                                      \
 790   /********************/                                                                                                             \
 791   /* CompressedStream */                                                                                                             \
 792   /********************/                                                                                                             \
 793                                                                                                                                      \
 794   nonstatic_field(CompressedStream,            _buffer,                                       u_char*)                               \
 795   nonstatic_field(CompressedStream,            _position,                                     int)                                   \
 796                                                                                                                                      \
 797   /*********************************/                                                                                                \
 798   /* VMRegImpl (NOTE: incomplete) */                                                                                                 \
 799   /*********************************/                                                                                                \
 800                                                                                                                                      \
 801      static_field(VMRegImpl,                   regName[0],                                    const char*)                           \
 802      static_field(VMRegImpl,                   stack0,                                        VMReg)                                 \
 803                                                                                                                                      \
 804   /*******************************/                                                                                                  \
 805   /* Runtime1 (NOTE: incomplete) */                                                                                                  \
 806   /*******************************/                                                                                                  \
 807                                                                                                                                      \
 808   unchecked_c1_static_field(Runtime1,          _blobs,                                 sizeof(Runtime1::_blobs)) /* NOTE: no type */ \
 809                                                                                                                                      \
 810   /**************/                                                                                                                   \
 811   /* CI */                                                                                                                           \
 812   /************/                                                                                                                     \
 813                                                                                                                                      \
 814   nonstatic_field(ciEnv,                       _compiler_data,                                void*)                                 \
 815   nonstatic_field(ciEnv,                       _failure_reason,                               const char*)                           \
 816   nonstatic_field(ciEnv,                       _factory,                                      ciObjectFactory*)                      \
 817   nonstatic_field(ciEnv,                       _dependencies,                                 Dependencies*)                         \
 818   nonstatic_field(ciEnv,                       _task,                                         CompileTask*)                          \
 819   nonstatic_field(ciEnv,                       _arena,                                        Arena*)                                \
 820                                                                                                                                      \
 821   nonstatic_field(ciBaseObject,                _ident,                                        uint)                                  \
 822                                                                                                                                      \
 823   nonstatic_field(ciObject,                    _handle,                                       jobject)                               \
 824   nonstatic_field(ciObject,                    _klass,                                        ciKlass*)                              \
 825                                                                                                                                      \
 826   nonstatic_field(ciMetadata,                  _metadata,                                     Metadata*)                             \
 827                                                                                                                                      \
 828   nonstatic_field(ciSymbol,                    _symbol,                                       Symbol*)                               \
 829                                                                                                                                      \
 830   nonstatic_field(ciType,                      _basic_type,                                   BasicType)                             \
 831                                                                                                                                      \
 832   nonstatic_field(ciKlass,                     _name,                                         ciSymbol*)                             \
 833                                                                                                                                      \
 834   nonstatic_field(ciArrayKlass,                _dimension,                                    jint)                                  \
 835                                                                                                                                      \
 836   nonstatic_field(ciObjArrayKlass,             _element_klass,                                ciKlass*)                              \
 837   nonstatic_field(ciObjArrayKlass,             _base_element_klass,                           ciKlass*)                              \
 838                                                                                                                                      \
 839   nonstatic_field(ciInstanceKlass,             _init_state,                                   InstanceKlass::ClassState)             \
 840   nonstatic_field(ciInstanceKlass,             _is_shared,                                    bool)                                  \
 841                                                                                                                                      \
 842   nonstatic_field(ciMethod,                    _interpreter_invocation_count,                 int)                                   \
 843   nonstatic_field(ciMethod,                    _interpreter_throwout_count,                   int)                                   \
 844   nonstatic_field(ciMethod,                    _instructions_size,                            int)                                   \
 845                                                                                                                                      \
 846   nonstatic_field(ciMethodData,                _data_size,                                    int)                                   \
 847   nonstatic_field(ciMethodData,                _state,                                        u_char)                                \
 848   nonstatic_field(ciMethodData,                _extra_data_size,                              int)                                   \
 849   nonstatic_field(ciMethodData,                _data,                                         intptr_t*)                             \
 850   nonstatic_field(ciMethodData,                _hint_di,                                      int)                                   \
 851   nonstatic_field(ciMethodData,                _eflags,                                       intx)                                  \
 852   nonstatic_field(ciMethodData,                _arg_local,                                    intx)                                  \
 853   nonstatic_field(ciMethodData,                _arg_stack,                                    intx)                                  \
 854   nonstatic_field(ciMethodData,                _arg_returned,                                 intx)                                  \
 855   nonstatic_field(ciMethodData,                _current_mileage,                              int)                                   \
 856   nonstatic_field(ciMethodData,                _orig,                                         MethodData)                            \
 857                                                                                                                                      \
 858   nonstatic_field(ciField,                     _holder,                                       ciInstanceKlass*)                      \
 859   nonstatic_field(ciField,                     _name,                                         ciSymbol*)                             \
 860   nonstatic_field(ciField,                     _signature,                                    ciSymbol*)                             \
 861   nonstatic_field(ciField,                     _offset,                                       int)                                   \
 862   nonstatic_field(ciField,                     _is_constant,                                  bool)                                  \
 863   nonstatic_field(ciField,                     _constant_value,                               ciConstant)                            \
 864                                                                                                                                      \
 865   nonstatic_field(ciObjectFactory,             _ci_metadata,                                  GrowableArray&lt;ciMetadata*&gt;*)           \
 866   nonstatic_field(ciObjectFactory,             _symbols,                                      GrowableArray&lt;ciSymbol*&gt;*)             \
 867   nonstatic_field(ciObjectFactory,             _unloaded_methods,                             GrowableArray&lt;ciMethod*&gt;*)             \
 868                                                                                                                                      \
 869   nonstatic_field(ciConstant,                  _type,                                         BasicType)                             \
 870   nonstatic_field(ciConstant,                  _value._int,                                   jint)                                  \
 871   nonstatic_field(ciConstant,                  _value._long,                                  jlong)                                 \
 872   nonstatic_field(ciConstant,                  _value._float,                                 jfloat)                                \
 873   nonstatic_field(ciConstant,                  _value._double,                                jdouble)                               \
 874   nonstatic_field(ciConstant,                  _value._object,                                ciObject*)                             \
 875                                                                                                                                      \
 876   /************/                                                                                                                     \
 877   /* Monitors */                                                                                                                     \
 878   /************/                                                                                                                     \
 879                                                                                                                                      \
 880   volatile_nonstatic_field(ObjectMonitor,      _header,                                       markWord)                              \
 881   unchecked_nonstatic_field(ObjectMonitor,     _object,                                       sizeof(void *)) /* NOTE: no type */    \
 882   unchecked_nonstatic_field(ObjectMonitor,     _owner,                                        sizeof(void *)) /* NOTE: no type */    \
 883   volatile_nonstatic_field(ObjectMonitor,      _next_om,                                      ObjectMonitor*)                        \
 884   volatile_nonstatic_field(BasicLock,          _displaced_header,                             markWord)                              \
 885   nonstatic_field(ObjectMonitor,               _contentions,                                  jint)                                  \
 886   volatile_nonstatic_field(ObjectMonitor,      _waiters,                                      jint)                                  \
 887   volatile_nonstatic_field(ObjectMonitor,      _recursions,                                   intx)                                  \
 888   nonstatic_field(BasicObjectLock,             _lock,                                         BasicLock)                             \
 889   nonstatic_field(BasicObjectLock,             _obj,                                          oop)                                   \
 890   static_field(ObjectSynchronizer,             g_block_list,                                  PaddedObjectMonitor*)                  \
 891                                                                                                                                      \
 892   /*********************/                                                                                                            \
 893   /* Matcher (C2 only) */                                                                                                            \
 894   /*********************/                                                                                                            \
 895                                                                                                                                      \
 896   unchecked_c2_static_field(Matcher,           _regEncode,                          sizeof(Matcher::_regEncode)) /* NOTE: no type */ \
 897                                                                                                                                      \
 898   c2_nonstatic_field(Node,                     _in,                                           Node**)                                \
 899   c2_nonstatic_field(Node,                     _out,                                          Node**)                                \
 900   c2_nonstatic_field(Node,                     _cnt,                                          node_idx_t)                            \
 901   c2_nonstatic_field(Node,                     _max,                                          node_idx_t)                            \
 902   c2_nonstatic_field(Node,                     _outcnt,                                       node_idx_t)                            \
 903   c2_nonstatic_field(Node,                     _outmax,                                       node_idx_t)                            \
 904   c2_nonstatic_field(Node,                     _idx,                                          const node_idx_t)                      \
 905   c2_nonstatic_field(Node,                     _class_id,                                     juint)                                 \
 906   c2_nonstatic_field(Node,                     _flags,                                        jushort)                               \
 907                                                                                                                                      \
 908   c2_nonstatic_field(Compile,                  _root,                                         RootNode*)                             \
 909   c2_nonstatic_field(Compile,                  _unique,                                       uint)                                  \
 910   c2_nonstatic_field(Compile,                  _entry_bci,                                    int)                                   \
 911   c2_nonstatic_field(Compile,                  _top,                                          Node*)                                 \
 912   c2_nonstatic_field(Compile,                  _cfg,                                          PhaseCFG*)                             \
 913   c2_nonstatic_field(Compile,                  _regalloc,                                     PhaseRegAlloc*)                        \
 914   c2_nonstatic_field(Compile,                  _method,                                       ciMethod*)                             \
 915   c2_nonstatic_field(Compile,                  _compile_id,                                   const int)                             \
 916   c2_nonstatic_field(Compile,                  _save_argument_registers,                      const bool)                            \
 917   c2_nonstatic_field(Compile,                  _subsume_loads,                                const bool)                            \
 918   c2_nonstatic_field(Compile,                  _do_escape_analysis,                           const bool)                            \
 919   c2_nonstatic_field(Compile,                  _eliminate_boxing,                             const bool)                            \
 920   c2_nonstatic_field(Compile,                  _ilt,                                          InlineTree*)                           \
 921                                                                                                                                      \
 922   c2_nonstatic_field(InlineTree,               _caller_jvms,                                  JVMState*)                             \
 923   c2_nonstatic_field(InlineTree,               _method,                                       ciMethod*)                             \
 924   c2_nonstatic_field(InlineTree,               _caller_tree,                                  InlineTree*)                           \
 925   c2_nonstatic_field(InlineTree,               _subtrees,                                     GrowableArray&lt;InlineTree*&gt;)            \
 926                                                                                                                                      \
 927   c2_nonstatic_field(OptoRegPair,              _first,                                        short)                                 \
 928   c2_nonstatic_field(OptoRegPair,              _second,                                       short)                                 \
 929                                                                                                                                      \
 930   c2_nonstatic_field(JVMState,                 _caller,                                       JVMState*)                             \
 931   c2_nonstatic_field(JVMState,                 _depth,                                        uint)                                  \
 932   c2_nonstatic_field(JVMState,                 _locoff,                                       uint)                                  \
 933   c2_nonstatic_field(JVMState,                 _stkoff,                                       uint)                                  \
 934   c2_nonstatic_field(JVMState,                 _monoff,                                       uint)                                  \
 935   c2_nonstatic_field(JVMState,                 _scloff,                                       uint)                                  \
 936   c2_nonstatic_field(JVMState,                 _endoff,                                       uint)                                  \
 937   c2_nonstatic_field(JVMState,                 _sp,                                           uint)                                  \
 938   c2_nonstatic_field(JVMState,                 _bci,                                          int)                                   \
 939   c2_nonstatic_field(JVMState,                 _method,                                       ciMethod*)                             \
 940   c2_nonstatic_field(JVMState,                 _map,                                          SafePointNode*)                        \
 941                                                                                                                                      \
 942   c2_nonstatic_field(SafePointNode,            _jvms,                                         JVMState* const)                       \
 943                                                                                                                                      \
 944   c2_nonstatic_field(MachSafePointNode,        _jvms,                                         JVMState*)                             \
 945   c2_nonstatic_field(MachSafePointNode,        _jvmadj,                                       uint)                                  \
 946                                                                                                                                      \
 947   c2_nonstatic_field(MachIfNode,               _prob,                                         jfloat)                                \
 948   c2_nonstatic_field(MachIfNode,               _fcnt,                                         jfloat)                                \
 949                                                                                                                                      \
 950   c2_nonstatic_field(MachJumpNode,             _probs,                                        jfloat*)                               \
 951                                                                                                                                      \
 952   c2_nonstatic_field(CallNode,                 _entry_point,                                  address)                               \
 953                                                                                                                                      \
 954   c2_nonstatic_field(CallJavaNode,             _method,                                       ciMethod*)                             \
 955                                                                                                                                      \
 956   c2_nonstatic_field(CallRuntimeNode,          _name,                                         const char*)                           \
 957                                                                                                                                      \
 958   c2_nonstatic_field(CallStaticJavaNode,       _name,                                         const char*)                           \
 959                                                                                                                                      \
 960   c2_nonstatic_field(MachCallJavaNode,         _method,                                       ciMethod*)                             \
 961   c2_nonstatic_field(MachCallJavaNode,         _bci,                                          int)                                   \
 962                                                                                                                                      \
 963   c2_nonstatic_field(MachCallStaticJavaNode,   _name,                                         const char*)                           \
 964                                                                                                                                      \
 965   c2_nonstatic_field(MachCallRuntimeNode,      _name,                                         const char*)                           \
 966                                                                                                                                      \
 967   c2_nonstatic_field(PhaseCFG,                 _number_of_blocks,                             uint)                                  \
 968   c2_nonstatic_field(PhaseCFG,                 _blocks,                                       Block_List)                            \
 969   c2_nonstatic_field(PhaseCFG,                 _node_to_block_mapping,                        Block_Array)                           \
 970   c2_nonstatic_field(PhaseCFG,                 _root_block,                                   Block*)                                \
 971                                                                                                                                      \
 972   c2_nonstatic_field(PhaseRegAlloc,            _node_regs,                                    OptoRegPair*)                          \
 973   c2_nonstatic_field(PhaseRegAlloc,            _node_regs_max_index,                          uint)                                  \
 974   c2_nonstatic_field(PhaseRegAlloc,            _framesize,                                    uint)                                  \
 975   c2_nonstatic_field(PhaseRegAlloc,            _max_reg,                                      OptoReg::Name)                         \
 976                                                                                                                                      \
 977   c2_nonstatic_field(PhaseChaitin,             _trip_cnt,                                     int)                                   \
 978   c2_nonstatic_field(PhaseChaitin,             _alternate,                                    int)                                   \
 979   c2_nonstatic_field(PhaseChaitin,             _lo_degree,                                    uint)                                  \
 980   c2_nonstatic_field(PhaseChaitin,             _lo_stk_degree,                                uint)                                  \
 981   c2_nonstatic_field(PhaseChaitin,             _hi_degree,                                    uint)                                  \
 982   c2_nonstatic_field(PhaseChaitin,             _simplified,                                   uint)                                  \
 983                                                                                                                                      \
 984   c2_nonstatic_field(Block,                    _nodes,                                        Node_List)                             \
 985   c2_nonstatic_field(Block,                    _succs,                                        Block_Array)                           \
 986   c2_nonstatic_field(Block,                    _num_succs,                                    uint)                                  \
 987   c2_nonstatic_field(Block,                    _pre_order,                                    uint)                                  \
 988   c2_nonstatic_field(Block,                    _dom_depth,                                    uint)                                  \
 989   c2_nonstatic_field(Block,                    _idom,                                         Block*)                                \
 990   c2_nonstatic_field(Block,                    _freq,                                         jdouble)                               \
 991                                                                                                                                      \
 992   c2_nonstatic_field(CFGElement,               _freq,                                         jdouble)                               \
 993                                                                                                                                      \
 994   c2_nonstatic_field(Block_List,               _cnt,                                          uint)                                  \
 995                                                                                                                                      \
 996   c2_nonstatic_field(Block_Array,              _size,                                         uint)                                  \
 997   c2_nonstatic_field(Block_Array,              _blocks,                                       Block**)                               \
 998   c2_nonstatic_field(Block_Array,              _arena,                                        Arena*)                                \
 999                                                                                                                                      \
1000   c2_nonstatic_field(Node_List,                _cnt,                                          uint)                                  \
1001                                                                                                                                      \
1002   c2_nonstatic_field(Node_Array,               _max,                                          uint)                                  \
1003   c2_nonstatic_field(Node_Array,               _nodes,                                        Node**)                                \
1004   c2_nonstatic_field(Node_Array,               _a,                                            Arena*)                                \
1005                                                                                                                                      \
1006                                                                                                                                      \
1007   /*********************/                                                                                                            \
1008   /* -XX flags         */                                                                                                            \
1009   /*********************/                                                                                                            \
1010                                                                                                                                      \
1011   nonstatic_field(JVMFlag,                     _type,                                         const char*)                           \
1012   nonstatic_field(JVMFlag,                     _name,                                         const char*)                           \
1013   unchecked_nonstatic_field(JVMFlag,           _addr,                                         sizeof(void*)) /* NOTE: no type */     \
1014   nonstatic_field(JVMFlag,                     _flags,                                        JVMFlag::Flags)                        \
1015      static_field(JVMFlag,                     flags,                                         JVMFlag*)                              \
1016      static_field(JVMFlag,                     numFlags,                                      size_t)                                \
1017                                                                                                                                      \
1018   /*************************/                                                                                                        \
1019   /* JDK / VM version info */                                                                                                        \
1020   /*************************/                                                                                                        \
1021                                                                                                                                      \
1022      static_field(Abstract_VM_Version,         _s_vm_release,                                 const char*)                           \
1023      static_field(Abstract_VM_Version,         _s_internal_vm_info_string,                    const char*)                           \
1024      static_field(Abstract_VM_Version,         _features,                                     uint64_t)                              \
1025      static_field(Abstract_VM_Version,         _features_string,                              const char*)                           \
1026      static_field(Abstract_VM_Version,         _vm_major_version,                             int)                                   \
1027      static_field(Abstract_VM_Version,         _vm_minor_version,                             int)                                   \
1028      static_field(Abstract_VM_Version,         _vm_security_version,                          int)                                   \
1029      static_field(Abstract_VM_Version,         _vm_build_number,                              int)                                   \
1030                                                                                                                                      \
1031      static_field(JDK_Version,                 _current,                                      JDK_Version)                           \
1032   nonstatic_field(JDK_Version,                 _major,                                        unsigned char)                         \
1033                                                                                                                                      \
1034   /*************************/                                                                                                        \
1035   /* JVMTI */                                                                                                                        \
1036   /*************************/                                                                                                        \
1037                                                                                                                                      \
1038   JVMTI_STRUCTS(static_field)                                                                                                        \
1039                                                                                                                                      \
1040   /*************/                                                                                                                    \
1041   /* Arguments */                                                                                                                    \
1042   /*************/                                                                                                                    \
1043                                                                                                                                      \
1044      static_field(Arguments,                   _jvm_flags_array,                              char**)                                \
1045      static_field(Arguments,                   _num_jvm_flags,                                int)                                   \
1046      static_field(Arguments,                   _jvm_args_array,                               char**)                                \
1047      static_field(Arguments,                   _num_jvm_args,                                 int)                                   \
1048      static_field(Arguments,                   _java_command,                                 char*)                                 \
1049                                                                                                                                      \
1050   /************/                                                                                                                     \
1051   /* Array&lt;T&gt; */                                                                                                                     \
1052   /************/                                                                                                                     \
1053                                                                                                                                      \
1054   nonstatic_field(Array&lt;int&gt;,                  _length,                                       int)                                   \
1055   unchecked_nonstatic_field(Array&lt;int&gt;,        _data,                                         sizeof(int))                           \
1056   unchecked_nonstatic_field(Array&lt;u1&gt;,         _data,                                         sizeof(u1))                            \
1057   unchecked_nonstatic_field(Array&lt;u2&gt;,         _data,                                         sizeof(u2))                            \
1058   unchecked_nonstatic_field(Array&lt;Method*&gt;,    _data,                                         sizeof(Method*))                       \
1059   unchecked_nonstatic_field(Array&lt;Klass*&gt;,     _data,                                         sizeof(Klass*))                        \
1060                                                                                                                                      \
1061   /*********************************/                                                                                                \
1062   /* java_lang_Class fields        */                                                                                                \
1063   /*********************************/                                                                                                \
1064                                                                                                                                      \
1065      static_field(java_lang_Class,             _klass_offset,                                 int)                                   \
1066      static_field(java_lang_Class,             _array_klass_offset,                           int)                                   \
1067      static_field(java_lang_Class,             _oop_size_offset,                              int)                                   \
1068      static_field(java_lang_Class,             _static_oop_field_count_offset,                int)                                   \
1069                                                                                                                                      \
1070   /********************************************/                                                                                     \
1071   /* FileMapInfo fields (CDS archive related) */                                                                                     \
1072   /********************************************/                                                                                     \
1073                                                                                                                                      \
1074   CDS_ONLY(nonstatic_field(FileMapInfo,        _header,                   FileMapHeader*))                                           \
1075   CDS_ONLY(   static_field(FileMapInfo,        _current_info,             FileMapInfo*))                                             \
1076   CDS_ONLY(nonstatic_field(FileMapHeader,      _space[0],                 CDSFileMapRegion))                                         \
1077   CDS_ONLY(nonstatic_field(FileMapHeader,      _cloned_vtables_offset,    size_t))                                                   \
1078   CDS_ONLY(nonstatic_field(FileMapHeader,      _mapped_base_address,      char*))                                                    \
1079   CDS_ONLY(nonstatic_field(CDSFileMapRegion,   _mapped_base,              char*))                                                    \
1080   CDS_ONLY(nonstatic_field(CDSFileMapRegion,   _used,                     size_t))                                                   \
1081                                                                                                                                      \
1082   /******************/                                                                                                               \
1083   /* VMError fields */                                                                                                               \
1084   /******************/                                                                                                               \
1085                                                                                                                                      \
1086      static_field(VMError,                     _thread,                                       Thread*)                               \
1087                                                                                                                                      \
1088   /************************/                                                                                                         \
1089   /* Miscellaneous fields */                                                                                                         \
1090   /************************/                                                                                                         \
1091                                                                                                                                      \
1092   nonstatic_field(CompileTask,                 _method,                                       Method*)                               \
1093   nonstatic_field(CompileTask,                 _osr_bci,                                      int)                                   \
1094   nonstatic_field(CompileTask,                 _comp_level,                                   int)                                   \
1095   nonstatic_field(CompileTask,                 _compile_id,                                   uint)                                  \
1096   nonstatic_field(CompileTask,                 _num_inlined_bytecodes,                        int)                                   \
1097   nonstatic_field(CompileTask,                 _next,                                         CompileTask*)                          \
1098   nonstatic_field(CompileTask,                 _prev,                                         CompileTask*)                          \
1099                                                                                                                                      \
1100   nonstatic_field(vframeArray,                 _next,                                         vframeArray*)                          \
1101   nonstatic_field(vframeArray,                 _original,                                     frame)                                 \
1102   nonstatic_field(vframeArray,                 _caller,                                       frame)                                 \
1103   nonstatic_field(vframeArray,                 _frames,                                       int)                                   \
1104                                                                                                                                      \
1105   nonstatic_field(vframeArrayElement,          _frame,                                        frame)                                 \
1106   nonstatic_field(vframeArrayElement,          _bci,                                          int)                                   \
1107   nonstatic_field(vframeArrayElement,          _method,                                       Method*)                               \
1108                                                                                                                                      \
1109   nonstatic_field(AccessFlags,                 _flags,                                        jint)                                  \
1110   nonstatic_field(elapsedTimer,                _counter,                                      jlong)                                 \
1111   nonstatic_field(elapsedTimer,                _active,                                       bool)                                  \
1112   nonstatic_field(InvocationCounter,           _counter,                                      unsigned int)
1113 
1114 //--------------------------------------------------------------------------------
1115 // VM_TYPES
1116 //
1117 // This list must enumerate at least all of the types in the above
1118 // list. For the types in the above list, the entry below must have
1119 // exactly the same spacing since string comparisons are done in the
1120 // code which verifies the consistency of these tables (in the debug
1121 // build).
1122 //
1123 // In addition to the above types, this list is required to enumerate
1124 // the JNI's java types, which are used to indicate the size of Java
1125 // fields in this VM to the SA. Further, oop types are currently
1126 // distinguished by name (i.e., ends with "oop") over in the SA.
1127 //
1128 // The declare_toplevel_type macro should be used to declare types
1129 // which do not have a superclass.
1130 //
1131 // The declare_integer_type and declare_unsigned_integer_type macros
1132 // are required in order to properly identify C integer types over in
1133 // the SA. They should be used for any type which is otherwise opaque
1134 // and which it is necessary to coerce into an integer value. This
1135 // includes, for example, the type uintptr_t. Note that while they
1136 // will properly identify the type's size regardless of the platform,
1137 // since it is does not seem possible to deduce or check signedness at
1138 // compile time using the pointer comparison tricks, it is currently
1139 // required that the given types have the same signedness across all
1140 // platforms.
1141 //
1142 // NOTE that there are platform-specific additions to this table in
1143 // vmStructs_&lt;os&gt;_&lt;cpu&gt;.hpp.
1144 
1145 #define VM_TYPES(declare_type,                                            \
1146                  declare_toplevel_type,                                   \
1147                  declare_oop_type,                                        \
1148                  declare_integer_type,                                    \
1149                  declare_unsigned_integer_type,                           \
1150                  declare_c1_toplevel_type,                                \
1151                  declare_c2_type,                                         \
1152                  declare_c2_toplevel_type)                                \
1153                                                                           \
1154   /*************************************************************/         \
1155   /* Java primitive types -- required by the SA implementation */         \
1156   /* in order to determine the size of Java fields in this VM  */         \
1157   /* (the implementation looks up these names specifically)    */         \
1158   /* NOTE: since we fetch these sizes from the remote VM, we   */         \
1159   /* have a bootstrapping sequence during which it is not      */         \
1160   /* valid to fetch Java values from the remote process, only  */         \
1161   /* C integer values (of known size). NOTE also that we do    */         \
1162   /* NOT include "Java unsigned" types like juint here; since  */         \
1163   /* Java does not have unsigned primitive types, those can    */         \
1164   /* not be mapped directly and are considered to be C integer */         \
1165   /* types in this system (see the "other types" section,      */         \
1166   /* below.)                                                   */         \
1167   /*************************************************************/         \
1168                                                                           \
1169   declare_toplevel_type(jboolean)                                         \
1170   declare_toplevel_type(jbyte)                                            \
1171   declare_toplevel_type(jchar)                                            \
1172   declare_toplevel_type(jdouble)                                          \
1173   declare_toplevel_type(jfloat)                                           \
1174   declare_toplevel_type(jint)                                             \
1175   declare_toplevel_type(jlong)                                            \
1176   declare_toplevel_type(jshort)                                           \
1177                                                                           \
1178   /*********************************************************************/ \
1179   /* C integer types. User-defined typedefs (like "size_t" or          */ \
1180   /* "intptr_t") are guaranteed to be present with the same names over */ \
1181   /* in the SA's type database. Names like "unsigned short" are not    */ \
1182   /* guaranteed to be visible through the SA's type database lookup    */ \
1183   /* mechanism, though they will have a Type object created for them   */ \
1184   /* and are valid types for Fields.                                   */ \
1185   /*********************************************************************/ \
1186   declare_integer_type(bool)                                              \
1187   declare_integer_type(short)                                             \
1188   declare_integer_type(int)                                               \
1189   declare_integer_type(long)                                              \
1190   declare_integer_type(char)                                              \
1191   declare_integer_type(volatile signed char)                              \
1192   declare_unsigned_integer_type(unsigned char)                            \
1193   declare_unsigned_integer_type(u_char)                                   \
1194   declare_unsigned_integer_type(unsigned int)                             \
1195   declare_unsigned_integer_type(uint)                                     \
1196   declare_unsigned_integer_type(unsigned short)                           \
1197   declare_unsigned_integer_type(jushort)                                  \
1198   declare_unsigned_integer_type(unsigned long)                            \
1199   /* The compiler thinks this is a different type than */                 \
1200   /* unsigned short on Win32 */                                           \
1201   declare_unsigned_integer_type(u1)                                       \
1202   declare_unsigned_integer_type(u2)                                       \
1203   declare_unsigned_integer_type(u4)                                       \
1204   declare_unsigned_integer_type(u8)                                       \
1205   declare_unsigned_integer_type(unsigned)                                 \
1206                                                                           \
1207   /*****************************/                                         \
1208   /* C primitive pointer types */                                         \
1209   /*****************************/                                         \
1210                                                                           \
1211   declare_toplevel_type(void*)                                            \
1212   declare_toplevel_type(int*)                                             \
1213   declare_toplevel_type(char*)                                            \
1214   declare_toplevel_type(char**)                                           \
1215   declare_toplevel_type(u_char*)                                          \
1216   declare_toplevel_type(unsigned char*)                                   \
1217   declare_toplevel_type(volatile unsigned char*)                          \
1218                                                                           \
1219   /*******************************************************************/   \
1220   /* Types which it will be handy to have available over in the SA   */   \
1221   /* in order to do platform-independent address -&gt; integer coercion */   \
1222   /* (note: these will be looked up by name)                         */   \
1223   /*******************************************************************/   \
1224                                                                           \
1225   declare_unsigned_integer_type(size_t)                                   \
1226   declare_integer_type(ssize_t)                                           \
1227   declare_integer_type(intx)                                              \
1228   declare_integer_type(intptr_t)                                          \
1229   declare_unsigned_integer_type(uintx)                                    \
1230   declare_unsigned_integer_type(uintptr_t)                                \
1231   declare_unsigned_integer_type(uint8_t)                                  \
1232   declare_unsigned_integer_type(uint32_t)                                 \
1233   declare_unsigned_integer_type(uint64_t)                                 \
1234                                                                           \
1235   /******************************************/                            \
1236   /* OopDesc hierarchy (NOTE: some missing) */                            \
1237   /******************************************/                            \
1238                                                                           \
1239   declare_toplevel_type(oopDesc)                                          \
1240     declare_type(arrayOopDesc, oopDesc)                                   \
1241       declare_type(objArrayOopDesc, arrayOopDesc)                         \
1242     declare_type(instanceOopDesc, oopDesc)                                \
1243                                                                           \
1244   /**************************************************/                    \
1245   /* MetadataOopDesc hierarchy (NOTE: some missing) */                    \
1246   /**************************************************/                    \
1247                                                                           \
1248   declare_toplevel_type(CompiledICHolder)                                 \
1249   declare_toplevel_type(MetaspaceObj)                                     \
1250     declare_type(Metadata, MetaspaceObj)                                  \
1251     declare_type(Klass, Metadata)                                         \
1252            declare_type(ArrayKlass, Klass)                                \
1253            declare_type(ObjArrayKlass, ArrayKlass)                        \
1254            declare_type(TypeArrayKlass, ArrayKlass)                       \
1255       declare_type(InstanceKlass, Klass)                                  \
1256         declare_type(InstanceClassLoaderKlass, InstanceKlass)             \
1257         declare_type(InstanceMirrorKlass, InstanceKlass)                  \
1258         declare_type(InstanceRefKlass, InstanceKlass)                     \
1259     declare_type(ConstantPool, Metadata)                                  \
1260     declare_type(ConstantPoolCache, MetaspaceObj)                         \
1261     declare_type(MethodData, Metadata)                                    \
1262     declare_type(Method, Metadata)                                        \
1263     declare_type(MethodCounters, MetaspaceObj)                            \
1264     declare_type(ConstMethod, MetaspaceObj)                               \
1265                                                                           \
1266   declare_toplevel_type(narrowKlass)                                      \
1267                                                                           \
1268   declare_toplevel_type(vtableEntry)                                      \
1269                                                                           \
1270            declare_toplevel_type(Symbol)                                  \
1271            declare_toplevel_type(Symbol*)                                 \
1272   declare_toplevel_type(volatile Metadata*)                               \
1273                                                                           \
1274   declare_toplevel_type(DataLayout)                                       \
1275                                                                           \
1276   /********/                                                              \
1277   /* Oops */                                                              \
1278   /********/                                                              \
1279                                                                           \
1280   declare_oop_type(objArrayOop)                                           \
1281   declare_oop_type(oop)                                                   \
1282   declare_oop_type(narrowOop)                                             \
1283   declare_oop_type(typeArrayOop)                                          \
1284                                                                           \
1285   declare_toplevel_type(OopHandle)                                        \
1286                                                                           \
1287   /*************************************/                                 \
1288   /* MethodOop-related data structures */                                 \
1289   /*************************************/                                 \
1290                                                                           \
1291   declare_toplevel_type(CheckedExceptionElement)                          \
1292   declare_toplevel_type(LocalVariableTableElement)                        \
1293   declare_toplevel_type(ExceptionTableElement)                            \
1294   declare_toplevel_type(MethodParametersElement)                          \
1295                                                                           \
1296   declare_toplevel_type(ClassLoaderData)                                  \
1297   declare_toplevel_type(ClassLoaderDataGraph)                             \
1298                                                                           \
1299   /************************/                                              \
1300   /* PerfMemory - jvmstat */                                              \
1301   /************************/                                              \
1302                                                                           \
1303   declare_toplevel_type(PerfDataPrologue)                                 \
1304   declare_toplevel_type(PerfDataPrologue*)                                \
1305   declare_toplevel_type(PerfDataEntry)                                    \
1306   declare_toplevel_type(PerfMemory)                                       \
1307   declare_type(PerfData, CHeapObj&lt;mtInternal&gt;)                            \
1308                                                                           \
1309   /********************/                                                  \
1310   /* SystemDictionary */                                                  \
1311   /********************/                                                  \
1312                                                                           \
1313   declare_toplevel_type(BasicHashtable&lt;mtInternal&gt;)                       \
1314     declare_type(IntptrHashtable, BasicHashtable&lt;mtInternal&gt;)             \
1315   declare_toplevel_type(BasicHashtable&lt;mtSymbol&gt;)                         \
1316     declare_type(Dictionary, KlassHashtable)                              \
1317   declare_toplevel_type(BasicHashtableEntry&lt;mtInternal&gt;)                  \
1318   declare_type(IntptrHashtableEntry, BasicHashtableEntry&lt;mtInternal&gt;)     \
1319     declare_type(DictionaryEntry, KlassHashtableEntry)                    \
1320   declare_toplevel_type(HashtableBucket&lt;mtInternal&gt;)                      \
1321   declare_toplevel_type(SystemDictionary)                                 \
1322   declare_toplevel_type(vmSymbols)                                        \
1323                                                                           \
1324   declare_toplevel_type(GrowableArrayBase)                                \
1325   declare_toplevel_type(GrowableArray&lt;int&gt;)                               \
1326   declare_toplevel_type(Arena)                                            \
1327     declare_type(ResourceArea, Arena)                                     \
1328                                                                           \
1329   /***********************************************************/           \
1330   /* Thread hierarchy (needed for run-time type information) */           \
1331   /***********************************************************/           \
1332                                                                           \
1333   declare_toplevel_type(Threads)                                          \
1334   declare_toplevel_type(ThreadShadow)                                     \
1335     declare_type(Thread, ThreadShadow)                                    \
1336       declare_type(NonJavaThread, Thread)                                 \
1337         declare_type(NamedThread, NonJavaThread)                          \
1338         declare_type(WatcherThread, NonJavaThread)                        \
1339       declare_type(JavaThread, Thread)                                    \
1340         declare_type(JvmtiAgentThread, JavaThread)                        \
1341         declare_type(ServiceThread, JavaThread)                           \
1342         declare_type(NotificationThread, JavaThread)                      \
1343         declare_type(CompilerThread, JavaThread)                          \
1344         declare_type(CodeCacheSweeperThread, JavaThread)                  \
1345   declare_toplevel_type(OSThread)                                         \
1346   declare_toplevel_type(JavaFrameAnchor)                                  \
1347                                                                           \
1348   declare_toplevel_type(ThreadsSMRSupport)                                \
1349   declare_toplevel_type(ThreadsList)                                      \
1350                                                                           \
1351   /***************/                                                       \
1352   /* Interpreter */                                                       \
1353   /***************/                                                       \
1354                                                                           \
1355   declare_toplevel_type(AbstractInterpreter)                              \
1356                                                                           \
1357   /*********/                                                             \
1358   /* Stubs */                                                             \
1359   /*********/                                                             \
1360                                                                           \
1361   declare_toplevel_type(StubQueue)                                        \
1362   declare_toplevel_type(StubRoutines)                                     \
1363   declare_toplevel_type(Stub)                                             \
1364            declare_type(InterpreterCodelet, Stub)                         \
1365                                                                           \
1366   /*************/                                                         \
1367   /* JavaCalls */                                                         \
1368   /*************/                                                         \
1369                                                                           \
1370   declare_toplevel_type(JavaCallWrapper)                                  \
1371                                                                           \
1372   /*************/                                                         \
1373   /* CodeCache */                                                         \
1374   /*************/                                                         \
1375                                                                           \
1376   declare_toplevel_type(CodeCache)                                        \
1377                                                                           \
1378   /************/                                                          \
1379   /* CodeHeap */                                                          \
1380   /************/                                                          \
1381                                                                           \
1382   declare_toplevel_type(CodeHeap)                                         \
1383   declare_toplevel_type(CodeHeap*)                                        \
1384   declare_toplevel_type(HeapBlock)                                        \
1385   declare_toplevel_type(HeapBlock::Header)                                \
1386            declare_type(FreeBlock, HeapBlock)                             \
1387                                                                           \
1388   /*************************************************************/         \
1389   /* CodeBlob hierarchy (needed for run-time type information) */         \
1390   /*************************************************************/         \
1391                                                                           \
1392   declare_toplevel_type(SharedRuntime)                                    \
1393                                                                           \
1394   declare_toplevel_type(CodeBlob)                                         \
1395   declare_type(RuntimeBlob,              CodeBlob)                        \
1396   declare_type(BufferBlob,               RuntimeBlob)                     \
1397   declare_type(AdapterBlob,              BufferBlob)                      \
1398   declare_type(MethodHandlesAdapterBlob, BufferBlob)                      \
1399   declare_type(CompiledMethod,           CodeBlob)                        \
1400   declare_type(nmethod,                  CompiledMethod)                  \
1401   declare_type(RuntimeStub,              RuntimeBlob)                     \
1402   declare_type(SingletonBlob,            RuntimeBlob)                     \
1403   declare_type(SafepointBlob,            SingletonBlob)                   \
1404   declare_type(DeoptimizationBlob,       SingletonBlob)                   \
1405   declare_c2_type(ExceptionBlob,         SingletonBlob)                   \
1406   declare_c2_type(UncommonTrapBlob,      RuntimeBlob)                     \
1407                                                                           \
1408   /***************************************/                               \
1409   /* PcDesc and other compiled code info */                               \
1410   /***************************************/                               \
1411                                                                           \
1412   declare_toplevel_type(PcDesc)                                           \
1413   declare_toplevel_type(ExceptionCache)                                   \
1414   declare_toplevel_type(PcDescCache)                                      \
1415   declare_toplevel_type(Dependencies)                                     \
1416   declare_toplevel_type(CompileTask)                                      \
1417   declare_toplevel_type(Deoptimization)                                   \
1418   declare_toplevel_type(Deoptimization::UnrollBlock)                      \
1419                                                                           \
1420   /************************/                                              \
1421   /* ImmutableOopMap      */                                              \
1422   /************************/                                              \
1423                                                                           \
1424   declare_toplevel_type(ImmutableOopMapSet)                               \
1425   declare_toplevel_type(ImmutableOopMapPair)                              \
1426   declare_toplevel_type(ImmutableOopMap)                                  \
1427                                                                           \
1428   /********************/                                                  \
1429   /* CompressedStream */                                                  \
1430   /********************/                                                  \
1431                                                                           \
1432   declare_toplevel_type(CompressedStream)                                 \
1433                                                                           \
1434   /**************/                                                        \
1435   /* VMRegImpl  */                                                        \
1436   /**************/                                                        \
1437                                                                           \
1438   declare_toplevel_type(VMRegImpl)                                        \
1439                                                                           \
1440   /*********************************/                                     \
1441   /* JNIHandles and JNIHandleBlock */                                     \
1442   /*********************************/                                     \
1443                                                                           \
1444   declare_toplevel_type(JNIHandles)                                       \
1445   declare_toplevel_type(JNIHandleBlock)                                   \
1446   declare_toplevel_type(jobject)                                          \
1447                                                                           \
1448   /**************/                                                        \
1449   /* OopStorage */                                                        \
1450   /**************/                                                        \
1451                                                                           \
1452   declare_toplevel_type(OopStorage)                                       \
1453                                                                           \
1454   /**********************/                                                \
1455   /* Runtime1 (C1 only) */                                                \
1456   /**********************/                                                \
1457                                                                           \
1458   declare_c1_toplevel_type(Runtime1)                                      \
1459                                                                           \
1460   /************/                                                          \
1461   /* Monitors */                                                          \
1462   /************/                                                          \
1463                                                                           \
1464   declare_toplevel_type(ObjectMonitor)                                    \
1465   declare_toplevel_type(PaddedObjectMonitor)                              \
1466   declare_toplevel_type(ObjectSynchronizer)                               \
1467   declare_toplevel_type(BasicLock)                                        \
1468   declare_toplevel_type(BasicObjectLock)                                  \
1469                                                                           \
1470   /*********************/                                                 \
1471   /* Matcher (C2 only) */                                                 \
1472   /*********************/                                                 \
1473                                                                           \
1474   declare_c2_toplevel_type(Matcher)                                       \
1475   declare_c2_toplevel_type(Compile)                                       \
1476   declare_c2_toplevel_type(InlineTree)                                    \
1477   declare_c2_toplevel_type(OptoRegPair)                                   \
1478   declare_c2_toplevel_type(JVMState)                                      \
1479   declare_c2_toplevel_type(Phase)                                         \
1480     declare_c2_type(PhaseCFG, Phase)                                      \
1481     declare_c2_type(PhaseRegAlloc, Phase)                                 \
1482     declare_c2_type(PhaseChaitin, PhaseRegAlloc)                          \
1483   declare_c2_toplevel_type(CFGElement)                                    \
1484     declare_c2_type(Block, CFGElement)                                    \
1485   declare_c2_toplevel_type(Block_Array)                                   \
1486     declare_c2_type(Block_List, Block_Array)                              \
1487   declare_c2_toplevel_type(Node_Array)                                    \
1488   declare_c2_type(Node_List, Node_Array)                                  \
1489   declare_c2_type(Unique_Node_List, Node_List)                            \
1490   declare_c2_toplevel_type(Node)                                          \
1491   declare_c2_type(AddNode, Node)                                          \
1492   declare_c2_type(AddINode, AddNode)                                      \
1493   declare_c2_type(AddLNode, AddNode)                                      \
1494   declare_c2_type(AddFNode, AddNode)                                      \
1495   declare_c2_type(AddDNode, AddNode)                                      \
1496   declare_c2_type(AddPNode, Node)                                         \
1497   declare_c2_type(OrINode, AddNode)                                       \
1498   declare_c2_type(OrLNode, AddNode)                                       \
1499   declare_c2_type(XorINode, AddNode)                                      \
1500   declare_c2_type(XorLNode, AddNode)                                      \
1501   declare_c2_type(MaxNode, AddNode)                                       \
1502   declare_c2_type(MaxINode, MaxNode)                                      \
1503   declare_c2_type(MinINode, MaxNode)                                      \
1504   declare_c2_type(MaxFNode, MaxNode)                                      \
1505   declare_c2_type(MinFNode, MaxNode)                                      \
1506   declare_c2_type(MaxDNode, MaxNode)                                      \
1507   declare_c2_type(MinDNode, MaxNode)                                      \
1508   declare_c2_type(StartNode, MultiNode)                                   \
1509   declare_c2_type(StartOSRNode, StartNode)                                \
1510   declare_c2_type(ParmNode, ProjNode)                                     \
1511   declare_c2_type(ReturnNode, Node)                                       \
1512   declare_c2_type(RethrowNode, Node)                                      \
1513   declare_c2_type(TailCallNode, ReturnNode)                               \
1514   declare_c2_type(TailJumpNode, ReturnNode)                               \
1515   declare_c2_type(SafePointNode, MultiNode)                               \
1516   declare_c2_type(CallNode, SafePointNode)                                \
1517   declare_c2_type(CallJavaNode, CallNode)                                 \
1518   declare_c2_type(CallStaticJavaNode, CallJavaNode)                       \
1519   declare_c2_type(CallDynamicJavaNode, CallJavaNode)                      \
1520   declare_c2_type(CallRuntimeNode, CallNode)                              \
1521   declare_c2_type(CallLeafNode, CallRuntimeNode)                          \
1522   declare_c2_type(CallLeafNoFPNode, CallLeafNode)                         \
1523   declare_c2_type(AllocateNode, CallNode)                                 \
1524   declare_c2_type(AllocateArrayNode, AllocateNode)                        \
1525   declare_c2_type(LockNode, AbstractLockNode)                             \
1526   declare_c2_type(UnlockNode, AbstractLockNode)                           \
1527   declare_c2_type(FastLockNode, CmpNode)                                  \
1528   declare_c2_type(FastUnlockNode, CmpNode)                                \
1529   declare_c2_type(RegionNode, Node)                                       \
1530   declare_c2_type(JProjNode, ProjNode)                                    \
1531   declare_c2_type(PhiNode, TypeNode)                                      \
1532   declare_c2_type(GotoNode, Node)                                         \
1533   declare_c2_type(CProjNode, ProjNode)                                    \
1534   declare_c2_type(MultiBranchNode, MultiNode)                             \
1535   declare_c2_type(IfNode, MultiBranchNode)                                \
1536   declare_c2_type(IfTrueNode, CProjNode)                                  \
1537   declare_c2_type(IfFalseNode, CProjNode)                                 \
1538   declare_c2_type(PCTableNode, MultiBranchNode)                           \
1539   declare_c2_type(JumpNode, PCTableNode)                                  \
1540   declare_c2_type(JumpProjNode, JProjNode)                                \
1541   declare_c2_type(CatchNode, PCTableNode)                                 \
1542   declare_c2_type(CatchProjNode, CProjNode)                               \
1543   declare_c2_type(CreateExNode, TypeNode)                                 \
1544   declare_c2_type(ClearArrayNode, Node)                                   \
1545   declare_c2_type(NeverBranchNode, MultiBranchNode)                       \
1546   declare_c2_type(ConNode, TypeNode)                                      \
1547   declare_c2_type(ConINode, ConNode)                                      \
1548   declare_c2_type(ConPNode, ConNode)                                      \
1549   declare_c2_type(ConNNode, ConNode)                                      \
1550   declare_c2_type(ConLNode, ConNode)                                      \
1551   declare_c2_type(ConFNode, ConNode)                                      \
1552   declare_c2_type(ConDNode, ConNode)                                      \
1553   declare_c2_type(BinaryNode, Node)                                       \
1554   declare_c2_type(CMoveNode, TypeNode)                                    \
1555   declare_c2_type(CMoveDNode, CMoveNode)                                  \
1556   declare_c2_type(CMoveFNode, CMoveNode)                                  \
1557   declare_c2_type(CMoveINode, CMoveNode)                                  \
1558   declare_c2_type(CMoveLNode, CMoveNode)                                  \
1559   declare_c2_type(CMovePNode, CMoveNode)                                  \
1560   declare_c2_type(CMoveNNode, CMoveNode)                                  \
1561   declare_c2_type(EncodePNode, TypeNode)                                  \
1562   declare_c2_type(DecodeNNode, TypeNode)                                  \
1563   declare_c2_type(EncodePKlassNode, TypeNode)                             \
1564   declare_c2_type(DecodeNKlassNode, TypeNode)                             \
1565   declare_c2_type(ConstraintCastNode, TypeNode)                           \
1566   declare_c2_type(CastIINode, ConstraintCastNode)                         \
1567   declare_c2_type(CastPPNode, ConstraintCastNode)                         \
1568   declare_c2_type(CheckCastPPNode, TypeNode)                              \
1569   declare_c2_type(Conv2BNode, Node)                                       \
1570   declare_c2_type(ConvD2FNode, Node)                                      \
1571   declare_c2_type(ConvD2INode, Node)                                      \
1572   declare_c2_type(ConvD2LNode, Node)                                      \
1573   declare_c2_type(ConvF2DNode, Node)                                      \
1574   declare_c2_type(ConvF2INode, Node)                                      \
1575   declare_c2_type(ConvF2LNode, Node)                                      \
1576   declare_c2_type(ConvI2DNode, Node)                                      \
1577   declare_c2_type(ConvI2FNode, Node)                                      \
1578   declare_c2_type(ConvI2LNode, TypeNode)                                  \
1579   declare_c2_type(ConvL2DNode, Node)                                      \
1580   declare_c2_type(ConvL2FNode, Node)                                      \
1581   declare_c2_type(ConvL2INode, Node)                                      \
1582   declare_c2_type(CastX2PNode, Node)                                      \
1583   declare_c2_type(CastP2XNode, Node)                                      \
1584   declare_c2_type(SetVectMaskINode, Node)                                 \
1585   declare_c2_type(MemBarNode, MultiNode)                                  \
1586   declare_c2_type(MemBarAcquireNode, MemBarNode)                          \
1587   declare_c2_type(MemBarReleaseNode, MemBarNode)                          \
1588   declare_c2_type(LoadFenceNode, MemBarNode)                              \
1589   declare_c2_type(StoreFenceNode, MemBarNode)                             \
1590   declare_c2_type(MemBarVolatileNode, MemBarNode)                         \
1591   declare_c2_type(MemBarCPUOrderNode, MemBarNode)                         \
1592   declare_c2_type(OnSpinWaitNode, MemBarNode)                             \
1593   declare_c2_type(InitializeNode, MemBarNode)                             \
1594   declare_c2_type(ThreadLocalNode, Node)                                  \
1595   declare_c2_type(Opaque1Node, Node)                                      \
1596   declare_c2_type(Opaque2Node, Node)                                      \
1597   declare_c2_type(PartialSubtypeCheckNode, Node)                          \
1598   declare_c2_type(MoveI2FNode, Node)                                      \
1599   declare_c2_type(MoveL2DNode, Node)                                      \
1600   declare_c2_type(MoveF2INode, Node)                                      \
1601   declare_c2_type(MoveD2LNode, Node)                                      \
1602   declare_c2_type(DivINode, Node)                                         \
1603   declare_c2_type(DivLNode, Node)                                         \
1604   declare_c2_type(DivFNode, Node)                                         \
1605   declare_c2_type(DivDNode, Node)                                         \
1606   declare_c2_type(ModINode, Node)                                         \
1607   declare_c2_type(ModLNode, Node)                                         \
1608   declare_c2_type(ModFNode, Node)                                         \
1609   declare_c2_type(ModDNode, Node)                                         \
1610   declare_c2_type(DivModNode, MultiNode)                                  \
1611   declare_c2_type(DivModINode, DivModNode)                                \
1612   declare_c2_type(DivModLNode, DivModNode)                                \
1613   declare_c2_type(BoxLockNode, Node)                                      \
1614   declare_c2_type(LoopNode, RegionNode)                                   \
1615   declare_c2_type(CountedLoopNode, LoopNode)                              \
1616   declare_c2_type(CountedLoopEndNode, IfNode)                             \
1617   declare_c2_type(MachNode, Node)                                         \
1618   declare_c2_type(MachIdealNode, MachNode)                                \
1619   declare_c2_type(MachTypeNode, MachNode)                                 \
1620   declare_c2_type(MachBreakpointNode, MachIdealNode)                      \
1621   declare_c2_type(MachUEPNode, MachIdealNode)                             \
1622   declare_c2_type(MachPrologNode, MachIdealNode)                          \
1623   declare_c2_type(MachEpilogNode, MachIdealNode)                          \
1624   declare_c2_type(MachNopNode, MachIdealNode)                             \
1625   declare_c2_type(MachSpillCopyNode, MachIdealNode)                       \
1626   declare_c2_type(MachNullCheckNode, MachIdealNode)                       \
1627   declare_c2_type(MachProjNode, ProjNode)                                 \
1628   declare_c2_type(MachIfNode, MachNode)                                   \
1629   declare_c2_type(MachJumpNode, MachNode)                                 \
1630   declare_c2_type(MachFastLockNode, MachNode)                             \
1631   declare_c2_type(MachReturnNode, MachNode)                               \
1632   declare_c2_type(MachSafePointNode, MachReturnNode)                      \
1633   declare_c2_type(MachCallNode, MachSafePointNode)                        \
1634   declare_c2_type(MachCallJavaNode, MachCallNode)                         \
1635   declare_c2_type(MachCallStaticJavaNode, MachCallJavaNode)               \
1636   declare_c2_type(MachCallDynamicJavaNode, MachCallJavaNode)              \
1637   declare_c2_type(MachCallRuntimeNode, MachCallNode)                      \
1638   declare_c2_type(MachHaltNode, MachReturnNode)                           \
1639   declare_c2_type(MachTempNode, MachNode)                                 \
1640   declare_c2_type(MemNode, Node)                                          \
1641   declare_c2_type(MergeMemNode, Node)                                     \
1642   declare_c2_type(LoadNode, MemNode)                                      \
1643   declare_c2_type(LoadBNode, LoadNode)                                    \
1644   declare_c2_type(LoadUSNode, LoadNode)                                   \
1645   declare_c2_type(LoadINode, LoadNode)                                    \
1646   declare_c2_type(LoadRangeNode, LoadINode)                               \
1647   declare_c2_type(LoadLNode, LoadNode)                                    \
1648   declare_c2_type(LoadL_unalignedNode, LoadLNode)                         \
1649   declare_c2_type(LoadFNode, LoadNode)                                    \
1650   declare_c2_type(LoadDNode, LoadNode)                                    \
1651   declare_c2_type(LoadD_unalignedNode, LoadDNode)                         \
1652   declare_c2_type(LoadPNode, LoadNode)                                    \
1653   declare_c2_type(LoadNNode, LoadNode)                                    \
1654   declare_c2_type(LoadKlassNode, LoadPNode)                               \
1655   declare_c2_type(LoadNKlassNode, LoadNNode)                              \
1656   declare_c2_type(LoadSNode, LoadNode)                                    \
1657   declare_c2_type(StoreNode, MemNode)                                     \
1658   declare_c2_type(StoreBNode, StoreNode)                                  \
1659   declare_c2_type(StoreCNode, StoreNode)                                  \
1660   declare_c2_type(StoreINode, StoreNode)                                  \
1661   declare_c2_type(StoreLNode, StoreNode)                                  \
1662   declare_c2_type(StoreFNode, StoreNode)                                  \
1663   declare_c2_type(StoreDNode, StoreNode)                                  \
1664   declare_c2_type(StorePNode, StoreNode)                                  \
1665   declare_c2_type(StoreNNode, StoreNode)                                  \
1666   declare_c2_type(StoreNKlassNode, StoreNode)                             \
1667   declare_c2_type(StoreCMNode, StoreNode)                                 \
1668   declare_c2_type(LoadPLockedNode, LoadPNode)                             \
1669   declare_c2_type(SCMemProjNode, ProjNode)                                \
1670   declare_c2_type(LoadStoreNode, Node)                                    \
1671   declare_c2_type(StorePConditionalNode, LoadStoreNode)                   \
1672   declare_c2_type(StoreLConditionalNode, LoadStoreNode)                   \
1673   declare_c2_type(CompareAndSwapNode, LoadStoreConditionalNode)           \
1674   declare_c2_type(CompareAndSwapBNode, CompareAndSwapNode)                \
1675   declare_c2_type(CompareAndSwapSNode, CompareAndSwapNode)                \
1676   declare_c2_type(CompareAndSwapLNode, CompareAndSwapNode)                \
1677   declare_c2_type(CompareAndSwapINode, CompareAndSwapNode)                \
1678   declare_c2_type(CompareAndSwapPNode, CompareAndSwapNode)                \
1679   declare_c2_type(CompareAndSwapNNode, CompareAndSwapNode)                \
1680   declare_c2_type(WeakCompareAndSwapBNode, CompareAndSwapNode)            \
1681   declare_c2_type(WeakCompareAndSwapSNode, CompareAndSwapNode)            \
1682   declare_c2_type(WeakCompareAndSwapLNode, CompareAndSwapNode)            \
1683   declare_c2_type(WeakCompareAndSwapINode, CompareAndSwapNode)            \
1684   declare_c2_type(WeakCompareAndSwapPNode, CompareAndSwapNode)            \
1685   declare_c2_type(WeakCompareAndSwapNNode, CompareAndSwapNode)            \
1686   declare_c2_type(CompareAndExchangeNode, LoadStoreNode)                  \
1687   declare_c2_type(CompareAndExchangeBNode, CompareAndExchangeNode)        \
1688   declare_c2_type(CompareAndExchangeSNode, CompareAndExchangeNode)        \
1689   declare_c2_type(CompareAndExchangeLNode, CompareAndExchangeNode)        \
1690   declare_c2_type(CompareAndExchangeINode, CompareAndExchangeNode)        \
1691   declare_c2_type(CompareAndExchangePNode, CompareAndExchangeNode)        \
1692   declare_c2_type(CompareAndExchangeNNode, CompareAndExchangeNode)        \
1693   declare_c2_type(MulNode, Node)                                          \
1694   declare_c2_type(MulINode, MulNode)                                      \
1695   declare_c2_type(MulLNode, MulNode)                                      \
1696   declare_c2_type(MulFNode, MulNode)                                      \
1697   declare_c2_type(MulDNode, MulNode)                                      \
1698   declare_c2_type(MulHiLNode, Node)                                       \
1699   declare_c2_type(AndINode, MulINode)                                     \
1700   declare_c2_type(AndLNode, MulLNode)                                     \
1701   declare_c2_type(LShiftINode, Node)                                      \
1702   declare_c2_type(LShiftLNode, Node)                                      \
1703   declare_c2_type(RShiftINode, Node)                                      \
1704   declare_c2_type(RShiftLNode, Node)                                      \
1705   declare_c2_type(URShiftINode, Node)                                     \
1706   declare_c2_type(URShiftLNode, Node)                                     \
1707   declare_c2_type(MultiNode, Node)                                        \
1708   declare_c2_type(ProjNode, Node)                                         \
1709   declare_c2_type(TypeNode, Node)                                         \
1710   declare_c2_type(NodeHash, StackObj)                                     \
1711   declare_c2_type(RootNode, LoopNode)                                     \
1712   declare_c2_type(HaltNode, Node)                                         \
1713   declare_c2_type(SubNode, Node)                                          \
1714   declare_c2_type(SubINode, SubNode)                                      \
1715   declare_c2_type(SubLNode, SubNode)                                      \
1716   declare_c2_type(SubFPNode, SubNode)                                     \
1717   declare_c2_type(SubFNode, SubFPNode)                                    \
1718   declare_c2_type(SubDNode, SubFPNode)                                    \
1719   declare_c2_type(CmpNode, SubNode)                                       \
1720   declare_c2_type(CmpINode, CmpNode)                                      \
1721   declare_c2_type(CmpUNode, CmpNode)                                      \
1722   declare_c2_type(CmpPNode, CmpNode)                                      \
1723   declare_c2_type(CmpNNode, CmpNode)                                      \
1724   declare_c2_type(CmpLNode, CmpNode)                                      \
1725   declare_c2_type(CmpULNode, CmpNode)                                     \
1726   declare_c2_type(CmpL3Node, CmpLNode)                                    \
1727   declare_c2_type(CmpFNode, CmpNode)                                      \
1728   declare_c2_type(CmpF3Node, CmpFNode)                                    \
1729   declare_c2_type(CmpDNode, CmpNode)                                      \
1730   declare_c2_type(CmpD3Node, CmpDNode)                                    \
1731   declare_c2_type(BoolNode, Node)                                         \
1732   declare_c2_type(AbsNode, Node)                                          \
1733   declare_c2_type(AbsINode, AbsNode)                                      \
1734   declare_c2_type(AbsFNode, AbsNode)                                      \
1735   declare_c2_type(AbsDNode, AbsNode)                                      \
1736   declare_c2_type(CmpLTMaskNode, Node)                                    \
1737   declare_c2_type(NegNode, Node)                                          \
1738   declare_c2_type(NegFNode, NegNode)                                      \
1739   declare_c2_type(NegDNode, NegNode)                                      \
1740   declare_c2_type(AtanDNode, Node)                                        \
1741   declare_c2_type(SqrtFNode, Node)                                        \
1742   declare_c2_type(SqrtDNode, Node)                                        \
1743   declare_c2_type(ReverseBytesINode, Node)                                \
1744   declare_c2_type(ReverseBytesLNode, Node)                                \
1745   declare_c2_type(ReductionNode, Node)                                    \
1746   declare_c2_type(VectorNode, Node)                                       \
1747   declare_c2_type(AbsVBNode, VectorNode)                                   \
1748   declare_c2_type(AbsVSNode, VectorNode)                                   \
1749   declare_c2_type(AbsVINode, VectorNode)                                   \
1750   declare_c2_type(AbsVLNode, VectorNode)                                   \
1751   declare_c2_type(AddVBNode, VectorNode)                                  \
1752   declare_c2_type(AddVSNode, VectorNode)                                  \
1753   declare_c2_type(AddVINode, VectorNode)                                  \
1754   declare_c2_type(AddReductionVINode, ReductionNode)                      \
1755   declare_c2_type(AddVLNode, VectorNode)                                  \
1756   declare_c2_type(AddReductionVLNode, ReductionNode)                      \
1757   declare_c2_type(AddVFNode, VectorNode)                                  \
1758   declare_c2_type(AddReductionVFNode, ReductionNode)                      \
1759   declare_c2_type(AddVDNode, VectorNode)                                  \
1760   declare_c2_type(AddReductionVDNode, ReductionNode)                      \
1761   declare_c2_type(SubVBNode, VectorNode)                                  \
1762   declare_c2_type(SubVSNode, VectorNode)                                  \
1763   declare_c2_type(SubVINode, VectorNode)                                  \
1764   declare_c2_type(SubVLNode, VectorNode)                                  \
1765   declare_c2_type(SubVFNode, VectorNode)                                  \
1766   declare_c2_type(SubVDNode, VectorNode)                                  \
1767   declare_c2_type(MulVBNode, VectorNode)                                  \
1768   declare_c2_type(MulVSNode, VectorNode)                                  \
1769   declare_c2_type(MulVLNode, VectorNode)                                  \
1770   declare_c2_type(MulReductionVLNode, ReductionNode)                      \
1771   declare_c2_type(MulVINode, VectorNode)                                  \
1772   declare_c2_type(MulReductionVINode, ReductionNode)                      \
1773   declare_c2_type(MulVFNode, VectorNode)                                  \
1774   declare_c2_type(MulReductionVFNode, ReductionNode)                      \
1775   declare_c2_type(MulVDNode, VectorNode)                                  \
1776   declare_c2_type(NegVFNode, VectorNode)                                  \
1777   declare_c2_type(NegVDNode, VectorNode)                                  \
1778   declare_c2_type(FmaVDNode, VectorNode)                                  \
1779   declare_c2_type(FmaVFNode, VectorNode)                                  \
1780   declare_c2_type(CMoveVFNode, VectorNode)                                \
1781   declare_c2_type(CMoveVDNode, VectorNode)                                \
1782   declare_c2_type(MulReductionVDNode, ReductionNode)                      \
1783   declare_c2_type(DivVFNode, VectorNode)                                  \
1784   declare_c2_type(DivVDNode, VectorNode)                                  \
1785   declare_c2_type(PopCountVINode, VectorNode)                             \
1786   declare_c2_type(LShiftVBNode, VectorNode)                               \
1787   declare_c2_type(LShiftVSNode, VectorNode)                               \
1788   declare_c2_type(LShiftVINode, VectorNode)                               \
1789   declare_c2_type(LShiftVLNode, VectorNode)                               \
1790   declare_c2_type(RShiftVBNode, VectorNode)                               \
1791   declare_c2_type(RShiftVSNode, VectorNode)                               \
1792   declare_c2_type(RShiftVINode, VectorNode)                               \
1793   declare_c2_type(RShiftVLNode, VectorNode)                               \
1794   declare_c2_type(URShiftVBNode, VectorNode)                              \
1795   declare_c2_type(URShiftVSNode, VectorNode)                              \
1796   declare_c2_type(URShiftVINode, VectorNode)                              \
1797   declare_c2_type(URShiftVLNode, VectorNode)                              \
1798   declare_c2_type(AndVNode, VectorNode)                                   \
1799   declare_c2_type(AndReductionVNode, ReductionNode)                       \
1800   declare_c2_type(OrVNode, VectorNode)                                    \
1801   declare_c2_type(OrReductionVNode, ReductionNode)                        \
1802   declare_c2_type(XorVNode, VectorNode)                                   \
1803   declare_c2_type(XorReductionVNode, ReductionNode)                       \
1804   declare_c2_type(MaxVNode, VectorNode)                                   \
1805   declare_c2_type(MinVNode, VectorNode)                                   \
1806   declare_c2_type(MaxReductionVNode, ReductionNode)                       \
1807   declare_c2_type(MinReductionVNode, ReductionNode)                       \
1808   declare_c2_type(LoadVectorNode, LoadNode)                               \
1809   declare_c2_type(StoreVectorNode, StoreNode)                             \
1810   declare_c2_type(ReplicateBNode, VectorNode)                             \
1811   declare_c2_type(ReplicateSNode, VectorNode)                             \
1812   declare_c2_type(ReplicateINode, VectorNode)                             \
1813   declare_c2_type(ReplicateLNode, VectorNode)                             \
1814   declare_c2_type(ReplicateFNode, VectorNode)                             \
1815   declare_c2_type(ReplicateDNode, VectorNode)                             \
1816   declare_c2_type(PackNode, VectorNode)                                   \
1817   declare_c2_type(PackBNode, PackNode)                                    \
1818   declare_c2_type(PackSNode, PackNode)                                    \
1819   declare_c2_type(PackINode, PackNode)                                    \
1820   declare_c2_type(PackLNode, PackNode)                                    \
1821   declare_c2_type(PackFNode, PackNode)                                    \
1822   declare_c2_type(PackDNode, PackNode)                                    \
1823   declare_c2_type(Pack2LNode, PackNode)                                   \
1824   declare_c2_type(Pack2DNode, PackNode)                                   \
1825   declare_c2_type(ExtractNode, Node)                                      \
1826   declare_c2_type(ExtractBNode, ExtractNode)                              \
1827   declare_c2_type(ExtractUBNode, ExtractNode)                             \
1828   declare_c2_type(ExtractCNode, ExtractNode)                              \
1829   declare_c2_type(ExtractSNode, ExtractNode)                              \
1830   declare_c2_type(ExtractINode, ExtractNode)                              \
1831   declare_c2_type(ExtractLNode, ExtractNode)                              \
1832   declare_c2_type(ExtractFNode, ExtractNode)                              \
1833   declare_c2_type(ExtractDNode, ExtractNode)                              \
1834   declare_c2_type(OverflowNode, CmpNode)                                  \
1835   declare_c2_type(OverflowINode, OverflowNode)                            \
1836   declare_c2_type(OverflowAddINode, OverflowINode)                        \
1837   declare_c2_type(OverflowSubINode, OverflowINode)                        \
1838   declare_c2_type(OverflowMulINode, OverflowINode)                        \
1839   declare_c2_type(OverflowLNode, OverflowNode)                            \
1840   declare_c2_type(OverflowAddLNode, OverflowLNode)                        \
1841   declare_c2_type(OverflowSubLNode, OverflowLNode)                        \
1842   declare_c2_type(OverflowMulLNode, OverflowLNode)                        \
1843   declare_c2_type(FmaDNode, Node)                                         \
1844   declare_c2_type(FmaFNode, Node)                                         \
1845                                                                           \
1846   /*********************/                                                 \
1847   /* Adapter Blob Entries */                                              \
1848   /*********************/                                                 \
1849   declare_toplevel_type(AdapterHandlerEntry)                              \
1850   declare_toplevel_type(AdapterHandlerEntry*)                             \
1851                                                                           \
1852   /*********************/                                                 \
1853   /* CI */                                                                \
1854   /*********************/                                                 \
1855   declare_toplevel_type(ciEnv)                                            \
1856   declare_toplevel_type(ciObjectFactory)                                  \
1857   declare_toplevel_type(ciConstant)                                       \
1858   declare_toplevel_type(ciField)                                          \
1859   declare_toplevel_type(ciSymbol)                                         \
1860   declare_toplevel_type(ciBaseObject)                                     \
1861   declare_type(ciObject, ciBaseObject)                                    \
1862   declare_type(ciInstance, ciObject)                                      \
1863   declare_type(ciMetadata, ciBaseObject)                                  \
1864   declare_type(ciMethod, ciMetadata)                                      \
1865   declare_type(ciMethodData, ciMetadata)                                  \
1866   declare_type(ciType, ciMetadata)                                        \
1867   declare_type(ciKlass, ciType)                                           \
1868   declare_type(ciInstanceKlass, ciKlass)                                  \
1869   declare_type(ciArrayKlass, ciKlass)                                     \
1870   declare_type(ciTypeArrayKlass, ciArrayKlass)                            \
1871   declare_type(ciObjArrayKlass, ciArrayKlass)                             \
1872                                                                           \
1873   /********************/                                                  \
1874   /* -XX flags        */                                                  \
1875   /********************/                                                  \
1876                                                                           \
1877   declare_toplevel_type(JVMFlag)                                          \
1878   declare_toplevel_type(JVMFlag*)                                         \
1879                                                                           \
1880   /********************/                                                  \
1881   /* JVMTI            */                                                  \
1882   /********************/                                                  \
1883                                                                           \
1884   declare_toplevel_type(JvmtiExport)                                      \
1885                                                                           \
1886   /********************/                                                  \
1887   /* JDK/VM version   */                                                  \
1888   /********************/                                                  \
1889                                                                           \
1890   declare_toplevel_type(Abstract_VM_Version)                              \
1891   declare_toplevel_type(JDK_Version)                                      \
1892                                                                           \
1893   /*************/                                                         \
1894   /* Arguments */                                                         \
1895   /*************/                                                         \
1896                                                                           \
1897   declare_toplevel_type(Arguments)                                        \
1898                                                                           \
1899   /***********/                                                           \
1900   /* VMError */                                                           \
1901   /***********/                                                           \
1902                                                                           \
1903   declare_toplevel_type(VMError)                                          \
1904                                                                           \
1905   /***************/                                                       \
1906   /* Other types */                                                       \
1907   /***************/                                                       \
1908                                                                           \
1909   /* all enum types */                                                    \
1910                                                                           \
1911    declare_integer_type(Bytecodes::Code)                                  \
1912    declare_integer_type(Generation::Name)                                 \
1913    declare_integer_type(InstanceKlass::ClassState)                        \
1914    declare_integer_type(JavaThreadState)                                  \
1915    declare_integer_type(ThreadState)                                      \
1916    declare_integer_type(Location::Type)                                   \
1917    declare_integer_type(Location::Where)                                  \
1918    declare_integer_type(JVMFlag::Flags)                                   \
1919    COMPILER2_PRESENT(declare_integer_type(OptoReg::Name))                 \
1920                                                                           \
1921    declare_toplevel_type(CHeapObj&lt;mtInternal&gt;)                            \
1922             declare_type(Array&lt;int&gt;, MetaspaceObj)                        \
1923             declare_type(Array&lt;u1&gt;, MetaspaceObj)                         \
1924             declare_type(Array&lt;u2&gt;, MetaspaceObj)                         \
1925             declare_type(Array&lt;Klass*&gt;, MetaspaceObj)                     \
1926             declare_type(Array&lt;Method*&gt;, MetaspaceObj)                    \
1927                                                                           \
1928    declare_toplevel_type(BitMap)                                          \
1929             declare_type(BitMapView, BitMap)                              \
1930                                                                           \
1931   declare_integer_type(markWord)                                          \
1932   declare_integer_type(AccessFlags)  /* FIXME: wrong type (not integer) */\
1933   declare_toplevel_type(address)      /* FIXME: should this be an integer type? */\
1934   declare_integer_type(BasicType)   /* FIXME: wrong type (not integer) */ \
1935   declare_toplevel_type(BreakpointInfo)                                   \
1936   declare_toplevel_type(BreakpointInfo*)                                  \
1937   declare_toplevel_type(CodeBlob*)                                        \
1938   declare_toplevel_type(RuntimeBlob*)                                     \
1939   declare_toplevel_type(CompressedWriteStream*)                           \
1940   declare_toplevel_type(ConstantPoolCacheEntry)                           \
1941   declare_toplevel_type(elapsedTimer)                                     \
1942   declare_toplevel_type(frame)                                            \
1943   declare_toplevel_type(intptr_t*)                                        \
1944    declare_unsigned_integer_type(InvocationCounter) /* FIXME: wrong type (not integer) */ \
1945   declare_toplevel_type(JavaThread*)                                      \
1946   declare_toplevel_type(JavaThread *const *const)                         \
1947   declare_toplevel_type(java_lang_Class)                                  \
1948   declare_integer_type(JavaThread::AsyncRequests)                         \
1949   declare_integer_type(JavaThread::TerminatedTypes)                       \
1950   declare_toplevel_type(jbyte*)                                           \
1951   declare_toplevel_type(jbyte**)                                          \
1952   declare_toplevel_type(jint*)                                            \
1953   declare_toplevel_type(jniIdMapBase*)                                    \
1954   declare_unsigned_integer_type(juint)                                    \
1955   declare_unsigned_integer_type(julong)                                   \
1956   declare_toplevel_type(JNIHandleBlock*)                                  \
1957   declare_toplevel_type(JNIid)                                            \
1958   declare_toplevel_type(JNIid*)                                           \
1959   declare_toplevel_type(jmethodID*)                                       \
1960   declare_toplevel_type(Mutex*)                                           \
1961   declare_toplevel_type(nmethod*)                                         \
1962   COMPILER2_PRESENT(declare_unsigned_integer_type(node_idx_t))            \
1963   declare_toplevel_type(ObjectMonitor*)                                   \
1964   declare_toplevel_type(PaddedObjectMonitor*)                             \
1965   declare_toplevel_type(oop*)                                             \
1966   declare_toplevel_type(OopMapCache*)                                     \
1967   declare_toplevel_type(VMReg)                                            \
1968   declare_toplevel_type(OSThread*)                                        \
1969    declare_integer_type(ReferenceType)                                    \
1970   declare_toplevel_type(StubQueue*)                                       \
1971   declare_toplevel_type(Thread*)                                          \
1972   declare_toplevel_type(Universe)                                         \
1973   declare_toplevel_type(CompressedOops)                                   \
1974   declare_toplevel_type(CompressedKlassPointers)                          \
1975   declare_toplevel_type(os)                                               \
1976   declare_toplevel_type(vframeArray)                                      \
1977   declare_toplevel_type(vframeArrayElement)                               \
1978   declare_toplevel_type(Annotations*)                                     \
1979   declare_type(OopMapValue, StackObj)                                     \
1980   declare_type(FileMapInfo, CHeapObj&lt;mtInternal&gt;)                         \
1981   declare_toplevel_type(FileMapHeader)                                    \
1982   declare_toplevel_type(CDSFileMapRegion)                                 \
1983                                                                           \
1984   /************/                                                          \
1985   /* GC types */                                                          \
1986   /************/                                                          \
1987                                                                           \
1988   VM_TYPES_GC(declare_type,                                               \
1989               declare_toplevel_type,                                      \
1990               declare_integer_type)
1991 
1992 //--------------------------------------------------------------------------------
1993 // VM_INT_CONSTANTS
1994 //
1995 // This table contains integer constants required over in the
1996 // serviceability agent. The "declare_constant" macro is used for all
1997 // enums, etc., while "declare_preprocessor_constant" must be used for
1998 // all #defined constants.
1999 
2000 #define VM_INT_CONSTANTS(declare_constant,                                \
2001                          declare_constant_with_value,                     \
2002                          declare_preprocessor_constant,                   \
2003                          declare_c1_constant,                             \
2004                          declare_c2_constant,                             \
2005                          declare_c2_preprocessor_constant)                \
2006                                                                           \
2007   /****************/                                                      \
2008   /* GC constants */                                                      \
2009   /****************/                                                      \
2010                                                                           \
2011   VM_INT_CONSTANTS_GC(declare_constant,                                   \
2012                       declare_constant_with_value)                        \
2013                                                                           \
2014   /******************/                                                    \
2015   /* Useful globals */                                                    \
2016   /******************/                                                    \
2017                                                                           \
2018   declare_preprocessor_constant("ASSERT", DEBUG_ONLY(1) NOT_DEBUG(0))     \
2019                                                                           \
2020   /****************/                                                      \
2021   /* Object sizes */                                                      \
2022   /****************/                                                      \
2023                                                                           \
2024   declare_constant(oopSize)                                               \
2025   declare_constant(LogBytesPerWord)                                       \
2026   declare_constant(BytesPerWord)                                          \
2027   declare_constant(BytesPerLong)                                          \
2028                                                                           \
2029   declare_constant(LogKlassAlignmentInBytes)                              \
2030                                                                           \
2031   declare_constant(HeapWordSize)                                          \
2032   declare_constant(LogHeapWordSize)                                       \
2033                                                                           \
2034                                                                           \
2035   /************************/                                              \
2036   /* PerfMemory - jvmstat */                                              \
2037   /************************/                                              \
2038                                                                           \
2039   declare_preprocessor_constant("PERFDATA_MAJOR_VERSION", PERFDATA_MAJOR_VERSION) \
2040   declare_preprocessor_constant("PERFDATA_MINOR_VERSION", PERFDATA_MINOR_VERSION) \
2041   declare_preprocessor_constant("PERFDATA_BIG_ENDIAN", PERFDATA_BIG_ENDIAN)       \
2042   declare_preprocessor_constant("PERFDATA_LITTLE_ENDIAN", PERFDATA_LITTLE_ENDIAN) \
2043                                                                           \
2044                                                                           \
2045   /************************************************************/          \
2046   /* HotSpot specific JVM_ACC constants from global anon enum */          \
2047   /************************************************************/          \
2048                                                                           \
2049   declare_constant(JVM_ACC_WRITTEN_FLAGS)                                 \
2050   declare_constant(JVM_ACC_MONITOR_MATCH)                                 \
2051   declare_constant(JVM_ACC_HAS_MONITOR_BYTECODES)                         \
2052   declare_constant(JVM_ACC_HAS_LOOPS)                                     \
2053   declare_constant(JVM_ACC_LOOPS_FLAG_INIT)                               \
2054   declare_constant(JVM_ACC_QUEUED)                                        \
2055   declare_constant(JVM_ACC_NOT_C2_OSR_COMPILABLE)                         \
2056   declare_constant(JVM_ACC_HAS_LINE_NUMBER_TABLE)                         \
2057   declare_constant(JVM_ACC_HAS_CHECKED_EXCEPTIONS)                        \
2058   declare_constant(JVM_ACC_HAS_JSRS)                                      \
2059   declare_constant(JVM_ACC_IS_OLD)                                        \
2060   declare_constant(JVM_ACC_IS_OBSOLETE)                                   \
2061   declare_constant(JVM_ACC_IS_PREFIXED_NATIVE)                            \
2062   declare_constant(JVM_ACC_HAS_MIRANDA_METHODS)                           \
2063   declare_constant(JVM_ACC_HAS_VANILLA_CONSTRUCTOR)                       \
2064   declare_constant(JVM_ACC_HAS_FINALIZER)                                 \
2065   declare_constant(JVM_ACC_IS_CLONEABLE_FAST)                             \
2066   declare_constant(JVM_ACC_HAS_LOCAL_VARIABLE_TABLE)                      \
2067   declare_constant(JVM_ACC_PROMOTED_FLAGS)                                \
2068   declare_constant(JVM_ACC_FIELD_ACCESS_WATCHED)                          \
2069   declare_constant(JVM_ACC_FIELD_MODIFICATION_WATCHED)                    \
2070   declare_constant(JVM_ACC_FIELD_INTERNAL)                                \
2071   declare_constant(JVM_ACC_FIELD_STABLE)                                  \
2072   declare_constant(JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE)                   \
2073                                                                           \
2074   declare_constant(JVM_CONSTANT_Utf8)                                     \
2075   declare_constant(JVM_CONSTANT_Unicode)                                  \
2076   declare_constant(JVM_CONSTANT_Integer)                                  \
2077   declare_constant(JVM_CONSTANT_Float)                                    \
2078   declare_constant(JVM_CONSTANT_Long)                                     \
2079   declare_constant(JVM_CONSTANT_Double)                                   \
2080   declare_constant(JVM_CONSTANT_Class)                                    \
2081   declare_constant(JVM_CONSTANT_String)                                   \
2082   declare_constant(JVM_CONSTANT_Fieldref)                                 \
2083   declare_constant(JVM_CONSTANT_Methodref)                                \
2084   declare_constant(JVM_CONSTANT_InterfaceMethodref)                       \
2085   declare_constant(JVM_CONSTANT_NameAndType)                              \
2086   declare_constant(JVM_CONSTANT_MethodHandle)                             \
2087   declare_constant(JVM_CONSTANT_MethodType)                               \
2088   declare_constant(JVM_CONSTANT_Dynamic)                                  \
2089   declare_constant(JVM_CONSTANT_InvokeDynamic)                            \
2090   declare_constant(JVM_CONSTANT_Module)                                   \
2091   declare_constant(JVM_CONSTANT_Package)                                  \
2092   declare_constant(JVM_CONSTANT_ExternalMax)                              \
2093                                                                           \
2094   declare_constant(JVM_CONSTANT_Invalid)                                  \
2095   declare_constant(JVM_CONSTANT_InternalMin)                              \
2096   declare_constant(JVM_CONSTANT_UnresolvedClass)                          \
2097   declare_constant(JVM_CONSTANT_ClassIndex)                               \
2098   declare_constant(JVM_CONSTANT_StringIndex)                              \
2099   declare_constant(JVM_CONSTANT_UnresolvedClassInError)                   \
2100   declare_constant(JVM_CONSTANT_MethodHandleInError)                      \
2101   declare_constant(JVM_CONSTANT_MethodTypeInError)                        \
2102   declare_constant(JVM_CONSTANT_DynamicInError)                           \
2103   declare_constant(JVM_CONSTANT_InternalMax)                              \
2104                                                                           \
2105   /*****************************/                                         \
2106   /* Thread::SuspendFlags enum */                                         \
2107   /*****************************/                                         \
2108                                                                           \
2109   declare_constant(Thread::_external_suspend)                             \
2110   declare_constant(Thread::_ext_suspended)                                \
2111   declare_constant(Thread::_has_async_exception)                          \
2112                                                                           \
2113   /*******************/                                                   \
2114   /* JavaThreadState */                                                   \
2115   /*******************/                                                   \
2116                                                                           \
2117   declare_constant(_thread_uninitialized)                                 \
2118   declare_constant(_thread_new)                                           \
2119   declare_constant(_thread_new_trans)                                     \
2120   declare_constant(_thread_in_native)                                     \
2121   declare_constant(_thread_in_native_trans)                               \
2122   declare_constant(_thread_in_vm)                                         \
2123   declare_constant(_thread_in_vm_trans)                                   \
2124   declare_constant(_thread_in_Java)                                       \
2125   declare_constant(_thread_in_Java_trans)                                 \
2126   declare_constant(_thread_blocked)                                       \
2127   declare_constant(_thread_blocked_trans)                                 \
2128   declare_constant(JavaThread::_not_terminated)                           \
2129   declare_constant(JavaThread::_thread_exiting)                           \
2130                                                                           \
2131   /*******************/                                                   \
2132   /* JavaThreadState */                                                   \
2133   /*******************/                                                   \
2134                                                                           \
2135   declare_constant(ALLOCATED)                                             \
2136   declare_constant(INITIALIZED)                                           \
2137   declare_constant(RUNNABLE)                                              \
2138   declare_constant(MONITOR_WAIT)                                          \
2139   declare_constant(CONDVAR_WAIT)                                          \
2140   declare_constant(OBJECT_WAIT)                                           \
2141   declare_constant(BREAKPOINTED)                                          \
2142   declare_constant(SLEEPING)                                              \
2143   declare_constant(ZOMBIE)                                                \
2144                                                                           \
2145   /******************************/                                        \
2146   /* Klass misc. enum constants */                                        \
2147   /******************************/                                        \
2148                                                                           \
2149   declare_constant(Klass::_primary_super_limit)                           \
2150   declare_constant(Klass::_lh_neutral_value)                              \
2151   declare_constant(Klass::_lh_instance_slow_path_bit)                     \
2152   declare_constant(Klass::_lh_log2_element_size_shift)                    \
2153   declare_constant(Klass::_lh_log2_element_size_mask)                     \
2154   declare_constant(Klass::_lh_element_type_shift)                         \
2155   declare_constant(Klass::_lh_element_type_mask)                          \
2156   declare_constant(Klass::_lh_header_size_shift)                          \
2157   declare_constant(Klass::_lh_header_size_mask)                           \
2158   declare_constant(Klass::_lh_array_tag_shift)                            \
2159   declare_constant(Klass::_lh_array_tag_type_value)                       \
2160   declare_constant(Klass::_lh_array_tag_obj_value)                        \
2161                                                                           \
2162   /********************************/                                      \
2163   /* ConstMethod anon-enum */                                             \
2164   /********************************/                                      \
2165                                                                           \
2166   declare_constant(Method::_caller_sensitive)                             \
2167   declare_constant(Method::_force_inline)                                 \
2168   declare_constant(Method::_dont_inline)                                  \
2169   declare_constant(Method::_hidden)                                       \
2170                                                                           \
2171   declare_constant(Method::nonvirtual_vtable_index)                       \
2172                                                                           \
2173   declare_constant(Method::extra_stack_entries_for_jsr292)                \
2174                                                                           \
2175   declare_constant(ConstMethod::_has_linenumber_table)                    \
2176   declare_constant(ConstMethod::_has_checked_exceptions)                  \
2177   declare_constant(ConstMethod::_has_localvariable_table)                 \
2178   declare_constant(ConstMethod::_has_exception_table)                     \
2179   declare_constant(ConstMethod::_has_generic_signature)                   \
2180   declare_constant(ConstMethod::_has_method_parameters)                   \
2181   declare_constant(ConstMethod::_has_method_annotations)                  \
2182   declare_constant(ConstMethod::_has_parameter_annotations)               \
2183   declare_constant(ConstMethod::_has_default_annotations)                 \
2184   declare_constant(ConstMethod::_has_type_annotations)                    \
2185                                                                           \
2186   /**************/                                                        \
2187   /* DataLayout */                                                        \
2188   /**************/                                                        \
2189                                                                           \
2190   declare_constant(DataLayout::cell_size)                                 \
2191   declare_constant(DataLayout::no_tag)                                    \
2192   declare_constant(DataLayout::bit_data_tag)                              \
2193   declare_constant(DataLayout::counter_data_tag)                          \
2194   declare_constant(DataLayout::jump_data_tag)                             \
2195   declare_constant(DataLayout::receiver_type_data_tag)                    \
2196   declare_constant(DataLayout::virtual_call_data_tag)                     \
2197   declare_constant(DataLayout::ret_data_tag)                              \
2198   declare_constant(DataLayout::branch_data_tag)                           \
2199   declare_constant(DataLayout::multi_branch_data_tag)                     \
2200   declare_constant(DataLayout::arg_info_data_tag)                         \
2201   declare_constant(DataLayout::call_type_data_tag)                        \
2202   declare_constant(DataLayout::virtual_call_type_data_tag)                \
2203   declare_constant(DataLayout::parameters_type_data_tag)                  \
2204   declare_constant(DataLayout::speculative_trap_data_tag)                 \
2205                                                                           \
2206   /*************************************/                                 \
2207   /* InstanceKlass enum                */                                 \
2208   /*************************************/                                 \
2209                                                                           \
2210                                                                           \
2211   /*************************************/                                 \
2212   /* FieldInfo FieldOffset enum        */                                 \
2213   /*************************************/                                 \
2214                                                                           \
2215   declare_constant(FieldInfo::access_flags_offset)                        \
2216   declare_constant(FieldInfo::name_index_offset)                          \
2217   declare_constant(FieldInfo::signature_index_offset)                     \
2218   declare_constant(FieldInfo::initval_index_offset)                       \
2219   declare_constant(FieldInfo::low_packed_offset)                          \
2220   declare_constant(FieldInfo::high_packed_offset)                         \
2221   declare_constant(FieldInfo::field_slots)                                \
2222                                                                           \
2223   /*************************************/                                 \
2224   /* FieldInfo tag constants           */                                 \
2225   /*************************************/                                 \
2226                                                                           \
2227   declare_preprocessor_constant("FIELDINFO_TAG_SIZE", FIELDINFO_TAG_SIZE) \
2228   declare_preprocessor_constant("FIELDINFO_TAG_MASK", FIELDINFO_TAG_MASK) \
2229   declare_preprocessor_constant("FIELDINFO_TAG_OFFSET", FIELDINFO_TAG_OFFSET) \
2230                                                                           \
2231   /************************************************/                      \
2232   /* InstanceKlass InnerClassAttributeOffset enum */                      \
2233   /************************************************/                      \
2234                                                                           \
2235   declare_constant(InstanceKlass::inner_class_inner_class_info_offset)    \
2236   declare_constant(InstanceKlass::inner_class_outer_class_info_offset)    \
2237   declare_constant(InstanceKlass::inner_class_inner_name_offset)          \
2238   declare_constant(InstanceKlass::inner_class_access_flags_offset)        \
2239   declare_constant(InstanceKlass::inner_class_next_offset)                \
2240                                                                           \
2241   /*****************************************************/                 \
2242   /* InstanceKlass EnclosingMethodAttributeOffset enum */                 \
2243   /*****************************************************/                 \
2244                                                                           \
2245   declare_constant(InstanceKlass::enclosing_method_attribute_size)        \
2246                                                                           \
2247   /*********************************/                                     \
2248   /* InstanceKlass ClassState enum */                                     \
2249   /*********************************/                                     \
2250                                                                           \
2251   declare_constant(InstanceKlass::allocated)                              \
2252   declare_constant(InstanceKlass::loaded)                                 \
2253   declare_constant(InstanceKlass::linked)                                 \
2254   declare_constant(InstanceKlass::being_initialized)                      \
2255   declare_constant(InstanceKlass::fully_initialized)                      \
2256   declare_constant(InstanceKlass::initialization_error)                   \
2257                                                                           \
2258   /***************************************/                               \
2259   /* InstanceKlass enums for _misc_flags */                               \
2260   /***************************************/                               \
2261                                                                           \
2262   declare_constant(InstanceKlass::_misc_rewritten)                        \
2263   declare_constant(InstanceKlass::_misc_has_nonstatic_fields)             \
2264   declare_constant(InstanceKlass::_misc_should_verify_class)              \
2265   declare_constant(InstanceKlass::_misc_is_unsafe_anonymous)              \
2266   declare_constant(InstanceKlass::_misc_is_contended)                     \
2267   declare_constant(InstanceKlass::_misc_has_nonstatic_concrete_methods)   \
2268   declare_constant(InstanceKlass::_misc_declares_nonstatic_concrete_methods)\
2269   declare_constant(InstanceKlass::_misc_has_been_redefined)               \
2270   declare_constant(InstanceKlass::_misc_has_passed_fingerprint_check)     \
2271   declare_constant(InstanceKlass::_misc_is_scratch_class)                 \
2272   declare_constant(InstanceKlass::_misc_is_shared_boot_class)             \
2273   declare_constant(InstanceKlass::_misc_is_shared_platform_class)         \
2274   declare_constant(InstanceKlass::_misc_is_shared_app_class)              \
2275                                                                           \
2276   /*********************************/                                     \
2277   /* Symbol* - symbol max length */                                       \
2278   /*********************************/                                     \
2279                                                                           \
2280   declare_constant(Symbol::max_symbol_length)                             \
2281                                                                           \
2282   /***********************************************/                       \
2283   /* ConstantPool* layout enum for InvokeDynamic */                       \
2284   /***********************************************/                       \
2285                                                                           \
2286   declare_constant(ConstantPool::_indy_bsm_offset)                        \
2287   declare_constant(ConstantPool::_indy_argc_offset)                       \
2288   declare_constant(ConstantPool::_indy_argv_offset)                       \
2289   declare_constant(ConstantPool::CPCACHE_INDEX_TAG)                       \
2290                                                                           \
2291   /********************************/                                      \
2292   /* ConstantPoolCacheEntry enums */                                      \
2293   /********************************/                                      \
2294                                                                           \
2295   declare_constant(ConstantPoolCacheEntry::is_volatile_shift)             \
2296   declare_constant(ConstantPoolCacheEntry::is_final_shift)                \
2297   declare_constant(ConstantPoolCacheEntry::is_forced_virtual_shift)       \
2298   declare_constant(ConstantPoolCacheEntry::is_vfinal_shift)               \
2299   declare_constant(ConstantPoolCacheEntry::is_field_entry_shift)          \
2300   declare_constant(ConstantPoolCacheEntry::tos_state_shift)               \
2301                                                                           \
2302   /***************************************/                               \
2303   /* java_lang_Thread::ThreadStatus enum */                               \
2304   /***************************************/                               \
2305                                                                           \
2306   declare_constant(java_lang_Thread::NEW)                                 \
2307   declare_constant(java_lang_Thread::RUNNABLE)                            \
2308   declare_constant(java_lang_Thread::SLEEPING)                            \
2309   declare_constant(java_lang_Thread::IN_OBJECT_WAIT)                      \
2310   declare_constant(java_lang_Thread::IN_OBJECT_WAIT_TIMED)                \
2311   declare_constant(java_lang_Thread::PARKED)                              \
2312   declare_constant(java_lang_Thread::PARKED_TIMED)                        \
2313   declare_constant(java_lang_Thread::BLOCKED_ON_MONITOR_ENTER)            \
2314   declare_constant(java_lang_Thread::TERMINATED)                          \
2315                                                                           \
2316   /******************************/                                        \
2317   /* Debug info                 */                                        \
2318   /******************************/                                        \
2319                                                                           \
2320   declare_constant(Location::OFFSET_MASK)                                 \
2321   declare_constant(Location::OFFSET_SHIFT)                                \
2322   declare_constant(Location::TYPE_MASK)                                   \
2323   declare_constant(Location::TYPE_SHIFT)                                  \
2324   declare_constant(Location::WHERE_MASK)                                  \
2325   declare_constant(Location::WHERE_SHIFT)                                 \
2326                                                                           \
2327   /* constants from Location::Type enum  */                               \
2328                                                                           \
2329   declare_constant(Location::normal)                                      \
2330   declare_constant(Location::oop)                                         \
2331   declare_constant(Location::narrowoop)                                   \
2332   declare_constant(Location::int_in_long)                                 \
2333   declare_constant(Location::lng)                                         \
2334   declare_constant(Location::float_in_dbl)                                \
2335   declare_constant(Location::dbl)                                         \
2336   declare_constant(Location::addr)                                        \
2337   declare_constant(Location::invalid)                                     \
2338                                                                           \
2339   /* constants from Location::Where enum */                               \
2340                                                                           \
2341   declare_constant(Location::on_stack)                                    \
2342   declare_constant(Location::in_register)                                 \
2343                                                                           \
2344   declare_constant(Deoptimization::Reason_many)                           \
2345   declare_constant(Deoptimization::Reason_none)                           \
2346   declare_constant(Deoptimization::Reason_null_check)                     \
2347   declare_constant(Deoptimization::Reason_null_assert)                    \
2348   declare_constant(Deoptimization::Reason_range_check)                    \
2349   declare_constant(Deoptimization::Reason_class_check)                    \
2350   declare_constant(Deoptimization::Reason_array_check)                    \
2351   declare_constant(Deoptimization::Reason_intrinsic)                      \
2352   declare_constant(Deoptimization::Reason_bimorphic)                      \
2353   declare_constant(Deoptimization::Reason_profile_predicate)              \
2354   declare_constant(Deoptimization::Reason_unloaded)                       \
2355   declare_constant(Deoptimization::Reason_uninitialized)                  \
2356   declare_constant(Deoptimization::Reason_initialized)                    \
2357   declare_constant(Deoptimization::Reason_unreached)                      \
2358   declare_constant(Deoptimization::Reason_unhandled)                      \
2359   declare_constant(Deoptimization::Reason_constraint)                     \
2360   declare_constant(Deoptimization::Reason_div0_check)                     \
2361   declare_constant(Deoptimization::Reason_age)                            \
2362   declare_constant(Deoptimization::Reason_predicate)                      \
2363   declare_constant(Deoptimization::Reason_loop_limit_check)               \
2364   declare_constant(Deoptimization::Reason_speculate_class_check)          \
2365   declare_constant(Deoptimization::Reason_speculate_null_check)           \
2366   declare_constant(Deoptimization::Reason_speculate_null_assert)          \
2367   declare_constant(Deoptimization::Reason_rtm_state_change)               \
2368   declare_constant(Deoptimization::Reason_unstable_if)                    \
2369   declare_constant(Deoptimization::Reason_unstable_fused_if)              \
2370   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_aliasing)))                       \
2371   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_transfer_to_interpreter)))        \
2372   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_not_compiled_exception_handler))) \
2373   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_unresolved)))                     \
2374   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_jsr_mismatch)))                   \
2375   declare_constant(Deoptimization::Reason_tenured)                        \
2376   declare_constant(Deoptimization::Reason_LIMIT)                          \
2377   declare_constant(Deoptimization::Reason_RECORDED_LIMIT)                 \
2378                                                                           \
2379   declare_constant(Deoptimization::Action_none)                           \
2380   declare_constant(Deoptimization::Action_maybe_recompile)                \
2381   declare_constant(Deoptimization::Action_reinterpret)                    \
2382   declare_constant(Deoptimization::Action_make_not_entrant)               \
2383   declare_constant(Deoptimization::Action_make_not_compilable)            \
2384   declare_constant(Deoptimization::Action_LIMIT)                          \
2385                                                                           \
2386   /***************************************************/                   \
2387   /* DEFAULT_CACHE_LINE_SIZE (globalDefinitions.hpp) */                   \
2388   /***************************************************/                   \
2389                                                                           \
2390   declare_preprocessor_constant("DEFAULT_CACHE_LINE_SIZE", DEFAULT_CACHE_LINE_SIZE) \
2391                                                                           \
2392   declare_constant(Deoptimization::Unpack_deopt)                          \
2393   declare_constant(Deoptimization::Unpack_exception)                      \
2394   declare_constant(Deoptimization::Unpack_uncommon_trap)                  \
2395   declare_constant(Deoptimization::Unpack_reexecute)                      \
2396                                                                           \
2397   declare_constant(Deoptimization::_action_bits)                          \
2398   declare_constant(Deoptimization::_reason_bits)                          \
2399   declare_constant(Deoptimization::_debug_id_bits)                        \
2400   declare_constant(Deoptimization::_action_shift)                         \
2401   declare_constant(Deoptimization::_reason_shift)                         \
2402   declare_constant(Deoptimization::_debug_id_shift)                       \
2403                                                                           \
2404   /******************************************/                            \
2405   /* BasicType enum (globalDefinitions.hpp) */                            \
2406   /******************************************/                            \
2407                                                                           \
2408   declare_constant(T_BOOLEAN)                                             \
2409   declare_constant(T_CHAR)                                                \
2410   declare_constant(T_FLOAT)                                               \
2411   declare_constant(T_DOUBLE)                                              \
2412   declare_constant(T_BYTE)                                                \
2413   declare_constant(T_SHORT)                                               \
2414   declare_constant(T_INT)                                                 \
2415   declare_constant(T_LONG)                                                \
2416   declare_constant(T_OBJECT)                                              \
2417   declare_constant(T_ARRAY)                                               \
2418   declare_constant(T_VOID)                                                \
2419   declare_constant(T_ADDRESS)                                             \
2420   declare_constant(T_NARROWOOP)                                           \
2421   declare_constant(T_METADATA)                                            \
2422   declare_constant(T_NARROWKLASS)                                         \
2423   declare_constant(T_CONFLICT)                                            \
2424   declare_constant(T_ILLEGAL)                                             \
2425                                                                           \
2426   /**********************************************/                        \
2427   /* BasicTypeSize enum (globalDefinitions.hpp) */                        \
2428   /**********************************************/                        \
2429                                                                           \
2430   declare_constant(T_BOOLEAN_size)                                        \
2431   declare_constant(T_CHAR_size)                                           \
2432   declare_constant(T_FLOAT_size)                                          \
2433   declare_constant(T_DOUBLE_size)                                         \
2434   declare_constant(T_BYTE_size)                                           \
2435   declare_constant(T_SHORT_size)                                          \
2436   declare_constant(T_INT_size)                                            \
2437   declare_constant(T_LONG_size)                                           \
2438   declare_constant(T_OBJECT_size)                                         \
2439   declare_constant(T_ARRAY_size)                                          \
2440   declare_constant(T_NARROWOOP_size)                                      \
2441   declare_constant(T_NARROWKLASS_size)                                    \
2442   declare_constant(T_VOID_size)                                           \
2443                                                                           \
2444   /*********************/                                                 \
2445   /* Matcher (C2 only) */                                                 \
2446   /*********************/                                                 \
2447                                                                           \
2448   declare_c2_preprocessor_constant("Matcher::interpreter_frame_pointer_reg", Matcher::interpreter_frame_pointer_reg()) \
2449                                                                           \
2450   /*********************************************/                         \
2451   /* MethodCompilation (globalDefinitions.hpp) */                         \
2452   /*********************************************/                         \
2453                                                                           \
2454   declare_constant(InvocationEntryBci)                                    \
2455                                                                           \
2456   /*************/                                                         \
2457   /* CompLevel */                                                         \
2458   /*************/                                                         \
2459                                                                           \
2460   declare_constant(CompLevel_any)                                         \
2461   declare_constant(CompLevel_all)                                         \
2462   declare_constant(CompLevel_none)                                        \
2463   declare_constant(CompLevel_simple)                                      \
2464   declare_constant(CompLevel_limited_profile)                             \
2465   declare_constant(CompLevel_full_profile)                                \
2466   declare_constant(CompLevel_full_optimization)                           \
2467   declare_constant(CompLevel_aot)                                         \
2468                                                                           \
2469   /***************/                                                       \
2470   /* OopMapValue */                                                       \
2471   /***************/                                                       \
2472                                                                           \
2473   declare_constant(OopMapValue::type_bits)                                \
2474   declare_constant(OopMapValue::register_bits)                            \
2475   declare_constant(OopMapValue::type_shift)                               \
2476   declare_constant(OopMapValue::register_shift)                           \
2477   declare_constant(OopMapValue::type_mask)                                \
2478   declare_constant(OopMapValue::type_mask_in_place)                       \
2479   declare_constant(OopMapValue::register_mask)                            \
2480   declare_constant(OopMapValue::register_mask_in_place)                   \
2481   declare_constant(OopMapValue::unused_value)                             \
2482   declare_constant(OopMapValue::oop_value)                                \
2483   declare_constant(OopMapValue::narrowoop_value)                          \
2484   declare_constant(OopMapValue::callee_saved_value)                       \
2485   declare_constant(OopMapValue::derived_oop_value)                        \
2486                                                                           \
2487   /******************/                                                    \
2488   /* JNIHandleBlock */                                                    \
2489   /******************/                                                    \
2490                                                                           \
2491   declare_constant(JNIHandleBlock::block_size_in_oops)                    \
2492                                                                           \
2493   /**********************/                                                \
2494   /* ObjectSynchronizer */                                                \
2495   /**********************/                                                \
2496                                                                           \
2497   declare_constant(ObjectSynchronizer::_BLOCKSIZE)                        \
2498                                                                           \
2499   /**********************/                                                \
2500   /* PcDesc             */                                                \
2501   /**********************/                                                \
2502                                                                           \
2503   declare_constant(PcDesc::PCDESC_reexecute)                              \
2504   declare_constant(PcDesc::PCDESC_is_method_handle_invoke)                \
2505   declare_constant(PcDesc::PCDESC_return_oop)                             \
2506                                                                           \
2507   /**********************/                                                \
2508   /* frame              */                                                \
2509   /**********************/                                                \
2510   NOT_ZERO(PPC64_ONLY(declare_constant(frame::entry_frame_locals_size)))  \
2511                                                                           \
2512   NOT_ZERO(X86_ONLY(declare_constant(frame::entry_frame_call_wrapper_offset)))      \
2513   declare_constant(frame::pc_return_offset)                               \
2514                                                                           \
2515   /*************/                                                         \
2516   /* vmSymbols */                                                         \
2517   /*************/                                                         \
2518                                                                           \
2519   declare_constant(vmSymbols::FIRST_SID)                                  \
2520   declare_constant(vmSymbols::SID_LIMIT)                                  \
2521                                                                           \
2522   /****************/                                                      \
2523   /* vmIntrinsics */                                                      \
2524   /****************/                                                      \
2525                                                                           \
2526   declare_constant(vmIntrinsics::_invokeBasic)                            \
2527   declare_constant(vmIntrinsics::_linkToVirtual)                          \
2528   declare_constant(vmIntrinsics::_linkToStatic)                           \
2529   declare_constant(vmIntrinsics::_linkToSpecial)                          \
2530   declare_constant(vmIntrinsics::_linkToInterface)                        \
2531                                                                           \
2532   /********************************/                                      \
2533   /* Calling convention constants */                                      \
2534   /********************************/                                      \
2535                                                                           \
2536   declare_constant(RegisterImpl::number_of_registers)                     \
2537   declare_constant(ConcreteRegisterImpl::number_of_registers)             \
2538   declare_preprocessor_constant("REG_COUNT", REG_COUNT)                \
2539   declare_c2_preprocessor_constant("SAVED_ON_ENTRY_REG_COUNT", SAVED_ON_ENTRY_REG_COUNT) \
2540   declare_c2_preprocessor_constant("C_SAVED_ON_ENTRY_REG_COUNT", C_SAVED_ON_ENTRY_REG_COUNT) \
2541                                                                           \
2542   /************/                                                          \
2543   /* PerfData */                                                          \
2544   /************/                                                          \
2545                                                                           \
2546   /***********************/                                               \
2547   /* PerfData Units enum */                                               \
2548   /***********************/                                               \
2549                                                                           \
2550   declare_constant(PerfData::U_None)                                      \
2551   declare_constant(PerfData::U_Bytes)                                     \
2552   declare_constant(PerfData::U_Ticks)                                     \
2553   declare_constant(PerfData::U_Events)                                    \
2554   declare_constant(PerfData::U_String)                                    \
2555   declare_constant(PerfData::U_Hertz)                                     \
2556                                                                           \
2557   /****************/                                                      \
2558   /* JVMCI */                                                             \
2559   /****************/                                                      \
2560                                                                           \
2561   declare_preprocessor_constant("INCLUDE_JVMCI", INCLUDE_JVMCI)           \
2562                                                                           \
2563   /****************/                                                      \
2564   /*  VMRegImpl   */                                                      \
2565   /****************/                                                      \
2566   declare_constant(VMRegImpl::stack_slot_size)                            \
2567                                                                           \
2568   /******************************/                                        \
2569   /*  -XX flags (value origin)  */                                        \
2570   /******************************/                                        \
2571   declare_constant(JVMFlag::DEFAULT)                                      \
2572   declare_constant(JVMFlag::COMMAND_LINE)                                 \
2573   declare_constant(JVMFlag::ENVIRON_VAR)                                  \
2574   declare_constant(JVMFlag::CONFIG_FILE)                                  \
2575   declare_constant(JVMFlag::MANAGEMENT)                                   \
2576   declare_constant(JVMFlag::ERGONOMIC)                                    \
2577   declare_constant(JVMFlag::ATTACH_ON_DEMAND)                             \
2578   declare_constant(JVMFlag::INTERNAL)                                     \
2579   declare_constant(JVMFlag::JIMAGE_RESOURCE)                              \
2580   declare_constant(JVMFlag::VALUE_ORIGIN_MASK)                            \
2581   declare_constant(JVMFlag::ORIG_COMMAND_LINE)
2582 
2583 //--------------------------------------------------------------------------------
2584 // VM_LONG_CONSTANTS
2585 //
2586 // This table contains long constants required over in the
2587 // serviceability agent. The "declare_constant" macro is used for all
2588 // enums, etc., while "declare_preprocessor_constant" must be used for
2589 // all #defined constants.
2590 
2591 #define VM_LONG_CONSTANTS(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
2592                                                                           \
2593   /****************/                                                      \
2594   /* GC constants */                                                      \
2595   /****************/                                                      \
2596                                                                           \
2597   VM_LONG_CONSTANTS_GC(declare_constant)                                  \
2598                                                                           \
2599   /*********************/                                                 \
2600   /* markWord constants */                                                \
2601   /*********************/                                                 \
2602                                                                           \
2603   /* Note: some of these are declared as long constants just for */       \
2604   /* consistency. The mask constants are the only ones requiring */       \
2605   /* 64 bits (on 64-bit platforms). */                                    \
2606                                                                           \
2607   declare_constant(markWord::age_bits)                                    \
2608   declare_constant(markWord::lock_bits)                                   \
2609   declare_constant(markWord::biased_lock_bits)                            \
2610   declare_constant(markWord::max_hash_bits)                               \
2611   declare_constant(markWord::hash_bits)                                   \
2612                                                                           \
2613   declare_constant(markWord::lock_shift)                                  \
2614   declare_constant(markWord::biased_lock_shift)                           \
2615   declare_constant(markWord::age_shift)                                   \
2616   declare_constant(markWord::hash_shift)                                  \
2617                                                                           \
2618   declare_constant(markWord::lock_mask)                                   \
2619   declare_constant(markWord::lock_mask_in_place)                          \
2620   declare_constant(markWord::biased_lock_mask)                            \
2621   declare_constant(markWord::biased_lock_mask_in_place)                   \
2622   declare_constant(markWord::biased_lock_bit_in_place)                    \
2623   declare_constant(markWord::age_mask)                                    \
2624   declare_constant(markWord::age_mask_in_place)                           \
2625   declare_constant(markWord::epoch_mask)                                  \
2626   declare_constant(markWord::epoch_mask_in_place)                         \
2627   declare_constant(markWord::hash_mask)                                   \
2628   declare_constant(markWord::hash_mask_in_place)                          \
2629   declare_constant(markWord::biased_lock_alignment)                       \
2630                                                                           \
2631   declare_constant(markWord::locked_value)                                \
2632   declare_constant(markWord::unlocked_value)                              \
2633   declare_constant(markWord::monitor_value)                               \
2634   declare_constant(markWord::marked_value)                                \
2635   declare_constant(markWord::biased_lock_pattern)                         \
2636                                                                           \
2637   declare_constant(markWord::no_hash)                                     \
2638   declare_constant(markWord::no_hash_in_place)                            \
2639   declare_constant(markWord::no_lock_in_place)                            \
2640   declare_constant(markWord::max_age)                                     \
2641                                                                           \
2642   /* InvocationCounter constants */                                       \
2643   declare_constant(InvocationCounter::count_increment)                    \
2644   declare_constant(InvocationCounter::count_shift)
2645 
2646 
2647 //--------------------------------------------------------------------------------
2648 //
2649 
2650 // Generate and check a nonstatic field in non-product builds
2651 #ifndef PRODUCT
2652 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2653 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2654 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2655 #else
2656 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2657 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2658 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)
2659 #endif /* PRODUCT */
2660 
2661 // Generate and check a nonstatic field in C1 builds
2662 #ifdef COMPILER1
2663 # define GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2664 # define CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2665 # define ENSURE_C1_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2666 #else
2667 # define GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2668 # define CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2669 # define ENSURE_C1_FIELD_TYPE_PRESENT(a, b, c)
2670 #endif /* COMPILER1 */
2671 // Generate and check a nonstatic field in C2 builds
2672 #ifdef COMPILER2
2673 # define GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2674 # define CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2675 # define ENSURE_C2_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2676 #else
2677 # define GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2678 # define CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2679 # define ENSURE_C2_FIELD_TYPE_PRESENT(a, b, c)
2680 #endif /* COMPILER2 */
2681 
2682 // Generate but do not check a static field in C1 builds
2683 #ifdef COMPILER1
2684 # define GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2685 #else
2686 # define GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2687 #endif /* COMPILER1 */
2688 
2689 // Generate but do not check a static field in C2 builds
2690 #ifdef COMPILER2
2691 # define GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2692 #else
2693 # define GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2694 #endif /* COMPILER2 */
2695 
2696 //--------------------------------------------------------------------------------
2697 // VMTypeEntry build-specific macros
2698 //
2699 
2700 #ifdef COMPILER1
2701 # define GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY(a)               GENERATE_TOPLEVEL_VM_TYPE_ENTRY(a)
2702 # define CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
2703 #else
2704 # define GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
2705 # define CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
2706 #endif /* COMPILER1 */
2707 
2708 #ifdef COMPILER2
2709 # define GENERATE_C2_VM_TYPE_ENTRY(a, b)                     GENERATE_VM_TYPE_ENTRY(a, b)
2710 # define CHECK_C2_VM_TYPE_ENTRY(a, b)                        CHECK_VM_TYPE_ENTRY(a, b)
2711 # define GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY(a)               GENERATE_TOPLEVEL_VM_TYPE_ENTRY(a)
2712 # define CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
2713 #else
2714 # define GENERATE_C2_VM_TYPE_ENTRY(a, b)
2715 # define CHECK_C2_VM_TYPE_ENTRY(a, b)
2716 # define GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
2717 # define CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
2718 #endif /* COMPILER2 */
2719 
2720 
2721 //--------------------------------------------------------------------------------
2722 // VMIntConstantEntry build-specific macros
2723 //
2724 
2725 // Generate an int constant for a C1 build
2726 #ifdef COMPILER1
2727 # define GENERATE_C1_VM_INT_CONSTANT_ENTRY(name)  GENERATE_VM_INT_CONSTANT_ENTRY(name)
2728 #else
2729 # define GENERATE_C1_VM_INT_CONSTANT_ENTRY(name)
2730 #endif /* COMPILER1 */
2731 
2732 // Generate an int constant for a C2 build
2733 #ifdef COMPILER2
2734 # define GENERATE_C2_VM_INT_CONSTANT_ENTRY(name)                      GENERATE_VM_INT_CONSTANT_ENTRY(name)
2735 # define GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)  GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)
2736 #else
2737 # define GENERATE_C2_VM_INT_CONSTANT_ENTRY(name)
2738 # define GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)
2739 #endif /* COMPILER1 */
2740 
2741 
2742 //--------------------------------------------------------------------------------
2743 // VMLongConstantEntry build-specific macros
2744 //
2745 
2746 // Generate a long constant for a C1 build
2747 #ifdef COMPILER1
2748 # define GENERATE_C1_VM_LONG_CONSTANT_ENTRY(name)  GENERATE_VM_LONG_CONSTANT_ENTRY(name)
2749 #else
2750 # define GENERATE_C1_VM_LONG_CONSTANT_ENTRY(name)
2751 #endif /* COMPILER1 */
2752 
2753 // Generate a long constant for a C2 build
2754 #ifdef COMPILER2
2755 # define GENERATE_C2_VM_LONG_CONSTANT_ENTRY(name)                     GENERATE_VM_LONG_CONSTANT_ENTRY(name)
2756 # define GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value) GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value)
2757 #else
2758 # define GENERATE_C2_VM_LONG_CONSTANT_ENTRY(name)
2759 # define GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value)
2760 #endif /* COMPILER1 */
2761 
2762 
2763 //
2764 // Instantiation of VMStructEntries, VMTypeEntries and VMIntConstantEntries
2765 //
2766 
2767 // These initializers are allowed to access private fields in classes
2768 // as long as class VMStructs is a friend
2769 VMStructEntry VMStructs::localHotSpotVMStructs[] = {
2770 
2771   VM_STRUCTS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2772              GENERATE_STATIC_VM_STRUCT_ENTRY,
2773              GENERATE_STATIC_PTR_VOLATILE_VM_STRUCT_ENTRY,
2774              GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
2775              GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2776              GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2777              GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY,
2778              GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
2779              GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
2780              GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
2781 
2782 
2783   VM_STRUCTS_OS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2784                 GENERATE_STATIC_VM_STRUCT_ENTRY,
2785                 GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
2786                 GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2787                 GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2788                 GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
2789                 GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
2790                 GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
2791 
2792   VM_STRUCTS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2793                  GENERATE_STATIC_VM_STRUCT_ENTRY,
2794                  GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
2795                  GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2796                  GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2797                  GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
2798                  GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
2799                  GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
2800 
2801   VM_STRUCTS_OS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2802                     GENERATE_STATIC_VM_STRUCT_ENTRY,
2803                     GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
2804                     GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2805                     GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2806                     GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
2807                     GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
2808                     GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
2809 
2810   GENERATE_VM_STRUCT_LAST_ENTRY()
2811 };
2812 
2813 size_t VMStructs::localHotSpotVMStructsLength() {
2814   return sizeof(localHotSpotVMStructs) / sizeof(VMStructEntry);
2815 }
2816 
2817 VMTypeEntry VMStructs::localHotSpotVMTypes[] = {
2818 
2819   VM_TYPES(GENERATE_VM_TYPE_ENTRY,
2820            GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
2821            GENERATE_OOP_VM_TYPE_ENTRY,
2822            GENERATE_INTEGER_VM_TYPE_ENTRY,
2823            GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
2824            GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
2825            GENERATE_C2_VM_TYPE_ENTRY,
2826            GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
2827 
2828 
2829   VM_TYPES_OS(GENERATE_VM_TYPE_ENTRY,
2830               GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
2831               GENERATE_OOP_VM_TYPE_ENTRY,
2832               GENERATE_INTEGER_VM_TYPE_ENTRY,
2833               GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
2834               GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
2835               GENERATE_C2_VM_TYPE_ENTRY,
2836               GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
2837 
2838   VM_TYPES_CPU(GENERATE_VM_TYPE_ENTRY,
2839                GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
2840                GENERATE_OOP_VM_TYPE_ENTRY,
2841                GENERATE_INTEGER_VM_TYPE_ENTRY,
2842                GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
2843                GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
2844                GENERATE_C2_VM_TYPE_ENTRY,
2845                GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
2846 
2847   VM_TYPES_OS_CPU(GENERATE_VM_TYPE_ENTRY,
2848                   GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
2849                   GENERATE_OOP_VM_TYPE_ENTRY,
2850                   GENERATE_INTEGER_VM_TYPE_ENTRY,
2851                   GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
2852                   GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
2853                   GENERATE_C2_VM_TYPE_ENTRY,
2854                   GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
2855 
2856   GENERATE_VM_TYPE_LAST_ENTRY()
2857 };
2858 
2859 size_t VMStructs::localHotSpotVMTypesLength() {
2860   return sizeof(localHotSpotVMTypes) / sizeof(VMTypeEntry);
2861 }
2862 
2863 VMIntConstantEntry VMStructs::localHotSpotVMIntConstants[] = {
2864 
2865   VM_INT_CONSTANTS(GENERATE_VM_INT_CONSTANT_ENTRY,
2866                    GENERATE_VM_INT_CONSTANT_WITH_VALUE_ENTRY,
2867                    GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
2868                    GENERATE_C1_VM_INT_CONSTANT_ENTRY,
2869                    GENERATE_C2_VM_INT_CONSTANT_ENTRY,
2870                    GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
2871 
2872   VM_INT_CONSTANTS_OS(GENERATE_VM_INT_CONSTANT_ENTRY,
2873                       GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
2874                       GENERATE_C1_VM_INT_CONSTANT_ENTRY,
2875                       GENERATE_C2_VM_INT_CONSTANT_ENTRY,
2876                       GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
2877 
2878   VM_INT_CONSTANTS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
2879                        GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
2880                        GENERATE_C1_VM_INT_CONSTANT_ENTRY,
2881                        GENERATE_C2_VM_INT_CONSTANT_ENTRY,
2882                        GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
2883 
2884   VM_INT_CONSTANTS_OS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
2885                           GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
2886                           GENERATE_C1_VM_INT_CONSTANT_ENTRY,
2887                           GENERATE_C2_VM_INT_CONSTANT_ENTRY,
2888                           GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
2889 
2890   GENERATE_VM_INT_CONSTANT_LAST_ENTRY()
2891 };
2892 
2893 size_t VMStructs::localHotSpotVMIntConstantsLength() {
2894   return sizeof(localHotSpotVMIntConstants) / sizeof(VMIntConstantEntry);
2895 }
2896 
2897 VMLongConstantEntry VMStructs::localHotSpotVMLongConstants[] = {
2898 
2899   VM_LONG_CONSTANTS(GENERATE_VM_LONG_CONSTANT_ENTRY,
2900                     GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
2901                     GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
2902                     GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
2903                     GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
2904 
2905   VM_LONG_CONSTANTS_OS(GENERATE_VM_LONG_CONSTANT_ENTRY,
2906                        GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
2907                        GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
2908                        GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
2909                        GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
2910 
2911   VM_LONG_CONSTANTS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
2912                         GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
2913                         GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
2914                         GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
2915                         GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
2916 
2917   VM_LONG_CONSTANTS_OS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
2918                            GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
2919                            GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
2920                            GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
2921                            GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
2922 
2923   GENERATE_VM_LONG_CONSTANT_LAST_ENTRY()
2924 };
2925 
2926 size_t VMStructs::localHotSpotVMLongConstantsLength() {
2927   return sizeof(localHotSpotVMLongConstants) / sizeof(VMLongConstantEntry);
2928 }
2929 
2930 extern "C" {
2931 
2932 #define STRIDE(array) ((char*)&amp;array[1] - (char*)&amp;array[0])
2933 
2934 JNIEXPORT VMStructEntry* gHotSpotVMStructs = VMStructs::localHotSpotVMStructs;
2935 JNIEXPORT uint64_t gHotSpotVMStructEntryTypeNameOffset = offset_of(VMStructEntry, typeName);
2936 JNIEXPORT uint64_t gHotSpotVMStructEntryFieldNameOffset = offset_of(VMStructEntry, fieldName);
2937 JNIEXPORT uint64_t gHotSpotVMStructEntryTypeStringOffset = offset_of(VMStructEntry, typeString);
2938 JNIEXPORT uint64_t gHotSpotVMStructEntryIsStaticOffset = offset_of(VMStructEntry, isStatic);
2939 JNIEXPORT uint64_t gHotSpotVMStructEntryOffsetOffset = offset_of(VMStructEntry, offset);
2940 JNIEXPORT uint64_t gHotSpotVMStructEntryAddressOffset = offset_of(VMStructEntry, address);
2941 JNIEXPORT uint64_t gHotSpotVMStructEntryArrayStride = STRIDE(gHotSpotVMStructs);
2942 
2943 JNIEXPORT VMTypeEntry* gHotSpotVMTypes = VMStructs::localHotSpotVMTypes;
2944 JNIEXPORT uint64_t gHotSpotVMTypeEntryTypeNameOffset = offset_of(VMTypeEntry, typeName);
2945 JNIEXPORT uint64_t gHotSpotVMTypeEntrySuperclassNameOffset = offset_of(VMTypeEntry, superclassName);
2946 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsOopTypeOffset = offset_of(VMTypeEntry, isOopType);
2947 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsIntegerTypeOffset = offset_of(VMTypeEntry, isIntegerType);
2948 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsUnsignedOffset = offset_of(VMTypeEntry, isUnsigned);
2949 JNIEXPORT uint64_t gHotSpotVMTypeEntrySizeOffset = offset_of(VMTypeEntry, size);
2950 JNIEXPORT uint64_t gHotSpotVMTypeEntryArrayStride = STRIDE(gHotSpotVMTypes);
2951 
2952 JNIEXPORT VMIntConstantEntry* gHotSpotVMIntConstants = VMStructs::localHotSpotVMIntConstants;
2953 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryNameOffset = offset_of(VMIntConstantEntry, name);
2954 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryValueOffset = offset_of(VMIntConstantEntry, value);
2955 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryArrayStride = STRIDE(gHotSpotVMIntConstants);
2956 
2957 JNIEXPORT VMLongConstantEntry* gHotSpotVMLongConstants = VMStructs::localHotSpotVMLongConstants;
2958 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryNameOffset = offset_of(VMLongConstantEntry, name);
2959 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryValueOffset = offset_of(VMLongConstantEntry, value);
2960 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryArrayStride = STRIDE(gHotSpotVMLongConstants);
2961 } // "C"
2962 
2963 #ifdef ASSERT
2964 // This is used both to check the types of referenced fields and
2965 // to ensure that all of the field types are present.
2966 void VMStructs::init() {
2967   VM_STRUCTS(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
2968              CHECK_STATIC_VM_STRUCT_ENTRY,
2969              CHECK_STATIC_PTR_VOLATILE_VM_STRUCT_ENTRY,
2970              CHECK_NO_OP,
2971              CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
2972              CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2973              CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY,
2974              CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
2975              CHECK_NO_OP,
2976              CHECK_NO_OP);
2977 
2978 
2979   VM_STRUCTS_CPU(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
2980                  CHECK_STATIC_VM_STRUCT_ENTRY,
2981                  CHECK_NO_OP,
2982                  CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
2983                  CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2984                  CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
2985                  CHECK_NO_OP,
2986                  CHECK_NO_OP);
2987 
2988   VM_STRUCTS_OS_CPU(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
2989                     CHECK_STATIC_VM_STRUCT_ENTRY,
2990                     CHECK_NO_OP,
2991                     CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
2992                     CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2993                     CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
2994                     CHECK_NO_OP,
2995                     CHECK_NO_OP);
2996 
2997   VM_TYPES(CHECK_VM_TYPE_ENTRY,
2998            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
2999            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3000            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3001            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3002            CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3003            CHECK_C2_VM_TYPE_ENTRY,
3004            CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3005 
3006 
3007   VM_TYPES_CPU(CHECK_VM_TYPE_ENTRY,
3008                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3009                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3010                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3011                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3012                CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3013                CHECK_C2_VM_TYPE_ENTRY,
3014                CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3015 
3016   VM_TYPES_OS_CPU(CHECK_VM_TYPE_ENTRY,
3017                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3018                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3019                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3020                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3021                   CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3022                   CHECK_C2_VM_TYPE_ENTRY,
3023                   CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3024 
3025   //
3026   // Split VM_STRUCTS() invocation into two parts to allow MS VC++ 6.0
3027   // to build with the source mounted over SNC3.2. Symptom was that
3028   // debug build failed with an internal compiler error. Has been seen
3029   // mounting sources from Solaris 2.6 and 2.7 hosts, but so far not
3030   // 2.8 hosts. Appears to occur because line is too long.
3031   //
3032   // If an assertion failure is triggered here it means that an entry
3033   // in VMStructs::localHotSpotVMStructs[] was not found in
3034   // VMStructs::localHotSpotVMTypes[]. (The assertion itself had to be
3035   // made less descriptive because of this above bug -- see the
3036   // definition of ENSURE_FIELD_TYPE_PRESENT.)
3037   //
3038   // NOTE: taken out because this was just not working on everyone's
3039   // Solstice NFS setup. If everyone switches to local workspaces on
3040   // Win32, we can put this back in.
3041 #ifndef _WINDOWS
3042   VM_STRUCTS(ENSURE_FIELD_TYPE_PRESENT,
3043              CHECK_NO_OP,
3044              CHECK_NO_OP,
3045              CHECK_NO_OP,
3046              CHECK_NO_OP,
3047              CHECK_NO_OP,
3048              CHECK_NO_OP,
3049              CHECK_NO_OP,
3050              CHECK_NO_OP,
3051              CHECK_NO_OP);
3052 
3053   VM_STRUCTS(CHECK_NO_OP,
3054              ENSURE_FIELD_TYPE_PRESENT,
3055              ENSURE_FIELD_TYPE_PRESENT,
3056              CHECK_NO_OP,
3057              ENSURE_FIELD_TYPE_PRESENT,
3058              ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3059              ENSURE_C1_FIELD_TYPE_PRESENT,
3060              ENSURE_C2_FIELD_TYPE_PRESENT,
3061              CHECK_NO_OP,
3062              CHECK_NO_OP);
3063 
3064   VM_STRUCTS_CPU(ENSURE_FIELD_TYPE_PRESENT,
3065                  ENSURE_FIELD_TYPE_PRESENT,
3066                  CHECK_NO_OP,
3067                  ENSURE_FIELD_TYPE_PRESENT,
3068                  ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3069                  ENSURE_C2_FIELD_TYPE_PRESENT,
3070                  CHECK_NO_OP,
3071                  CHECK_NO_OP);
3072   VM_STRUCTS_OS_CPU(ENSURE_FIELD_TYPE_PRESENT,
3073                     ENSURE_FIELD_TYPE_PRESENT,
3074                     CHECK_NO_OP,
3075                     ENSURE_FIELD_TYPE_PRESENT,
3076                     ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3077                     ENSURE_C2_FIELD_TYPE_PRESENT,
3078                     CHECK_NO_OP,
3079                     CHECK_NO_OP);
3080 #endif // !_WINDOWS
3081 }
3082 
3083 static int recursiveFindType(VMTypeEntry* origtypes, const char* typeName, bool isRecurse) {
3084   {
3085     VMTypeEntry* types = origtypes;
3086     while (types-&gt;typeName != NULL) {
3087       if (strcmp(typeName, types-&gt;typeName) == 0) {
3088         // Found it
3089         return 1;
3090       }
3091       ++types;
3092     }
3093   }
3094   // Search for the base type by peeling off const and *
3095   size_t len = strlen(typeName);
3096   if (typeName[len-1] == '*') {
3097     char * s = NEW_C_HEAP_ARRAY(char, len, mtInternal);
3098     strncpy(s, typeName, len - 1);
3099     s[len-1] = '\0';
3100     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3101     if (recursiveFindType(origtypes, s, true) == 1) {
3102       FREE_C_HEAP_ARRAY(char, s);
3103       return 1;
3104     }
3105     FREE_C_HEAP_ARRAY(char, s);
3106   }
3107   const char* start = NULL;
3108   if (strstr(typeName, "GrowableArray&lt;") == typeName) {
3109     start = typeName + strlen("GrowableArray&lt;");
3110   } else if (strstr(typeName, "Array&lt;") == typeName) {
3111     start = typeName + strlen("Array&lt;");
3112   }
3113   if (start != NULL) {
3114     const char * end = strrchr(typeName, '&gt;');
3115     int len = end - start + 1;
3116     char * s = NEW_C_HEAP_ARRAY(char, len, mtInternal);
3117     strncpy(s, start, len - 1);
3118     s[len-1] = '\0';
3119     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3120     if (recursiveFindType(origtypes, s, true) == 1) {
3121       FREE_C_HEAP_ARRAY(char, s);
3122       return 1;
3123     }
3124     FREE_C_HEAP_ARRAY(char, s);
3125   }
3126   if (strstr(typeName, "const ") == typeName) {
3127     const char * s = typeName + strlen("const ");
3128     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3129     if (recursiveFindType(origtypes, s, true) == 1) {
3130       return 1;
3131     }
3132   }
3133   if (strstr(typeName, " const") == typeName + len - 6) {
3134     char * s = os::strdup_check_oom(typeName);
3135     s[len - 6] = '\0';
3136     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3137     if (recursiveFindType(origtypes, s, true) == 1) {
3138       os::free(s);
3139       return 1;
3140     }
3141     os::free(s);
3142   }
3143   if (!isRecurse) {
3144     tty-&gt;print_cr("type \"%s\" not found", typeName);
3145   }
3146   return 0;
3147 }
3148 
3149 int VMStructs::findType(const char* typeName) {
3150   VMTypeEntry* types = gHotSpotVMTypes;
3151 
3152   return recursiveFindType(types, typeName, false);
3153 }
3154 
3155 void vmStructs_init() {
3156   VMStructs::init();
3157 }
3158 #endif // ASSERT
<a name="2" id="anc2"></a><b style="font-size: large; color: red">--- EOF ---</b>















































































</pre><form name="eof"><input name="value" value="2" type="hidden" /></form></body></html>
