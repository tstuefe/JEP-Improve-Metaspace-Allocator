<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta charset="utf-8">
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" />
<!--
   Note to customizers: the body of the webrev is IDed as SUNWwebrev
   to allow easy overriding by users of webrev via the userContent.css
   mechanism available in some browsers.

   For example, to have all "removed" information be red instead of
   brown, set a rule in your userContent.css file like:

       body#SUNWwebrev span.removed { color: red ! important; }
-->
<style type="text/css" media="screen">
body {
    background-color: #eeeeee;
}
hr {
    border: none 0;
    border-top: 1px solid #aaa;
    height: 1px;
}
div.summary {
    font-size: .8em;
    border-bottom: 1px solid #aaa;
    padding-left: 1em;
    padding-right: 1em;
}
div.summary h2 {
    margin-bottom: 0.3em;
}
div.summary table th {
    text-align: right;
    vertical-align: top;
    white-space: nowrap;
}
span.lineschanged {
    font-size: 0.7em;
}
span.oldmarker {
    color: red;
    font-size: large;
    font-weight: bold;
}
span.newmarker {
    color: green;
    font-size: large;
    font-weight: bold;
}
span.removed {
    color: brown;
}
span.changed {
    color: blue;
}
span.new {
    color: blue;
    font-weight: bold;
}
a.print { font-size: x-small; }

</style>

<style type="text/css" media="print">
pre { font-size: 0.8em; font-family: courier, monospace; }
span.removed { color: #444; font-style: italic }
span.changed { font-weight: bold; }
span.new { font-weight: bold; }
span.newmarker { font-size: 1.2em; font-weight: bold; }
span.oldmarker { font-size: 1.2em; font-weight: bold; }
a.print {display: none}
hr { border: none 0; border-top: 1px solid #aaa; height: 1px; }
</style>

    <script type="text/javascript" src="../../../../ancnav.js"></script>
    </head>
    <body id="SUNWwebrev" onkeypress="keypress(event);">
    <a name="0"></a>
    <pre>rev <a href="https://bugs.openjdk.java.net/browse/JDK-60221">60221</a> : imported patch big.patch</pre><hr></hr>
<pre>
   1 /*
   2  * Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  *
  23  */
  24 
  25 #include "precompiled.hpp"
  26 #include "ci/ciField.hpp"
  27 #include "ci/ciInstance.hpp"
  28 #include "ci/ciMethodData.hpp"
  29 #include "ci/ciObjArrayKlass.hpp"
  30 #include "ci/ciSymbol.hpp"
  31 #include "classfile/compactHashtable.hpp"
  32 #include "classfile/classLoaderDataGraph.hpp"
  33 #include "classfile/dictionary.hpp"
  34 #include "classfile/javaClasses.hpp"
  35 #include "classfile/stringTable.hpp"
  36 #include "classfile/symbolTable.hpp"
  37 #include "classfile/systemDictionary.hpp"
  38 #include "code/codeBlob.hpp"
  39 #include "code/codeCache.hpp"
  40 #include "code/compressedStream.hpp"
  41 #include "code/location.hpp"
  42 #include "code/nmethod.hpp"
  43 #include "code/pcDesc.hpp"
  44 #include "code/stubs.hpp"
  45 #include "code/vmreg.hpp"
  46 #include "compiler/compileBroker.hpp"
  47 #include "compiler/oopMap.hpp"
  48 #include "gc/shared/vmStructs_gc.hpp"
  49 #include "interpreter/bytecodes.hpp"
  50 #include "interpreter/interpreter.hpp"
  51 #include "memory/allocation.hpp"
  52 #include "memory/allocation.inline.hpp"
  53 #include "memory/heap.hpp"
<a name="1" id="anc1"></a>
  54 #include "memory/padded.hpp"
  55 #include "memory/referenceType.hpp"
  56 #include "memory/universe.hpp"
  57 #include "memory/virtualspace.hpp"
  58 #include "memory/filemap.hpp"
  59 #include "oops/array.hpp"
  60 #include "oops/arrayKlass.hpp"
  61 #include "oops/arrayOop.hpp"
  62 #include "oops/compiledICHolder.hpp"
  63 #include "oops/constMethod.hpp"
  64 #include "oops/constantPool.hpp"
  65 #include "oops/cpCache.hpp"
  66 #include "oops/instanceClassLoaderKlass.hpp"
  67 #include "oops/instanceKlass.hpp"
  68 #include "oops/instanceMirrorKlass.hpp"
  69 #include "oops/instanceOop.hpp"
  70 #include "oops/klass.hpp"
  71 #include "oops/markWord.hpp"
  72 #include "oops/method.hpp"
  73 #include "oops/methodCounters.hpp"
  74 #include "oops/methodData.hpp"
  75 #include "oops/objArrayKlass.hpp"
  76 #include "oops/objArrayOop.hpp"
  77 #include "oops/oop.inline.hpp"
  78 #include "oops/oopHandle.hpp"
  79 #include "oops/symbol.hpp"
  80 #include "oops/typeArrayKlass.hpp"
  81 #include "oops/typeArrayOop.hpp"
  82 #include "prims/jvmtiAgentThread.hpp"
  83 #include "runtime/arguments.hpp"
  84 #include "runtime/deoptimization.hpp"
  85 #include "runtime/flags/jvmFlag.hpp"
  86 #include "runtime/globals.hpp"
  87 #include "runtime/java.hpp"
  88 #include "runtime/javaCalls.hpp"
  89 #include "runtime/notificationThread.hpp"
  90 #include "runtime/os.hpp"
  91 #include "runtime/perfMemory.hpp"
  92 #include "runtime/serviceThread.hpp"
  93 #include "runtime/sharedRuntime.hpp"
  94 #include "runtime/stubRoutines.hpp"
  95 #include "runtime/synchronizer.hpp"
  96 #include "runtime/thread.inline.hpp"
  97 #include "runtime/threadSMR.hpp"
  98 #include "runtime/vframeArray.hpp"
  99 #include "runtime/vmStructs.hpp"
 100 #include "utilities/globalDefinitions.hpp"
 101 #include "utilities/hashtable.hpp"
 102 #include "utilities/macros.hpp"
 103 
 104 #include CPU_HEADER(vmStructs)
 105 #include OS_HEADER(vmStructs)
 106 #include OS_CPU_HEADER(vmStructs)
 107 
 108 #ifdef COMPILER2
 109 #include "opto/addnode.hpp"
 110 #include "opto/block.hpp"
 111 #include "opto/callnode.hpp"
 112 #include "opto/castnode.hpp"
 113 #include "opto/cfgnode.hpp"
 114 #include "opto/chaitin.hpp"
 115 #include "opto/convertnode.hpp"
 116 #include "opto/divnode.hpp"
 117 #include "opto/intrinsicnode.hpp"
 118 #include "opto/locknode.hpp"
 119 #include "opto/loopnode.hpp"
 120 #include "opto/machnode.hpp"
 121 #include "opto/matcher.hpp"
 122 #include "opto/mathexactnode.hpp"
 123 #include "opto/movenode.hpp"
 124 #include "opto/mulnode.hpp"
 125 #include "opto/narrowptrnode.hpp"
 126 #include "opto/opaquenode.hpp"
 127 #include "opto/optoreg.hpp"
 128 #include "opto/parse.hpp"
 129 #include "opto/phaseX.hpp"
 130 #include "opto/regalloc.hpp"
 131 #include "opto/rootnode.hpp"
 132 #include "opto/subnode.hpp"
 133 #include "opto/vectornode.hpp"
 134 #endif // COMPILER2
 135 
 136 // Note: the cross-product of (c1, c2, product, nonproduct, ...),
 137 // (nonstatic, static), and (unchecked, checked) has not been taken.
 138 // Only the macros currently needed have been defined.
 139 
 140 // A field whose type is not checked is given a null string as the
 141 // type name, indicating an "opaque" type to the serviceability agent.
 142 
 143 // NOTE: there is an interdependency between this file and
 144 // HotSpotTypeDataBase.java, which parses the type strings.
 145 
 146 #ifndef REG_COUNT
 147   #define REG_COUNT 0
 148 #endif
 149 
 150 #if INCLUDE_JVMTI
 151   #define JVMTI_STRUCTS(static_field) \
 152     static_field(JvmtiExport,                     _can_access_local_variables,                  bool)                                  \
 153     static_field(JvmtiExport,                     _can_hotswap_or_post_breakpoint,              bool)                                  \
 154     static_field(JvmtiExport,                     _can_post_on_exceptions,                      bool)                                  \
 155     static_field(JvmtiExport,                     _can_walk_any_space,                          bool)
 156 #else
 157   #define JVMTI_STRUCTS(static_field)
 158 #endif // INCLUDE_JVMTI
 159 
 160 typedef HashtableEntry&lt;intptr_t, mtInternal&gt;  IntptrHashtableEntry;
 161 typedef Hashtable&lt;intptr_t, mtInternal&gt;       IntptrHashtable;
 162 typedef Hashtable&lt;InstanceKlass*, mtClass&gt;       KlassHashtable;
 163 typedef HashtableEntry&lt;InstanceKlass*, mtClass&gt;  KlassHashtableEntry;
 164 
 165 //--------------------------------------------------------------------------------
 166 // VM_STRUCTS
 167 //
 168 // This list enumerates all of the fields the serviceability agent
 169 // needs to know about. Be sure to see also the type table below this one.
 170 // NOTE that there are platform-specific additions to this table in
 171 // vmStructs_&lt;os&gt;_&lt;cpu&gt;.hpp.
 172 
 173 #define VM_STRUCTS(nonstatic_field,                                                                                                  \
 174                    static_field,                                                                                                     \
 175                    static_ptr_volatile_field,                                                                                        \
 176                    unchecked_nonstatic_field,                                                                                        \
 177                    volatile_nonstatic_field,                                                                                         \
 178                    nonproduct_nonstatic_field,                                                                                       \
 179                    c1_nonstatic_field,                                                                                               \
 180                    c2_nonstatic_field,                                                                                               \
 181                    unchecked_c1_static_field,                                                                                        \
 182                    unchecked_c2_static_field)                                                                                        \
 183                                                                                                                                      \
 184   /*************/                                                                                                                    \
 185   /* GC fields */                                                                                                                    \
 186   /*************/                                                                                                                    \
 187                                                                                                                                      \
 188   VM_STRUCTS_GC(nonstatic_field,                                                                                                     \
 189                 volatile_nonstatic_field,                                                                                            \
 190                 static_field,                                                                                                        \
 191                 unchecked_nonstatic_field)                                                                                           \
 192                                                                                                                                      \
 193   /******************************************************************/                                                               \
 194   /* OopDesc and Klass hierarchies (NOTE: MethodData* incomplete)   */                                                               \
 195   /******************************************************************/                                                               \
 196                                                                                                                                      \
 197   volatile_nonstatic_field(oopDesc,            _mark,                                         markWord)                              \
 198   volatile_nonstatic_field(oopDesc,            _metadata._klass,                              Klass*)                                \
 199   volatile_nonstatic_field(oopDesc,            _metadata._compressed_klass,                   narrowKlass)                           \
 200   static_field(BarrierSet,                     _barrier_set,                                  BarrierSet*)                           \
 201   nonstatic_field(ArrayKlass,                  _dimension,                                    int)                                   \
 202   volatile_nonstatic_field(ArrayKlass,         _higher_dimension,                             Klass*)                                \
 203   volatile_nonstatic_field(ArrayKlass,         _lower_dimension,                              Klass*)                                \
 204   nonstatic_field(CompiledICHolder,            _holder_metadata,                              Metadata*)                             \
 205   nonstatic_field(CompiledICHolder,            _holder_klass,                                 Klass*)                                \
 206   nonstatic_field(ConstantPool,                _tags,                                         Array&lt;u1&gt;*)                            \
 207   nonstatic_field(ConstantPool,                _cache,                                        ConstantPoolCache*)                    \
 208   nonstatic_field(ConstantPool,                _pool_holder,                                  InstanceKlass*)                        \
 209   nonstatic_field(ConstantPool,                _operands,                                     Array&lt;u2&gt;*)                            \
 210   nonstatic_field(ConstantPool,                _resolved_klasses,                             Array&lt;Klass*&gt;*)                        \
 211   nonstatic_field(ConstantPool,                _length,                                       int)                                   \
 212   nonstatic_field(ConstantPool,                _minor_version,                                u2)                                    \
 213   nonstatic_field(ConstantPool,                _major_version,                                u2)                                    \
 214   nonstatic_field(ConstantPool,                _generic_signature_index,                      u2)                                    \
 215   nonstatic_field(ConstantPool,                _source_file_name_index,                       u2)                                    \
 216   nonstatic_field(ConstantPoolCache,           _resolved_references,                          OopHandle)                             \
 217   nonstatic_field(ConstantPoolCache,           _reference_map,                                Array&lt;u2&gt;*)                            \
 218   nonstatic_field(ConstantPoolCache,           _length,                                       int)                                   \
 219   nonstatic_field(ConstantPoolCache,           _constant_pool,                                ConstantPool*)                         \
 220   volatile_nonstatic_field(InstanceKlass,      _array_klasses,                                ObjArrayKlass*)                        \
 221   nonstatic_field(InstanceKlass,               _methods,                                      Array&lt;Method*&gt;*)                       \
 222   nonstatic_field(InstanceKlass,               _default_methods,                              Array&lt;Method*&gt;*)                       \
 223   nonstatic_field(InstanceKlass,               _local_interfaces,                             Array&lt;InstanceKlass*&gt;*)                \
 224   nonstatic_field(InstanceKlass,               _transitive_interfaces,                        Array&lt;InstanceKlass*&gt;*)                \
 225   nonstatic_field(InstanceKlass,               _fields,                                       Array&lt;u2&gt;*)                            \
 226   nonstatic_field(InstanceKlass,               _java_fields_count,                            u2)                                    \
 227   nonstatic_field(InstanceKlass,               _constants,                                    ConstantPool*)                         \
 228   nonstatic_field(InstanceKlass,               _source_debug_extension,                       const char*)                           \
 229   nonstatic_field(InstanceKlass,               _inner_classes,                                Array&lt;jushort&gt;*)                       \
 230   nonstatic_field(InstanceKlass,               _nonstatic_field_size,                         int)                                   \
 231   nonstatic_field(InstanceKlass,               _static_field_size,                            int)                                   \
 232   nonstatic_field(InstanceKlass,               _static_oop_field_count,                       u2)                                    \
 233   nonstatic_field(InstanceKlass,               _nonstatic_oop_map_size,                       int)                                   \
 234   nonstatic_field(InstanceKlass,               _is_marked_dependent,                          bool)                                  \
 235   nonstatic_field(InstanceKlass,               _misc_flags,                                   u2)                                    \
 236   nonstatic_field(InstanceKlass,               _init_state,                                   u1)                                    \
 237   nonstatic_field(InstanceKlass,               _init_thread,                                  Thread*)                               \
 238   nonstatic_field(InstanceKlass,               _itable_len,                                   int)                                   \
 239   nonstatic_field(InstanceKlass,               _reference_type,                               u1)                                    \
 240   volatile_nonstatic_field(InstanceKlass,      _oop_map_cache,                                OopMapCache*)                          \
 241   nonstatic_field(InstanceKlass,               _jni_ids,                                      JNIid*)                                \
 242   nonstatic_field(InstanceKlass,               _osr_nmethods_head,                            nmethod*)                              \
 243   JVMTI_ONLY(nonstatic_field(InstanceKlass,    _breakpoints,                                  BreakpointInfo*))                      \
 244   volatile_nonstatic_field(InstanceKlass,      _methods_jmethod_ids,                          jmethodID*)                            \
 245   volatile_nonstatic_field(InstanceKlass,      _idnum_allocated_count,                        u2)                                    \
 246   nonstatic_field(InstanceKlass,               _annotations,                                  Annotations*)                          \
 247   nonstatic_field(InstanceKlass,               _method_ordering,                              Array&lt;int&gt;*)                           \
 248   nonstatic_field(InstanceKlass,               _default_vtable_indices,                       Array&lt;int&gt;*)                           \
 249   nonstatic_field(Klass,                       _super_check_offset,                           juint)                                 \
 250   nonstatic_field(Klass,                       _secondary_super_cache,                        Klass*)                                \
 251   nonstatic_field(Klass,                       _secondary_supers,                             Array&lt;Klass*&gt;*)                        \
 252   nonstatic_field(Klass,                       _primary_supers[0],                            Klass*)                                \
 253   nonstatic_field(Klass,                       _java_mirror,                                  OopHandle)                             \
 254   nonstatic_field(Klass,                       _modifier_flags,                               jint)                                  \
 255   nonstatic_field(Klass,                       _super,                                        Klass*)                                \
 256   volatile_nonstatic_field(Klass,              _subklass,                                     Klass*)                                 \
 257   nonstatic_field(Klass,                       _layout_helper,                                jint)                                  \
 258   nonstatic_field(Klass,                       _name,                                         Symbol*)                               \
 259   nonstatic_field(Klass,                       _access_flags,                                 AccessFlags)                           \
 260   nonstatic_field(Klass,                       _prototype_header,                             markWord)                              \
 261   volatile_nonstatic_field(Klass,              _next_sibling,                                 Klass*)                                \
 262   nonstatic_field(Klass,                       _next_link,                                    Klass*)                                \
 263   nonstatic_field(Klass,                       _vtable_len,                                   int)                                   \
 264   nonstatic_field(Klass,                       _class_loader_data,                            ClassLoaderData*)                      \
 265   nonstatic_field(vtableEntry,                 _method,                                       Method*)                               \
 266   nonstatic_field(MethodData,                  _size,                                         int)                                   \
 267   nonstatic_field(MethodData,                  _method,                                       Method*)                               \
 268   nonstatic_field(MethodData,                  _data_size,                                    int)                                   \
 269   nonstatic_field(MethodData,                  _data[0],                                      intptr_t)                              \
 270   nonstatic_field(MethodData,                  _parameters_type_data_di,                      int)                                   \
 271   nonstatic_field(MethodData,                  _nof_decompiles,                               uint)                                  \
 272   nonstatic_field(MethodData,                  _nof_overflow_recompiles,                      uint)                                  \
 273   nonstatic_field(MethodData,                  _nof_overflow_traps,                           uint)                                  \
 274   nonstatic_field(MethodData,                  _trap_hist._array[0],                          u1)                                    \
 275   nonstatic_field(MethodData,                  _eflags,                                       intx)                                  \
 276   nonstatic_field(MethodData,                  _arg_local,                                    intx)                                  \
 277   nonstatic_field(MethodData,                  _arg_stack,                                    intx)                                  \
 278   nonstatic_field(MethodData,                  _arg_returned,                                 intx)                                  \
 279   nonstatic_field(MethodData,                  _tenure_traps,                                 uint)                                  \
 280   nonstatic_field(MethodData,                  _invoke_mask,                                  int)                                   \
 281   nonstatic_field(MethodData,                  _backedge_mask,                                int)                                   \
 282   nonstatic_field(DataLayout,                  _header._struct._tag,                          u1)                                    \
 283   nonstatic_field(DataLayout,                  _header._struct._flags,                        u1)                                    \
 284   nonstatic_field(DataLayout,                  _header._struct._bci,                          u2)                                    \
 285   nonstatic_field(DataLayout,                  _header._struct._traps,                        u4)                                    \
 286   nonstatic_field(DataLayout,                  _cells[0],                                     intptr_t)                              \
 287   nonstatic_field(MethodCounters,              _nmethod_age,                                  int)                                   \
 288   nonstatic_field(MethodCounters,              _interpreter_invocation_limit,                 int)                                   \
 289   nonstatic_field(MethodCounters,              _interpreter_backward_branch_limit,            int)                                   \
 290   nonstatic_field(MethodCounters,              _interpreter_profile_limit,                    int)                                   \
 291   nonstatic_field(MethodCounters,              _invoke_mask,                                  int)                                   \
 292   nonstatic_field(MethodCounters,              _backedge_mask,                                int)                                   \
 293   COMPILER2_OR_JVMCI_PRESENT(nonstatic_field(MethodCounters, _interpreter_invocation_count,   int))                                  \
 294   COMPILER2_OR_JVMCI_PRESENT(nonstatic_field(MethodCounters, _interpreter_throwout_count,     u2))                                   \
 295   JVMTI_ONLY(nonstatic_field(MethodCounters,   _number_of_breakpoints,                        u2))                                   \
 296   nonstatic_field(MethodCounters,              _invocation_counter,                           InvocationCounter)                     \
 297   nonstatic_field(MethodCounters,              _backedge_counter,                             InvocationCounter)                     \
 298   nonstatic_field(Method,                      _constMethod,                                  ConstMethod*)                          \
 299   nonstatic_field(Method,                      _method_data,                                  MethodData*)                           \
 300   nonstatic_field(Method,                      _method_counters,                              MethodCounters*)                       \
 301   nonstatic_field(Method,                      _access_flags,                                 AccessFlags)                           \
 302   nonstatic_field(Method,                      _vtable_index,                                 int)                                   \
 303   nonstatic_field(Method,                      _intrinsic_id,                                 u2)                                    \
 304   nonstatic_field(Method,                      _flags,                                        u2)                                    \
 305   nonproduct_nonstatic_field(Method,           _compiled_invocation_count,                    int)                                   \
 306   volatile_nonstatic_field(Method,             _code,                                         CompiledMethod*)                       \
 307   nonstatic_field(Method,                      _i2i_entry,                                    address)                               \
 308   volatile_nonstatic_field(Method,             _from_compiled_entry,                          address)                               \
 309   volatile_nonstatic_field(Method,             _from_interpreted_entry,                       address)                               \
 310   volatile_nonstatic_field(ConstMethod,        _fingerprint,                                  uint64_t)                              \
 311   nonstatic_field(ConstMethod,                 _constants,                                    ConstantPool*)                         \
 312   nonstatic_field(ConstMethod,                 _stackmap_data,                                Array&lt;u1&gt;*)                            \
 313   nonstatic_field(ConstMethod,                 _constMethod_size,                             int)                                   \
 314   nonstatic_field(ConstMethod,                 _flags,                                        u2)                                    \
 315   nonstatic_field(ConstMethod,                 _code_size,                                    u2)                                    \
 316   nonstatic_field(ConstMethod,                 _name_index,                                   u2)                                    \
 317   nonstatic_field(ConstMethod,                 _signature_index,                              u2)                                    \
 318   nonstatic_field(ConstMethod,                 _method_idnum,                                 u2)                                    \
 319   nonstatic_field(ConstMethod,                 _max_stack,                                    u2)                                    \
 320   nonstatic_field(ConstMethod,                 _max_locals,                                   u2)                                    \
 321   nonstatic_field(ConstMethod,                 _size_of_parameters,                           u2)                                    \
 322   nonstatic_field(ObjArrayKlass,               _element_klass,                                Klass*)                                \
 323   nonstatic_field(ObjArrayKlass,               _bottom_klass,                                 Klass*)                                \
 324   volatile_nonstatic_field(Symbol,             _hash_and_refcount,                            unsigned int)                          \
 325   nonstatic_field(Symbol,                      _length,                                       u2)                                    \
 326   unchecked_nonstatic_field(Symbol,            _body,                                         sizeof(u1)) /* NOTE: no type */        \
 327   nonstatic_field(Symbol,                      _body[0],                                      u1)                                    \
 328   nonstatic_field(TypeArrayKlass,              _max_length,                                   jint)                                  \
 329   nonstatic_field(OopHandle,                   _obj,                                          oop*)                                  \
 330                                                                                                                                      \
 331   /***********************/                                                                                                          \
 332   /* Constant Pool Cache */                                                                                                          \
 333   /***********************/                                                                                                          \
 334                                                                                                                                      \
 335   volatile_nonstatic_field(ConstantPoolCacheEntry,      _indices,                             intx)                                  \
 336   volatile_nonstatic_field(ConstantPoolCacheEntry,      _f1,                                  Metadata*)                             \
 337   volatile_nonstatic_field(ConstantPoolCacheEntry,      _f2,                                  intx)                                  \
 338   volatile_nonstatic_field(ConstantPoolCacheEntry,      _flags,                               intx)                                  \
 339                                                                                                                                      \
 340   /********************************/                                                                                                 \
 341   /* MethodOop-related structures */                                                                                                 \
 342   /********************************/                                                                                                 \
 343                                                                                                                                      \
 344   nonstatic_field(CheckedExceptionElement,     class_cp_index,                                u2)                                    \
 345   nonstatic_field(LocalVariableTableElement,   start_bci,                                     u2)                                    \
 346   nonstatic_field(LocalVariableTableElement,   length,                                        u2)                                    \
 347   nonstatic_field(LocalVariableTableElement,   name_cp_index,                                 u2)                                    \
 348   nonstatic_field(LocalVariableTableElement,   descriptor_cp_index,                           u2)                                    \
 349   nonstatic_field(LocalVariableTableElement,   signature_cp_index,                            u2)                                    \
 350   nonstatic_field(LocalVariableTableElement,   slot,                                          u2)                                    \
 351   nonstatic_field(ExceptionTableElement,       start_pc,                                      u2)                                    \
 352   nonstatic_field(ExceptionTableElement,       end_pc,                                        u2)                                    \
 353   nonstatic_field(ExceptionTableElement,       handler_pc,                                    u2)                                    \
 354   nonstatic_field(ExceptionTableElement,       catch_type_index,                              u2)                                    \
 355   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _orig_bytecode,                                Bytecodes::Code))                      \
 356   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _bci,                                          int))                                  \
 357   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _name_index,                                   u2))                                   \
 358   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _signature_index,                              u2))                                   \
 359   JVMTI_ONLY(nonstatic_field(BreakpointInfo,   _next,                                         BreakpointInfo*))                      \
 360   /***********/                                                                                                                      \
 361   /* JNI IDs */                                                                                                                      \
 362   /***********/                                                                                                                      \
 363                                                                                                                                      \
 364   nonstatic_field(JNIid,                       _holder,                                       Klass*)                                \
 365   nonstatic_field(JNIid,                       _next,                                         JNIid*)                                \
 366   nonstatic_field(JNIid,                       _offset,                                       int)                                   \
 367                                                                                                                                      \
 368   /************/                                                                                                                     \
 369   /* Universe */                                                                                                                     \
 370   /************/                                                                                                                     \
 371                                                                                                                                      \
 372      static_field(Universe,                    _mirrors[0],                                   oop)                                   \
 373      static_field(Universe,                    _main_thread_group,                            oop)                                   \
 374      static_field(Universe,                    _system_thread_group,                          oop)                                   \
 375      static_field(Universe,                    _the_empty_class_klass_array,                  objArrayOop)                           \
 376      static_field(Universe,                    _null_ptr_exception_instance,                  oop)                                   \
 377      static_field(Universe,                    _arithmetic_exception_instance,                oop)                                   \
 378      static_field(Universe,                    _vm_exception,                                 oop)                                   \
 379      static_field(Universe,                    _collectedHeap,                                CollectedHeap*)                        \
 380      static_field(Universe,                    _base_vtable_size,                             int)                                   \
 381      static_field(Universe,                    _bootstrapping,                                bool)                                  \
 382      static_field(Universe,                    _fully_initialized,                            bool)                                  \
 383      static_field(Universe,                    _verify_count,                                 int)                                   \
 384      static_field(Universe,                    _verify_oop_mask,                              uintptr_t)                             \
 385      static_field(Universe,                    _verify_oop_bits,                              uintptr_t)                             \
 386      static_field(Universe,                    _non_oop_bits,                                 intptr_t)                              \
 387                                                                                                                                      \
 388   /******************/                                                                                                               \
 389   /* CompressedOops */                                                                                                               \
 390   /******************/                                                                                                               \
 391                                                                                                                                      \
 392      static_field(CompressedOops,              _narrow_oop._base,                             address)                               \
 393      static_field(CompressedOops,              _narrow_oop._shift,                            int)                                   \
 394      static_field(CompressedOops,              _narrow_oop._use_implicit_null_checks,         bool)                                  \
 395                                                                                                                                      \
 396   /***************************/                                                                                                      \
 397   /* CompressedKlassPointers */                                                                                                      \
 398   /***************************/                                                                                                      \
 399                                                                                                                                      \
 400      static_field(CompressedKlassPointers,     _narrow_klass._base,                           address)                               \
 401      static_field(CompressedKlassPointers,     _narrow_klass._shift,                          int)                                   \
 402                                                                                                                                      \
 403   /******/                                                                                                                           \
 404   /* os */                                                                                                                           \
 405   /******/                                                                                                                           \
 406                                                                                                                                      \
 407      static_field(os,                          _polling_page,                                 address)                               \
 408                                                                                                                                      \
 409   /**********/                                                                                                                       \
 410   /* Memory */                                                                                                                       \
 411   /**********/                                                                                                                       \
 412                                                                                                                                      \
 413      static_field(MetaspaceObj,                _shared_metaspace_base,                        void*)                                 \
 414      static_field(MetaspaceObj,                _shared_metaspace_top,                         void*)                                 \
 415   nonstatic_field(ThreadLocalAllocBuffer,      _start,                                        HeapWord*)                             \
 416   nonstatic_field(ThreadLocalAllocBuffer,      _top,                                          HeapWord*)                             \
 417   nonstatic_field(ThreadLocalAllocBuffer,      _end,                                          HeapWord*)                             \
 418   nonstatic_field(ThreadLocalAllocBuffer,      _pf_top,                                       HeapWord*)                             \
 419   nonstatic_field(ThreadLocalAllocBuffer,      _desired_size,                                 size_t)                                \
 420   nonstatic_field(ThreadLocalAllocBuffer,      _refill_waste_limit,                           size_t)                                \
 421      static_field(ThreadLocalAllocBuffer,      _reserve_for_allocation_prefetch,              int)                                   \
 422      static_field(ThreadLocalAllocBuffer,      _target_refills,                               unsigned)                              \
 423   nonstatic_field(ThreadLocalAllocBuffer,      _number_of_refills,                            unsigned)                              \
 424   nonstatic_field(ThreadLocalAllocBuffer,      _fast_refill_waste,                            unsigned)                              \
 425   nonstatic_field(ThreadLocalAllocBuffer,      _slow_refill_waste,                            unsigned)                              \
 426   nonstatic_field(ThreadLocalAllocBuffer,      _gc_waste,                                     unsigned)                              \
 427   nonstatic_field(ThreadLocalAllocBuffer,      _slow_allocations,                             unsigned)                              \
 428   nonstatic_field(VirtualSpace,                _low_boundary,                                 char*)                                 \
 429   nonstatic_field(VirtualSpace,                _high_boundary,                                char*)                                 \
 430   nonstatic_field(VirtualSpace,                _low,                                          char*)                                 \
 431   nonstatic_field(VirtualSpace,                _high,                                         char*)                                 \
 432   nonstatic_field(VirtualSpace,                _lower_high,                                   char*)                                 \
 433   nonstatic_field(VirtualSpace,                _middle_high,                                  char*)                                 \
 434   nonstatic_field(VirtualSpace,                _upper_high,                                   char*)                                 \
 435                                                                                                                                      \
 436   /************************/                                                                                                         \
 437   /* PerfMemory - jvmstat */                                                                                                         \
 438   /************************/                                                                                                         \
 439                                                                                                                                      \
 440   nonstatic_field(PerfDataPrologue,            magic,                                         jint)                                  \
 441   nonstatic_field(PerfDataPrologue,            byte_order,                                    jbyte)                                 \
 442   nonstatic_field(PerfDataPrologue,            major_version,                                 jbyte)                                 \
 443   nonstatic_field(PerfDataPrologue,            minor_version,                                 jbyte)                                 \
 444   nonstatic_field(PerfDataPrologue,            accessible,                                    jbyte)                                 \
 445   nonstatic_field(PerfDataPrologue,            used,                                          jint)                                  \
 446   nonstatic_field(PerfDataPrologue,            overflow,                                      jint)                                  \
 447   nonstatic_field(PerfDataPrologue,            mod_time_stamp,                                jlong)                                 \
 448   nonstatic_field(PerfDataPrologue,            entry_offset,                                  jint)                                  \
 449   nonstatic_field(PerfDataPrologue,            num_entries,                                   jint)                                  \
 450                                                                                                                                      \
 451   nonstatic_field(PerfDataEntry,               entry_length,                                  jint)                                  \
 452   nonstatic_field(PerfDataEntry,               name_offset,                                   jint)                                  \
 453   nonstatic_field(PerfDataEntry,               vector_length,                                 jint)                                  \
 454   nonstatic_field(PerfDataEntry,               data_type,                                     jbyte)                                 \
 455   nonstatic_field(PerfDataEntry,               flags,                                         jbyte)                                 \
 456   nonstatic_field(PerfDataEntry,               data_units,                                    jbyte)                                 \
 457   nonstatic_field(PerfDataEntry,               data_variability,                              jbyte)                                 \
 458   nonstatic_field(PerfDataEntry,               data_offset,                                   jint)                                  \
 459                                                                                                                                      \
 460      static_field(PerfMemory,                  _start,                                        char*)                                 \
 461      static_field(PerfMemory,                  _end,                                          char*)                                 \
 462      static_field(PerfMemory,                  _top,                                          char*)                                 \
 463      static_field(PerfMemory,                  _capacity,                                     size_t)                                \
 464      static_field(PerfMemory,                  _prologue,                                     PerfDataPrologue*)                     \
 465      static_field(PerfMemory,                  _initialized,                                  int)                                   \
 466                                                                                                                                      \
 467   /********************/                                                                                                             \
 468   /* SystemDictionary */                                                                                                             \
 469   /********************/                                                                                                             \
 470                                                                                                                                      \
 471      static_field(SystemDictionary,            WK_KLASS(Object_klass),                        InstanceKlass*)                        \
 472      static_field(SystemDictionary,            WK_KLASS(String_klass),                        InstanceKlass*)                        \
 473      static_field(SystemDictionary,            WK_KLASS(Class_klass),                         InstanceKlass*)                        \
 474      static_field(SystemDictionary,            WK_KLASS(ClassLoader_klass),                   InstanceKlass*)                        \
 475      static_field(SystemDictionary,            WK_KLASS(System_klass),                        InstanceKlass*)                        \
 476      static_field(SystemDictionary,            WK_KLASS(Thread_klass),                        InstanceKlass*)                        \
 477      static_field(SystemDictionary,            WK_KLASS(ThreadGroup_klass),                   InstanceKlass*)                        \
 478      static_field(SystemDictionary,            WK_KLASS(MethodHandle_klass),                  InstanceKlass*)                        \
 479                                                                                                                                      \
 480   /*************/                                                                                                                    \
 481   /* vmSymbols */                                                                                                                    \
 482   /*************/                                                                                                                    \
 483                                                                                                                                      \
 484      static_field(vmSymbols,                   _symbols[0],                                   Symbol*)                               \
 485                                                                                                                                      \
 486   /*******************/                                                                                                              \
 487   /* HashtableBucket */                                                                                                              \
 488   /*******************/                                                                                                              \
 489                                                                                                                                      \
 490   nonstatic_field(HashtableBucket&lt;mtInternal&gt;, _entry,                                        BasicHashtableEntry&lt;mtInternal&gt;*)      \
 491                                                                                                                                      \
 492   /******************/                                                                                                               \
 493   /* HashtableEntry */                                                                                                               \
 494   /******************/                                                                                                               \
 495                                                                                                                                      \
 496   nonstatic_field(BasicHashtableEntry&lt;mtInternal&gt;, _next,                                     BasicHashtableEntry&lt;mtInternal&gt;*)      \
 497   nonstatic_field(BasicHashtableEntry&lt;mtInternal&gt;, _hash,                                     unsigned int)                          \
 498   nonstatic_field(IntptrHashtableEntry,            _literal,                                  intptr_t)                              \
 499                                                                                                                                      \
 500   /*************/                                                                                                                    \
 501   /* Hashtable */                                                                                                                    \
 502   /*************/                                                                                                                    \
 503                                                                                                                                      \
 504   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _table_size,                                   int)                                   \
 505   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _buckets,                                      HashtableBucket&lt;mtInternal&gt;*)          \
 506   volatile_nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _free_list,                           BasicHashtableEntry&lt;mtInternal&gt;*)      \
 507   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _first_free_entry,                             char*)                                 \
 508   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _end_block,                                    char*)                                 \
 509   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _entry_size,                                   int)                                   \
 510                                                                                                                                      \
 511   /*******************/                                                                                                              \
 512   /* ClassLoaderData */                                                                                                              \
 513   /*******************/                                                                                                              \
 514   nonstatic_field(ClassLoaderData,             _class_loader,                                 OopHandle)                             \
 515   nonstatic_field(ClassLoaderData,             _next,                                         ClassLoaderData*)                      \
 516   volatile_nonstatic_field(ClassLoaderData,    _klasses,                                      Klass*)                                \
 517   nonstatic_field(ClassLoaderData,             _has_class_mirror_holder,                      bool)                                  \
 518   volatile_nonstatic_field(ClassLoaderData,    _dictionary,                                   Dictionary*)                           \
 519                                                                                                                                      \
 520   static_ptr_volatile_field(ClassLoaderDataGraph, _head,                                      ClassLoaderData*)                      \
 521                                                                                                                                      \
 522   /**********/                                                                                                                       \
 523   /* Arrays */                                                                                                                       \
 524   /**********/                                                                                                                       \
 525                                                                                                                                      \
 526   nonstatic_field(Array&lt;Klass*&gt;,               _length,                                       int)                                   \
 527   nonstatic_field(Array&lt;Klass*&gt;,               _data[0],                                      Klass*)                                \
 528                                                                                                                                      \
 529   /*******************/                                                                                                              \
 530   /* GrowableArrays  */                                                                                                              \
 531   /*******************/                                                                                                              \
 532                                                                                                                                      \
 533   nonstatic_field(GrowableArrayBase,           _len,                                          int)                                   \
 534   nonstatic_field(GrowableArrayBase,           _max,                                          int)                                   \
 535   nonstatic_field(GrowableArray&lt;int&gt;,          _data,                                         int*)                                  \
 536                                                                                                                                      \
 537   /********************************/                                                                                                 \
 538   /* CodeCache (NOTE: incomplete) */                                                                                                 \
 539   /********************************/                                                                                                 \
 540                                                                                                                                      \
 541      static_field(CodeCache,                   _heaps,                                        GrowableArray&lt;CodeHeap*&gt;*)             \
 542      static_field(CodeCache,                   _low_bound,                                    address)                               \
 543      static_field(CodeCache,                   _high_bound,                                   address)                               \
 544                                                                                                                                      \
 545   /*******************************/                                                                                                  \
 546   /* CodeHeap (NOTE: incomplete) */                                                                                                  \
 547   /*******************************/                                                                                                  \
 548                                                                                                                                      \
 549   nonstatic_field(CodeHeap,                    _memory,                                       VirtualSpace)                          \
 550   nonstatic_field(CodeHeap,                    _segmap,                                       VirtualSpace)                          \
 551   nonstatic_field(CodeHeap,                    _log2_segment_size,                            int)                                   \
 552   nonstatic_field(HeapBlock,                   _header,                                       HeapBlock::Header)                     \
 553   nonstatic_field(HeapBlock::Header,           _length,                                       size_t)                                \
 554   nonstatic_field(HeapBlock::Header,           _used,                                         bool)                                  \
 555                                                                                                                                      \
 556   /**********************************/                                                                                               \
 557   /* Interpreter (NOTE: incomplete) */                                                                                               \
 558   /**********************************/                                                                                               \
 559                                                                                                                                      \
 560      static_field(AbstractInterpreter,         _code,                                         StubQueue*)                            \
 561                                                                                                                                      \
 562   /****************************/                                                                                                     \
 563   /* Stubs (NOTE: incomplete) */                                                                                                     \
 564   /****************************/                                                                                                     \
 565                                                                                                                                      \
 566   nonstatic_field(StubQueue,                   _stub_buffer,                                  address)                               \
 567   nonstatic_field(StubQueue,                   _buffer_limit,                                 int)                                   \
 568   nonstatic_field(StubQueue,                   _queue_begin,                                  int)                                   \
 569   nonstatic_field(StubQueue,                   _queue_end,                                    int)                                   \
 570   nonstatic_field(StubQueue,                   _number_of_stubs,                              int)                                   \
 571   nonstatic_field(InterpreterCodelet,          _size,                                         int)                                   \
 572   nonstatic_field(InterpreterCodelet,          _description,                                  const char*)                           \
 573   nonstatic_field(InterpreterCodelet,          _bytecode,                                     Bytecodes::Code)                       \
 574                                                                                                                                      \
 575   /***********************************/                                                                                              \
 576   /* StubRoutines (NOTE: incomplete) */                                                                                              \
 577   /***********************************/                                                                                              \
 578                                                                                                                                      \
 579      static_field(StubRoutines,                _verify_oop_count,                             jint)                                  \
 580      static_field(StubRoutines,                _call_stub_return_address,                     address)                               \
 581      static_field(StubRoutines,                _aescrypt_encryptBlock,                        address)                               \
 582      static_field(StubRoutines,                _aescrypt_decryptBlock,                        address)                               \
 583      static_field(StubRoutines,                _cipherBlockChaining_encryptAESCrypt,          address)                               \
 584      static_field(StubRoutines,                _cipherBlockChaining_decryptAESCrypt,          address)                               \
 585      static_field(StubRoutines,                _electronicCodeBook_encryptAESCrypt,           address)                               \
 586      static_field(StubRoutines,                _electronicCodeBook_decryptAESCrypt,           address)                               \
 587      static_field(StubRoutines,                _counterMode_AESCrypt,                         address)                               \
 588      static_field(StubRoutines,                _ghash_processBlocks,                          address)                               \
 589      static_field(StubRoutines,                _base64_encodeBlock,                           address)                               \
 590      static_field(StubRoutines,                _updateBytesCRC32,                             address)                               \
 591      static_field(StubRoutines,                _crc_table_adr,                                address)                               \
 592      static_field(StubRoutines,                _crc32c_table_addr,                            address)                               \
 593      static_field(StubRoutines,                _updateBytesCRC32C,                            address)                               \
 594      static_field(StubRoutines,                _multiplyToLen,                                address)                               \
 595      static_field(StubRoutines,                _squareToLen,                                  address)                               \
 596      static_field(StubRoutines,                _bigIntegerRightShiftWorker,                   address)                               \
 597      static_field(StubRoutines,                _bigIntegerLeftShiftWorker,                    address)                               \
 598      static_field(StubRoutines,                _mulAdd,                                       address)                               \
 599      static_field(StubRoutines,                _dexp,                                         address)                               \
 600      static_field(StubRoutines,                _dlog,                                         address)                               \
 601      static_field(StubRoutines,                _dlog10,                                       address)                               \
 602      static_field(StubRoutines,                _dpow,                                         address)                               \
 603      static_field(StubRoutines,                _dsin,                                         address)                               \
 604      static_field(StubRoutines,                _dcos,                                         address)                               \
 605      static_field(StubRoutines,                _dtan,                                         address)                               \
 606      static_field(StubRoutines,                _vectorizedMismatch,                           address)                               \
 607      static_field(StubRoutines,                _jbyte_arraycopy,                              address)                               \
 608      static_field(StubRoutines,                _jshort_arraycopy,                             address)                               \
 609      static_field(StubRoutines,                _jint_arraycopy,                               address)                               \
 610      static_field(StubRoutines,                _jlong_arraycopy,                              address)                               \
 611      static_field(StubRoutines,                _oop_arraycopy,                                address)                               \
 612      static_field(StubRoutines,                _oop_arraycopy_uninit,                         address)                               \
 613      static_field(StubRoutines,                _jbyte_disjoint_arraycopy,                     address)                               \
 614      static_field(StubRoutines,                _jshort_disjoint_arraycopy,                    address)                               \
 615      static_field(StubRoutines,                _jint_disjoint_arraycopy,                      address)                               \
 616      static_field(StubRoutines,                _jlong_disjoint_arraycopy,                     address)                               \
 617      static_field(StubRoutines,                _oop_disjoint_arraycopy,                       address)                               \
 618      static_field(StubRoutines,                _oop_disjoint_arraycopy_uninit,                address)                               \
 619      static_field(StubRoutines,                _arrayof_jbyte_arraycopy,                      address)                               \
 620      static_field(StubRoutines,                _arrayof_jshort_arraycopy,                     address)                               \
 621      static_field(StubRoutines,                _arrayof_jint_arraycopy,                       address)                               \
 622      static_field(StubRoutines,                _arrayof_jlong_arraycopy,                      address)                               \
 623      static_field(StubRoutines,                _arrayof_oop_arraycopy,                        address)                               \
 624      static_field(StubRoutines,                _arrayof_oop_arraycopy_uninit,                 address)                               \
 625      static_field(StubRoutines,                _arrayof_jbyte_disjoint_arraycopy,             address)                               \
 626      static_field(StubRoutines,                _arrayof_jshort_disjoint_arraycopy,            address)                               \
 627      static_field(StubRoutines,                _arrayof_jint_disjoint_arraycopy,              address)                               \
 628      static_field(StubRoutines,                _arrayof_jlong_disjoint_arraycopy,             address)                               \
 629      static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy,               address)                               \
 630      static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy_uninit,        address)                               \
 631      static_field(StubRoutines,                _checkcast_arraycopy,                          address)                               \
 632      static_field(StubRoutines,                _checkcast_arraycopy_uninit,                   address)                               \
 633      static_field(StubRoutines,                _unsafe_arraycopy,                             address)                               \
 634      static_field(StubRoutines,                _generic_arraycopy,                            address)                               \
 635                                                                                                                                      \
 636   /*****************/                                                                                                                \
 637   /* SharedRuntime */                                                                                                                \
 638   /*****************/                                                                                                                \
 639                                                                                                                                      \
 640      static_field(SharedRuntime,               _wrong_method_blob,                            RuntimeStub*)                          \
 641      static_field(SharedRuntime,               _ic_miss_blob,                                 RuntimeStub*)                          \
 642      static_field(SharedRuntime,               _deopt_blob,                                   DeoptimizationBlob*)                   \
 643                                                                                                                                      \
 644   /***************************************/                                                                                          \
 645   /* PcDesc and other compiled code info */                                                                                          \
 646   /***************************************/                                                                                          \
 647                                                                                                                                      \
 648   nonstatic_field(PcDesc,                      _pc_offset,                                    int)                                   \
 649   nonstatic_field(PcDesc,                      _scope_decode_offset,                          int)                                   \
 650   nonstatic_field(PcDesc,                      _obj_decode_offset,                            int)                                   \
 651   nonstatic_field(PcDesc,                      _flags,                                        int)                                   \
 652                                                                                                                                      \
 653   /***************************************************/                                                                              \
 654   /* CodeBlobs (NOTE: incomplete, but only a little) */                                                                              \
 655   /***************************************************/                                                                              \
 656                                                                                                                                      \
 657   nonstatic_field(CodeBlob,                 _name,                                   const char*)                                    \
 658   nonstatic_field(CodeBlob,                 _size,                                   int)                                            \
 659   nonstatic_field(CodeBlob,                 _header_size,                            int)                                            \
 660   nonstatic_field(CodeBlob,                 _frame_complete_offset,                  int)                                            \
 661   nonstatic_field(CodeBlob,                 _data_offset,                            int)                                            \
 662   nonstatic_field(CodeBlob,                 _frame_size,                             int)                                            \
 663   nonstatic_field(CodeBlob,                 _oop_maps,                               ImmutableOopMapSet*)                            \
 664   nonstatic_field(CodeBlob,                 _code_begin,                             address)                                        \
 665   nonstatic_field(CodeBlob,                 _code_end,                               address)                                        \
 666   nonstatic_field(CodeBlob,                 _content_begin,                          address)                                        \
 667   nonstatic_field(CodeBlob,                 _data_end,                               address)                                        \
 668                                                                                                                                      \
 669   nonstatic_field(DeoptimizationBlob,          _unpack_offset,                                int)                                   \
 670                                                                                                                                      \
 671   nonstatic_field(RuntimeStub,                 _caller_must_gc_arguments,                     bool)                                  \
 672                                                                                                                                      \
 673   /********************************************************/                                                                         \
 674   /* CompiledMethod (NOTE: incomplete, but only a little) */                                                                         \
 675   /********************************************************/                                                                         \
 676                                                                                                                                      \
 677   nonstatic_field(CompiledMethod,                     _method,                                       Method*)                        \
 678   volatile_nonstatic_field(CompiledMethod,            _exception_cache,                              ExceptionCache*)                \
 679   nonstatic_field(CompiledMethod,                     _scopes_data_begin,                            address)                        \
 680   nonstatic_field(CompiledMethod,                     _deopt_handler_begin,                          address)                        \
 681   nonstatic_field(CompiledMethod,                     _deopt_mh_handler_begin,                       address)                        \
 682                                                                                                                                      \
 683   /**************************************************/                                                                               \
 684   /* NMethods (NOTE: incomplete, but only a little) */                                                                               \
 685   /**************************************************/                                                                               \
 686                                                                                                                                      \
 687   nonstatic_field(nmethod,                     _entry_bci,                                    int)                                   \
 688   nonstatic_field(nmethod,                     _osr_link,                                     nmethod*)                              \
 689   nonstatic_field(nmethod,                     _state,                                        volatile signed char)                  \
 690   nonstatic_field(nmethod,                     _exception_offset,                             int)                                   \
 691   nonstatic_field(nmethod,                     _orig_pc_offset,                               int)                                   \
 692   nonstatic_field(nmethod,                     _stub_offset,                                  int)                                   \
 693   nonstatic_field(nmethod,                     _consts_offset,                                int)                                   \
 694   nonstatic_field(nmethod,                     _oops_offset,                                  int)                                   \
 695   nonstatic_field(nmethod,                     _metadata_offset,                              int)                                   \
 696   nonstatic_field(nmethod,                     _scopes_pcs_offset,                            int)                                   \
 697   nonstatic_field(nmethod,                     _dependencies_offset,                          int)                                   \
 698   nonstatic_field(nmethod,                     _handler_table_offset,                         int)                                   \
 699   nonstatic_field(nmethod,                     _nul_chk_table_offset,                         int)                                   \
 700   nonstatic_field(nmethod,                     _nmethod_end_offset,                           int)                                   \
 701   nonstatic_field(nmethod,                     _entry_point,                                  address)                               \
 702   nonstatic_field(nmethod,                     _verified_entry_point,                         address)                               \
 703   nonstatic_field(nmethod,                     _osr_entry_point,                              address)                               \
 704   volatile_nonstatic_field(nmethod,            _lock_count,                                   jint)                                  \
 705   volatile_nonstatic_field(nmethod,            _stack_traversal_mark,                         long)                                  \
 706   nonstatic_field(nmethod,                     _compile_id,                                   int)                                   \
 707   nonstatic_field(nmethod,                     _comp_level,                                   int)                                   \
 708                                                                                                                                      \
 709   unchecked_c2_static_field(Deoptimization,    _trap_reason_name,                             void*)                                 \
 710                                                                                                                                      \
 711   nonstatic_field(Deoptimization::UnrollBlock, _size_of_deoptimized_frame,                    int)                                   \
 712   nonstatic_field(Deoptimization::UnrollBlock, _caller_adjustment,                            int)                                   \
 713   nonstatic_field(Deoptimization::UnrollBlock, _number_of_frames,                             int)                                   \
 714   nonstatic_field(Deoptimization::UnrollBlock, _total_frame_sizes,                            int)                                   \
 715   nonstatic_field(Deoptimization::UnrollBlock, _unpack_kind,                                  int)                                   \
 716   nonstatic_field(Deoptimization::UnrollBlock, _frame_sizes,                                  intptr_t*)                             \
 717   nonstatic_field(Deoptimization::UnrollBlock, _frame_pcs,                                    address*)                              \
 718   nonstatic_field(Deoptimization::UnrollBlock, _register_block,                               intptr_t*)                             \
 719   nonstatic_field(Deoptimization::UnrollBlock, _return_type,                                  BasicType)                             \
 720   nonstatic_field(Deoptimization::UnrollBlock, _initial_info,                                 intptr_t)                              \
 721   nonstatic_field(Deoptimization::UnrollBlock, _caller_actual_parameters,                     int)                                   \
 722                                                                                                                                      \
 723   /********************************/                                                                                                 \
 724   /* JavaCalls (NOTE: incomplete) */                                                                                                 \
 725   /********************************/                                                                                                 \
 726                                                                                                                                      \
 727   nonstatic_field(JavaCallWrapper,             _anchor,                                       JavaFrameAnchor)                       \
 728   /********************************/                                                                                                 \
 729   /* JavaFrameAnchor (NOTE: incomplete) */                                                                                           \
 730   /********************************/                                                                                                 \
 731   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_sp,                                 intptr_t*)                             \
 732   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_pc,                                 address)                               \
 733                                                                                                                                      \
 734   /******************************/                                                                                                   \
 735   /* Threads (NOTE: incomplete) */                                                                                                   \
 736   /******************************/                                                                                                   \
 737                                                                                                                                      \
 738   static_field(Threads,                     _number_of_threads,                               int)                                   \
 739   static_field(Threads,                     _number_of_non_daemon_threads,                    int)                                   \
 740   static_field(Threads,                     _return_code,                                     int)                                   \
 741                                                                                                                                      \
 742   static_ptr_volatile_field(ThreadsSMRSupport, _java_thread_list,                             ThreadsList*)                          \
 743   nonstatic_field(ThreadsList,                 _length,                                       const uint)                            \
 744   nonstatic_field(ThreadsList,                 _threads,                                      JavaThread *const *const)              \
 745                                                                                                                                      \
 746   nonstatic_field(ThreadShadow,                _pending_exception,                            oop)                                   \
 747   nonstatic_field(ThreadShadow,                _exception_file,                               const char*)                           \
 748   nonstatic_field(ThreadShadow,                _exception_line,                               int)                                   \
 749   volatile_nonstatic_field(Thread,             _suspend_flags,                                uint32_t)                              \
 750   nonstatic_field(Thread,                      _active_handles,                               JNIHandleBlock*)                       \
 751   nonstatic_field(Thread,                      _tlab,                                         ThreadLocalAllocBuffer)                \
 752   nonstatic_field(Thread,                      _allocated_bytes,                              jlong)                                 \
 753   nonstatic_field(Thread,                      _current_pending_monitor,                      ObjectMonitor*)                        \
 754   nonstatic_field(Thread,                      _current_pending_monitor_is_from_java,         bool)                                  \
 755   nonstatic_field(Thread,                      _current_waiting_monitor,                      ObjectMonitor*)                        \
 756   nonstatic_field(NamedThread,                 _name,                                         char*)                                 \
 757   nonstatic_field(NamedThread,                 _processed_thread,                             JavaThread*)                           \
 758   nonstatic_field(JavaThread,                  _threadObj,                                    oop)                                   \
 759   nonstatic_field(JavaThread,                  _anchor,                                       JavaFrameAnchor)                       \
 760   nonstatic_field(JavaThread,                  _vm_result,                                    oop)                                   \
 761   nonstatic_field(JavaThread,                  _vm_result_2,                                  Metadata*)                             \
 762   nonstatic_field(JavaThread,                  _pending_async_exception,                      oop)                                   \
 763   volatile_nonstatic_field(JavaThread,         _exception_oop,                                oop)                                   \
 764   volatile_nonstatic_field(JavaThread,         _exception_pc,                                 address)                               \
 765   volatile_nonstatic_field(JavaThread,         _is_method_handle_return,                      int)                                   \
 766   nonstatic_field(JavaThread,                  _special_runtime_exit_condition,               JavaThread::AsyncRequests)             \
 767   nonstatic_field(JavaThread,                  _saved_exception_pc,                           address)                               \
 768   volatile_nonstatic_field(JavaThread,         _thread_state,                                 JavaThreadState)                       \
 769   nonstatic_field(JavaThread,                  _osthread,                                     OSThread*)                             \
 770   nonstatic_field(JavaThread,                  _stack_base,                                   address)                               \
 771   nonstatic_field(JavaThread,                  _stack_size,                                   size_t)                                \
 772   nonstatic_field(JavaThread,                  _vframe_array_head,                            vframeArray*)                          \
 773   nonstatic_field(JavaThread,                  _vframe_array_last,                            vframeArray*)                          \
 774   volatile_nonstatic_field(JavaThread,         _terminated,                                   JavaThread::TerminatedTypes)           \
 775   nonstatic_field(Thread,                      _resource_area,                                ResourceArea*)                         \
 776   nonstatic_field(CompilerThread,              _env,                                          ciEnv*)                                \
 777                                                                                                                                      \
 778   /************/                                                                                                                     \
 779   /* OSThread */                                                                                                                     \
 780   /************/                                                                                                                     \
 781                                                                                                                                      \
 782   volatile_nonstatic_field(OSThread,           _state,                                        ThreadState)                           \
 783                                                                                                                                      \
 784   /************************/                                                                                                         \
 785   /* ImmutableOopMap      */                                                                                                         \
 786   /************************/                                                                                                         \
 787                                                                                                                                      \
 788   nonstatic_field(ImmutableOopMapSet,          _count,                                        int)                                   \
 789   nonstatic_field(ImmutableOopMapSet,          _size,                                         int)                                   \
 790                                                                                                                                      \
 791   nonstatic_field(ImmutableOopMapPair,         _pc_offset,                                    int)                                   \
 792   nonstatic_field(ImmutableOopMapPair,         _oopmap_offset,                                int)                                   \
 793                                                                                                                                      \
 794   nonstatic_field(ImmutableOopMap,             _count,                                        int)                                   \
 795                                                                                                                                      \
 796   /*********************************/                                                                                                \
 797   /* JNIHandles and JNIHandleBlock */                                                                                                \
 798   /*********************************/                                                                                                \
 799   static_field(JNIHandles,                     _global_handles,                               OopStorage*)                           \
 800   static_field(JNIHandles,                     _weak_global_handles,                          OopStorage*)                           \
 801   unchecked_nonstatic_field(JNIHandleBlock,    _handles,       JNIHandleBlock::block_size_in_oops * sizeof(Oop)) /* Note: no type */ \
 802   nonstatic_field(JNIHandleBlock,              _top,                                          int)                                   \
 803   nonstatic_field(JNIHandleBlock,              _next,                                         JNIHandleBlock*)                       \
 804                                                                                                                                      \
 805   /********************/                                                                                                             \
 806   /* CompressedStream */                                                                                                             \
 807   /********************/                                                                                                             \
 808                                                                                                                                      \
 809   nonstatic_field(CompressedStream,            _buffer,                                       u_char*)                               \
 810   nonstatic_field(CompressedStream,            _position,                                     int)                                   \
 811                                                                                                                                      \
 812   /*********************************/                                                                                                \
 813   /* VMRegImpl (NOTE: incomplete) */                                                                                                 \
 814   /*********************************/                                                                                                \
 815                                                                                                                                      \
 816      static_field(VMRegImpl,                   regName[0],                                    const char*)                           \
 817      static_field(VMRegImpl,                   stack0,                                        VMReg)                                 \
 818                                                                                                                                      \
 819   /*******************************/                                                                                                  \
 820   /* Runtime1 (NOTE: incomplete) */                                                                                                  \
 821   /*******************************/                                                                                                  \
 822                                                                                                                                      \
 823   unchecked_c1_static_field(Runtime1,          _blobs,                                 sizeof(Runtime1::_blobs)) /* NOTE: no type */ \
 824                                                                                                                                      \
 825   /**************/                                                                                                                   \
 826   /* CI */                                                                                                                           \
 827   /************/                                                                                                                     \
 828                                                                                                                                      \
 829   nonstatic_field(ciEnv,                       _compiler_data,                                void*)                                 \
 830   nonstatic_field(ciEnv,                       _failure_reason,                               const char*)                           \
 831   nonstatic_field(ciEnv,                       _factory,                                      ciObjectFactory*)                      \
 832   nonstatic_field(ciEnv,                       _dependencies,                                 Dependencies*)                         \
 833   nonstatic_field(ciEnv,                       _task,                                         CompileTask*)                          \
 834   nonstatic_field(ciEnv,                       _arena,                                        Arena*)                                \
 835                                                                                                                                      \
 836   nonstatic_field(ciBaseObject,                _ident,                                        uint)                                  \
 837                                                                                                                                      \
 838   nonstatic_field(ciObject,                    _handle,                                       jobject)                               \
 839   nonstatic_field(ciObject,                    _klass,                                        ciKlass*)                              \
 840                                                                                                                                      \
 841   nonstatic_field(ciMetadata,                  _metadata,                                     Metadata*)                             \
 842                                                                                                                                      \
 843   nonstatic_field(ciSymbol,                    _symbol,                                       Symbol*)                               \
 844                                                                                                                                      \
 845   nonstatic_field(ciType,                      _basic_type,                                   BasicType)                             \
 846                                                                                                                                      \
 847   nonstatic_field(ciKlass,                     _name,                                         ciSymbol*)                             \
 848                                                                                                                                      \
 849   nonstatic_field(ciArrayKlass,                _dimension,                                    jint)                                  \
 850                                                                                                                                      \
 851   nonstatic_field(ciObjArrayKlass,             _element_klass,                                ciKlass*)                              \
 852   nonstatic_field(ciObjArrayKlass,             _base_element_klass,                           ciKlass*)                              \
 853                                                                                                                                      \
 854   nonstatic_field(ciInstanceKlass,             _init_state,                                   InstanceKlass::ClassState)             \
 855   nonstatic_field(ciInstanceKlass,             _is_shared,                                    bool)                                  \
 856                                                                                                                                      \
 857   nonstatic_field(ciMethod,                    _interpreter_invocation_count,                 int)                                   \
 858   nonstatic_field(ciMethod,                    _interpreter_throwout_count,                   int)                                   \
 859   nonstatic_field(ciMethod,                    _instructions_size,                            int)                                   \
 860                                                                                                                                      \
 861   nonstatic_field(ciMethodData,                _data_size,                                    int)                                   \
 862   nonstatic_field(ciMethodData,                _state,                                        u_char)                                \
 863   nonstatic_field(ciMethodData,                _extra_data_size,                              int)                                   \
 864   nonstatic_field(ciMethodData,                _data,                                         intptr_t*)                             \
 865   nonstatic_field(ciMethodData,                _hint_di,                                      int)                                   \
 866   nonstatic_field(ciMethodData,                _eflags,                                       intx)                                  \
 867   nonstatic_field(ciMethodData,                _arg_local,                                    intx)                                  \
 868   nonstatic_field(ciMethodData,                _arg_stack,                                    intx)                                  \
 869   nonstatic_field(ciMethodData,                _arg_returned,                                 intx)                                  \
 870   nonstatic_field(ciMethodData,                _current_mileage,                              int)                                   \
 871   nonstatic_field(ciMethodData,                _orig,                                         MethodData)                            \
 872                                                                                                                                      \
 873   nonstatic_field(ciField,                     _holder,                                       ciInstanceKlass*)                      \
 874   nonstatic_field(ciField,                     _name,                                         ciSymbol*)                             \
 875   nonstatic_field(ciField,                     _signature,                                    ciSymbol*)                             \
 876   nonstatic_field(ciField,                     _offset,                                       int)                                   \
 877   nonstatic_field(ciField,                     _is_constant,                                  bool)                                  \
 878   nonstatic_field(ciField,                     _constant_value,                               ciConstant)                            \
 879                                                                                                                                      \
 880   nonstatic_field(ciObjectFactory,             _ci_metadata,                                  GrowableArray&lt;ciMetadata*&gt;*)           \
 881   nonstatic_field(ciObjectFactory,             _symbols,                                      GrowableArray&lt;ciSymbol*&gt;*)             \
 882   nonstatic_field(ciObjectFactory,             _unloaded_methods,                             GrowableArray&lt;ciMethod*&gt;*)             \
 883                                                                                                                                      \
 884   nonstatic_field(ciConstant,                  _type,                                         BasicType)                             \
 885   nonstatic_field(ciConstant,                  _value._int,                                   jint)                                  \
 886   nonstatic_field(ciConstant,                  _value._long,                                  jlong)                                 \
 887   nonstatic_field(ciConstant,                  _value._float,                                 jfloat)                                \
 888   nonstatic_field(ciConstant,                  _value._double,                                jdouble)                               \
 889   nonstatic_field(ciConstant,                  _value._object,                                ciObject*)                             \
 890                                                                                                                                      \
 891   /************/                                                                                                                     \
 892   /* Monitors */                                                                                                                     \
 893   /************/                                                                                                                     \
 894                                                                                                                                      \
 895   volatile_nonstatic_field(ObjectMonitor,      _header,                                       markWord)                              \
 896   unchecked_nonstatic_field(ObjectMonitor,     _object,                                       sizeof(void *)) /* NOTE: no type */    \
 897   unchecked_nonstatic_field(ObjectMonitor,     _owner,                                        sizeof(void *)) /* NOTE: no type */    \
 898   volatile_nonstatic_field(ObjectMonitor,      _next_om,                                      ObjectMonitor*)                        \
 899   volatile_nonstatic_field(BasicLock,          _displaced_header,                             markWord)                              \
 900   nonstatic_field(ObjectMonitor,               _contentions,                                  jint)                                  \
 901   volatile_nonstatic_field(ObjectMonitor,      _waiters,                                      jint)                                  \
 902   volatile_nonstatic_field(ObjectMonitor,      _recursions,                                   intx)                                  \
 903   nonstatic_field(BasicObjectLock,             _lock,                                         BasicLock)                             \
 904   nonstatic_field(BasicObjectLock,             _obj,                                          oop)                                   \
 905   static_field(ObjectSynchronizer,             g_block_list,                                  PaddedObjectMonitor*)                  \
 906                                                                                                                                      \
 907   /*********************/                                                                                                            \
 908   /* Matcher (C2 only) */                                                                                                            \
 909   /*********************/                                                                                                            \
 910                                                                                                                                      \
 911   unchecked_c2_static_field(Matcher,           _regEncode,                          sizeof(Matcher::_regEncode)) /* NOTE: no type */ \
 912                                                                                                                                      \
 913   c2_nonstatic_field(Node,                     _in,                                           Node**)                                \
 914   c2_nonstatic_field(Node,                     _out,                                          Node**)                                \
 915   c2_nonstatic_field(Node,                     _cnt,                                          node_idx_t)                            \
 916   c2_nonstatic_field(Node,                     _max,                                          node_idx_t)                            \
 917   c2_nonstatic_field(Node,                     _outcnt,                                       node_idx_t)                            \
 918   c2_nonstatic_field(Node,                     _outmax,                                       node_idx_t)                            \
 919   c2_nonstatic_field(Node,                     _idx,                                          const node_idx_t)                      \
 920   c2_nonstatic_field(Node,                     _class_id,                                     juint)                                 \
 921   c2_nonstatic_field(Node,                     _flags,                                        jushort)                               \
 922                                                                                                                                      \
 923   c2_nonstatic_field(Compile,                  _root,                                         RootNode*)                             \
 924   c2_nonstatic_field(Compile,                  _unique,                                       uint)                                  \
 925   c2_nonstatic_field(Compile,                  _entry_bci,                                    int)                                   \
 926   c2_nonstatic_field(Compile,                  _top,                                          Node*)                                 \
 927   c2_nonstatic_field(Compile,                  _cfg,                                          PhaseCFG*)                             \
 928   c2_nonstatic_field(Compile,                  _regalloc,                                     PhaseRegAlloc*)                        \
 929   c2_nonstatic_field(Compile,                  _method,                                       ciMethod*)                             \
 930   c2_nonstatic_field(Compile,                  _compile_id,                                   const int)                             \
 931   c2_nonstatic_field(Compile,                  _save_argument_registers,                      const bool)                            \
 932   c2_nonstatic_field(Compile,                  _subsume_loads,                                const bool)                            \
 933   c2_nonstatic_field(Compile,                  _do_escape_analysis,                           const bool)                            \
 934   c2_nonstatic_field(Compile,                  _eliminate_boxing,                             const bool)                            \
 935   c2_nonstatic_field(Compile,                  _ilt,                                          InlineTree*)                           \
 936                                                                                                                                      \
 937   c2_nonstatic_field(InlineTree,               _caller_jvms,                                  JVMState*)                             \
 938   c2_nonstatic_field(InlineTree,               _method,                                       ciMethod*)                             \
 939   c2_nonstatic_field(InlineTree,               _caller_tree,                                  InlineTree*)                           \
 940   c2_nonstatic_field(InlineTree,               _subtrees,                                     GrowableArray&lt;InlineTree*&gt;)            \
 941                                                                                                                                      \
 942   c2_nonstatic_field(OptoRegPair,              _first,                                        short)                                 \
 943   c2_nonstatic_field(OptoRegPair,              _second,                                       short)                                 \
 944                                                                                                                                      \
 945   c2_nonstatic_field(JVMState,                 _caller,                                       JVMState*)                             \
 946   c2_nonstatic_field(JVMState,                 _depth,                                        uint)                                  \
 947   c2_nonstatic_field(JVMState,                 _locoff,                                       uint)                                  \
 948   c2_nonstatic_field(JVMState,                 _stkoff,                                       uint)                                  \
 949   c2_nonstatic_field(JVMState,                 _monoff,                                       uint)                                  \
 950   c2_nonstatic_field(JVMState,                 _scloff,                                       uint)                                  \
 951   c2_nonstatic_field(JVMState,                 _endoff,                                       uint)                                  \
 952   c2_nonstatic_field(JVMState,                 _sp,                                           uint)                                  \
 953   c2_nonstatic_field(JVMState,                 _bci,                                          int)                                   \
 954   c2_nonstatic_field(JVMState,                 _method,                                       ciMethod*)                             \
 955   c2_nonstatic_field(JVMState,                 _map,                                          SafePointNode*)                        \
 956                                                                                                                                      \
 957   c2_nonstatic_field(SafePointNode,            _jvms,                                         JVMState* const)                       \
 958                                                                                                                                      \
 959   c2_nonstatic_field(MachSafePointNode,        _jvms,                                         JVMState*)                             \
 960   c2_nonstatic_field(MachSafePointNode,        _jvmadj,                                       uint)                                  \
 961                                                                                                                                      \
 962   c2_nonstatic_field(MachIfNode,               _prob,                                         jfloat)                                \
 963   c2_nonstatic_field(MachIfNode,               _fcnt,                                         jfloat)                                \
 964                                                                                                                                      \
 965   c2_nonstatic_field(MachJumpNode,             _probs,                                        jfloat*)                               \
 966                                                                                                                                      \
 967   c2_nonstatic_field(CallNode,                 _entry_point,                                  address)                               \
 968                                                                                                                                      \
 969   c2_nonstatic_field(CallJavaNode,             _method,                                       ciMethod*)                             \
 970                                                                                                                                      \
 971   c2_nonstatic_field(CallRuntimeNode,          _name,                                         const char*)                           \
 972                                                                                                                                      \
 973   c2_nonstatic_field(CallStaticJavaNode,       _name,                                         const char*)                           \
 974                                                                                                                                      \
 975   c2_nonstatic_field(MachCallJavaNode,         _method,                                       ciMethod*)                             \
 976   c2_nonstatic_field(MachCallJavaNode,         _bci,                                          int)                                   \
 977                                                                                                                                      \
 978   c2_nonstatic_field(MachCallStaticJavaNode,   _name,                                         const char*)                           \
 979                                                                                                                                      \
 980   c2_nonstatic_field(MachCallRuntimeNode,      _name,                                         const char*)                           \
 981                                                                                                                                      \
 982   c2_nonstatic_field(PhaseCFG,                 _number_of_blocks,                             uint)                                  \
 983   c2_nonstatic_field(PhaseCFG,                 _blocks,                                       Block_List)                            \
 984   c2_nonstatic_field(PhaseCFG,                 _node_to_block_mapping,                        Block_Array)                           \
 985   c2_nonstatic_field(PhaseCFG,                 _root_block,                                   Block*)                                \
 986                                                                                                                                      \
 987   c2_nonstatic_field(PhaseRegAlloc,            _node_regs,                                    OptoRegPair*)                          \
 988   c2_nonstatic_field(PhaseRegAlloc,            _node_regs_max_index,                          uint)                                  \
 989   c2_nonstatic_field(PhaseRegAlloc,            _framesize,                                    uint)                                  \
 990   c2_nonstatic_field(PhaseRegAlloc,            _max_reg,                                      OptoReg::Name)                         \
 991                                                                                                                                      \
 992   c2_nonstatic_field(PhaseChaitin,             _trip_cnt,                                     int)                                   \
 993   c2_nonstatic_field(PhaseChaitin,             _alternate,                                    int)                                   \
 994   c2_nonstatic_field(PhaseChaitin,             _lo_degree,                                    uint)                                  \
 995   c2_nonstatic_field(PhaseChaitin,             _lo_stk_degree,                                uint)                                  \
 996   c2_nonstatic_field(PhaseChaitin,             _hi_degree,                                    uint)                                  \
 997   c2_nonstatic_field(PhaseChaitin,             _simplified,                                   uint)                                  \
 998                                                                                                                                      \
 999   c2_nonstatic_field(Block,                    _nodes,                                        Node_List)                             \
1000   c2_nonstatic_field(Block,                    _succs,                                        Block_Array)                           \
1001   c2_nonstatic_field(Block,                    _num_succs,                                    uint)                                  \
1002   c2_nonstatic_field(Block,                    _pre_order,                                    uint)                                  \
1003   c2_nonstatic_field(Block,                    _dom_depth,                                    uint)                                  \
1004   c2_nonstatic_field(Block,                    _idom,                                         Block*)                                \
1005   c2_nonstatic_field(Block,                    _freq,                                         jdouble)                               \
1006                                                                                                                                      \
1007   c2_nonstatic_field(CFGElement,               _freq,                                         jdouble)                               \
1008                                                                                                                                      \
1009   c2_nonstatic_field(Block_List,               _cnt,                                          uint)                                  \
1010                                                                                                                                      \
1011   c2_nonstatic_field(Block_Array,              _size,                                         uint)                                  \
1012   c2_nonstatic_field(Block_Array,              _blocks,                                       Block**)                               \
1013   c2_nonstatic_field(Block_Array,              _arena,                                        Arena*)                                \
1014                                                                                                                                      \
1015   c2_nonstatic_field(Node_List,                _cnt,                                          uint)                                  \
1016                                                                                                                                      \
1017   c2_nonstatic_field(Node_Array,               _max,                                          uint)                                  \
1018   c2_nonstatic_field(Node_Array,               _nodes,                                        Node**)                                \
1019   c2_nonstatic_field(Node_Array,               _a,                                            Arena*)                                \
1020                                                                                                                                      \
1021                                                                                                                                      \
1022   /*********************/                                                                                                            \
1023   /* -XX flags         */                                                                                                            \
1024   /*********************/                                                                                                            \
1025                                                                                                                                      \
1026   nonstatic_field(JVMFlag,                     _type,                                         const char*)                           \
1027   nonstatic_field(JVMFlag,                     _name,                                         const char*)                           \
1028   unchecked_nonstatic_field(JVMFlag,           _addr,                                         sizeof(void*)) /* NOTE: no type */     \
1029   nonstatic_field(JVMFlag,                     _flags,                                        JVMFlag::Flags)                        \
1030      static_field(JVMFlag,                     flags,                                         JVMFlag*)                              \
1031      static_field(JVMFlag,                     numFlags,                                      size_t)                                \
1032                                                                                                                                      \
1033   /*************************/                                                                                                        \
1034   /* JDK / VM version info */                                                                                                        \
1035   /*************************/                                                                                                        \
1036                                                                                                                                      \
1037      static_field(Abstract_VM_Version,         _s_vm_release,                                 const char*)                           \
1038      static_field(Abstract_VM_Version,         _s_internal_vm_info_string,                    const char*)                           \
1039      static_field(Abstract_VM_Version,         _features,                                     uint64_t)                              \
1040      static_field(Abstract_VM_Version,         _features_string,                              const char*)                           \
1041      static_field(Abstract_VM_Version,         _vm_major_version,                             int)                                   \
1042      static_field(Abstract_VM_Version,         _vm_minor_version,                             int)                                   \
1043      static_field(Abstract_VM_Version,         _vm_security_version,                          int)                                   \
1044      static_field(Abstract_VM_Version,         _vm_build_number,                              int)                                   \
1045                                                                                                                                      \
1046      static_field(JDK_Version,                 _current,                                      JDK_Version)                           \
1047   nonstatic_field(JDK_Version,                 _major,                                        unsigned char)                         \
1048                                                                                                                                      \
1049   /*************************/                                                                                                        \
1050   /* JVMTI */                                                                                                                        \
1051   /*************************/                                                                                                        \
1052                                                                                                                                      \
1053   JVMTI_STRUCTS(static_field)                                                                                                        \
1054                                                                                                                                      \
1055   /*************/                                                                                                                    \
1056   /* Arguments */                                                                                                                    \
1057   /*************/                                                                                                                    \
1058                                                                                                                                      \
1059      static_field(Arguments,                   _jvm_flags_array,                              char**)                                \
1060      static_field(Arguments,                   _num_jvm_flags,                                int)                                   \
1061      static_field(Arguments,                   _jvm_args_array,                               char**)                                \
1062      static_field(Arguments,                   _num_jvm_args,                                 int)                                   \
1063      static_field(Arguments,                   _java_command,                                 char*)                                 \
1064                                                                                                                                      \
1065   /************/                                                                                                                     \
1066   /* Array&lt;T&gt; */                                                                                                                     \
1067   /************/                                                                                                                     \
1068                                                                                                                                      \
1069   nonstatic_field(Array&lt;int&gt;,                  _length,                                       int)                                   \
1070   unchecked_nonstatic_field(Array&lt;int&gt;,        _data,                                         sizeof(int))                           \
1071   unchecked_nonstatic_field(Array&lt;u1&gt;,         _data,                                         sizeof(u1))                            \
1072   unchecked_nonstatic_field(Array&lt;u2&gt;,         _data,                                         sizeof(u2))                            \
1073   unchecked_nonstatic_field(Array&lt;Method*&gt;,    _data,                                         sizeof(Method*))                       \
1074   unchecked_nonstatic_field(Array&lt;Klass*&gt;,     _data,                                         sizeof(Klass*))                        \
1075                                                                                                                                      \
1076   /*********************************/                                                                                                \
1077   /* java_lang_Class fields        */                                                                                                \
1078   /*********************************/                                                                                                \
1079                                                                                                                                      \
1080      static_field(java_lang_Class,             _klass_offset,                                 int)                                   \
1081      static_field(java_lang_Class,             _array_klass_offset,                           int)                                   \
1082      static_field(java_lang_Class,             _oop_size_offset,                              int)                                   \
1083      static_field(java_lang_Class,             _static_oop_field_count_offset,                int)                                   \
1084                                                                                                                                      \
1085   /********************************************/                                                                                     \
1086   /* FileMapInfo fields (CDS archive related) */                                                                                     \
1087   /********************************************/                                                                                     \
1088                                                                                                                                      \
1089   CDS_ONLY(nonstatic_field(FileMapInfo,        _header,                   FileMapHeader*))                                           \
1090   CDS_ONLY(   static_field(FileMapInfo,        _current_info,             FileMapInfo*))                                             \
1091   CDS_ONLY(nonstatic_field(FileMapHeader,      _space[0],                 CDSFileMapRegion))                                         \
1092   CDS_ONLY(nonstatic_field(FileMapHeader,      _cloned_vtables_offset,    size_t))                                                   \
1093   CDS_ONLY(nonstatic_field(FileMapHeader,      _mapped_base_address,      char*))                                                    \
1094   CDS_ONLY(nonstatic_field(CDSFileMapRegion,   _mapped_base,              char*))                                                    \
1095   CDS_ONLY(nonstatic_field(CDSFileMapRegion,   _used,                     size_t))                                                   \
1096                                                                                                                                      \
1097   /******************/                                                                                                               \
1098   /* VMError fields */                                                                                                               \
1099   /******************/                                                                                                               \
1100                                                                                                                                      \
1101      static_field(VMError,                     _thread,                                       Thread*)                               \
1102                                                                                                                                      \
1103   /************************/                                                                                                         \
1104   /* Miscellaneous fields */                                                                                                         \
1105   /************************/                                                                                                         \
1106                                                                                                                                      \
1107   nonstatic_field(CompileTask,                 _method,                                       Method*)                               \
1108   nonstatic_field(CompileTask,                 _osr_bci,                                      int)                                   \
1109   nonstatic_field(CompileTask,                 _comp_level,                                   int)                                   \
1110   nonstatic_field(CompileTask,                 _compile_id,                                   uint)                                  \
1111   nonstatic_field(CompileTask,                 _num_inlined_bytecodes,                        int)                                   \
1112   nonstatic_field(CompileTask,                 _next,                                         CompileTask*)                          \
1113   nonstatic_field(CompileTask,                 _prev,                                         CompileTask*)                          \
1114                                                                                                                                      \
1115   nonstatic_field(vframeArray,                 _next,                                         vframeArray*)                          \
1116   nonstatic_field(vframeArray,                 _original,                                     frame)                                 \
1117   nonstatic_field(vframeArray,                 _caller,                                       frame)                                 \
1118   nonstatic_field(vframeArray,                 _frames,                                       int)                                   \
1119                                                                                                                                      \
1120   nonstatic_field(vframeArrayElement,          _frame,                                        frame)                                 \
1121   nonstatic_field(vframeArrayElement,          _bci,                                          int)                                   \
1122   nonstatic_field(vframeArrayElement,          _method,                                       Method*)                               \
1123                                                                                                                                      \
1124   nonstatic_field(AccessFlags,                 _flags,                                        jint)                                  \
1125   nonstatic_field(elapsedTimer,                _counter,                                      jlong)                                 \
1126   nonstatic_field(elapsedTimer,                _active,                                       bool)                                  \
1127   nonstatic_field(InvocationCounter,           _counter,                                      unsigned int)
1128 
1129 //--------------------------------------------------------------------------------
1130 // VM_TYPES
1131 //
1132 // This list must enumerate at least all of the types in the above
1133 // list. For the types in the above list, the entry below must have
1134 // exactly the same spacing since string comparisons are done in the
1135 // code which verifies the consistency of these tables (in the debug
1136 // build).
1137 //
1138 // In addition to the above types, this list is required to enumerate
1139 // the JNI's java types, which are used to indicate the size of Java
1140 // fields in this VM to the SA. Further, oop types are currently
1141 // distinguished by name (i.e., ends with "oop") over in the SA.
1142 //
1143 // The declare_toplevel_type macro should be used to declare types
1144 // which do not have a superclass.
1145 //
1146 // The declare_integer_type and declare_unsigned_integer_type macros
1147 // are required in order to properly identify C integer types over in
1148 // the SA. They should be used for any type which is otherwise opaque
1149 // and which it is necessary to coerce into an integer value. This
1150 // includes, for example, the type uintptr_t. Note that while they
1151 // will properly identify the type's size regardless of the platform,
1152 // since it is does not seem possible to deduce or check signedness at
1153 // compile time using the pointer comparison tricks, it is currently
1154 // required that the given types have the same signedness across all
1155 // platforms.
1156 //
1157 // NOTE that there are platform-specific additions to this table in
1158 // vmStructs_&lt;os&gt;_&lt;cpu&gt;.hpp.
1159 
1160 #define VM_TYPES(declare_type,                                            \
1161                  declare_toplevel_type,                                   \
1162                  declare_oop_type,                                        \
1163                  declare_integer_type,                                    \
1164                  declare_unsigned_integer_type,                           \
1165                  declare_c1_toplevel_type,                                \
1166                  declare_c2_type,                                         \
1167                  declare_c2_toplevel_type)                                \
1168                                                                           \
1169   /*************************************************************/         \
1170   /* Java primitive types -- required by the SA implementation */         \
1171   /* in order to determine the size of Java fields in this VM  */         \
1172   /* (the implementation looks up these names specifically)    */         \
1173   /* NOTE: since we fetch these sizes from the remote VM, we   */         \
1174   /* have a bootstrapping sequence during which it is not      */         \
1175   /* valid to fetch Java values from the remote process, only  */         \
1176   /* C integer values (of known size). NOTE also that we do    */         \
1177   /* NOT include "Java unsigned" types like juint here; since  */         \
1178   /* Java does not have unsigned primitive types, those can    */         \
1179   /* not be mapped directly and are considered to be C integer */         \
1180   /* types in this system (see the "other types" section,      */         \
1181   /* below.)                                                   */         \
1182   /*************************************************************/         \
1183                                                                           \
1184   declare_toplevel_type(jboolean)                                         \
1185   declare_toplevel_type(jbyte)                                            \
1186   declare_toplevel_type(jchar)                                            \
1187   declare_toplevel_type(jdouble)                                          \
1188   declare_toplevel_type(jfloat)                                           \
1189   declare_toplevel_type(jint)                                             \
1190   declare_toplevel_type(jlong)                                            \
1191   declare_toplevel_type(jshort)                                           \
1192                                                                           \
1193   /*********************************************************************/ \
1194   /* C integer types. User-defined typedefs (like "size_t" or          */ \
1195   /* "intptr_t") are guaranteed to be present with the same names over */ \
1196   /* in the SA's type database. Names like "unsigned short" are not    */ \
1197   /* guaranteed to be visible through the SA's type database lookup    */ \
1198   /* mechanism, though they will have a Type object created for them   */ \
1199   /* and are valid types for Fields.                                   */ \
1200   /*********************************************************************/ \
1201   declare_integer_type(bool)                                              \
1202   declare_integer_type(short)                                             \
1203   declare_integer_type(int)                                               \
1204   declare_integer_type(long)                                              \
1205   declare_integer_type(char)                                              \
1206   declare_integer_type(volatile signed char)                              \
1207   declare_unsigned_integer_type(unsigned char)                            \
1208   declare_unsigned_integer_type(u_char)                                   \
1209   declare_unsigned_integer_type(unsigned int)                             \
1210   declare_unsigned_integer_type(uint)                                     \
1211   declare_unsigned_integer_type(unsigned short)                           \
1212   declare_unsigned_integer_type(jushort)                                  \
1213   declare_unsigned_integer_type(unsigned long)                            \
1214   /* The compiler thinks this is a different type than */                 \
1215   /* unsigned short on Win32 */                                           \
1216   declare_unsigned_integer_type(u1)                                       \
1217   declare_unsigned_integer_type(u2)                                       \
1218   declare_unsigned_integer_type(u4)                                       \
1219   declare_unsigned_integer_type(u8)                                       \
1220   declare_unsigned_integer_type(unsigned)                                 \
1221                                                                           \
1222   /*****************************/                                         \
1223   /* C primitive pointer types */                                         \
1224   /*****************************/                                         \
1225                                                                           \
1226   declare_toplevel_type(void*)                                            \
1227   declare_toplevel_type(int*)                                             \
1228   declare_toplevel_type(char*)                                            \
1229   declare_toplevel_type(char**)                                           \
1230   declare_toplevel_type(u_char*)                                          \
1231   declare_toplevel_type(unsigned char*)                                   \
1232   declare_toplevel_type(volatile unsigned char*)                          \
1233                                                                           \
1234   /*******************************************************************/   \
1235   /* Types which it will be handy to have available over in the SA   */   \
1236   /* in order to do platform-independent address -&gt; integer coercion */   \
1237   /* (note: these will be looked up by name)                         */   \
1238   /*******************************************************************/   \
1239                                                                           \
1240   declare_unsigned_integer_type(size_t)                                   \
1241   declare_integer_type(ssize_t)                                           \
1242   declare_integer_type(intx)                                              \
1243   declare_integer_type(intptr_t)                                          \
1244   declare_unsigned_integer_type(uintx)                                    \
1245   declare_unsigned_integer_type(uintptr_t)                                \
1246   declare_unsigned_integer_type(uint8_t)                                  \
1247   declare_unsigned_integer_type(uint32_t)                                 \
1248   declare_unsigned_integer_type(uint64_t)                                 \
1249                                                                           \
1250   /******************************************/                            \
1251   /* OopDesc hierarchy (NOTE: some missing) */                            \
1252   /******************************************/                            \
1253                                                                           \
1254   declare_toplevel_type(oopDesc)                                          \
1255     declare_type(arrayOopDesc, oopDesc)                                   \
1256       declare_type(objArrayOopDesc, arrayOopDesc)                         \
1257     declare_type(instanceOopDesc, oopDesc)                                \
1258                                                                           \
1259   /**************************************************/                    \
1260   /* MetadataOopDesc hierarchy (NOTE: some missing) */                    \
1261   /**************************************************/                    \
1262                                                                           \
1263   declare_toplevel_type(CompiledICHolder)                                 \
1264   declare_toplevel_type(MetaspaceObj)                                     \
1265     declare_type(Metadata, MetaspaceObj)                                  \
1266     declare_type(Klass, Metadata)                                         \
1267            declare_type(ArrayKlass, Klass)                                \
1268            declare_type(ObjArrayKlass, ArrayKlass)                        \
1269            declare_type(TypeArrayKlass, ArrayKlass)                       \
1270       declare_type(InstanceKlass, Klass)                                  \
1271         declare_type(InstanceClassLoaderKlass, InstanceKlass)             \
1272         declare_type(InstanceMirrorKlass, InstanceKlass)                  \
1273         declare_type(InstanceRefKlass, InstanceKlass)                     \
1274     declare_type(ConstantPool, Metadata)                                  \
1275     declare_type(ConstantPoolCache, MetaspaceObj)                         \
1276     declare_type(MethodData, Metadata)                                    \
1277     declare_type(Method, Metadata)                                        \
1278     declare_type(MethodCounters, MetaspaceObj)                            \
1279     declare_type(ConstMethod, MetaspaceObj)                               \
1280                                                                           \
1281   declare_toplevel_type(narrowKlass)                                      \
1282                                                                           \
1283   declare_toplevel_type(vtableEntry)                                      \
1284                                                                           \
1285            declare_toplevel_type(Symbol)                                  \
1286            declare_toplevel_type(Symbol*)                                 \
1287   declare_toplevel_type(volatile Metadata*)                               \
1288                                                                           \
1289   declare_toplevel_type(DataLayout)                                       \
1290                                                                           \
1291   /********/                                                              \
1292   /* Oops */                                                              \
1293   /********/                                                              \
1294                                                                           \
1295   declare_oop_type(objArrayOop)                                           \
1296   declare_oop_type(oop)                                                   \
1297   declare_oop_type(narrowOop)                                             \
1298   declare_oop_type(typeArrayOop)                                          \
1299                                                                           \
1300   declare_toplevel_type(OopHandle)                                        \
1301                                                                           \
1302   /*************************************/                                 \
1303   /* MethodOop-related data structures */                                 \
1304   /*************************************/                                 \
1305                                                                           \
1306   declare_toplevel_type(CheckedExceptionElement)                          \
1307   declare_toplevel_type(LocalVariableTableElement)                        \
1308   declare_toplevel_type(ExceptionTableElement)                            \
1309   declare_toplevel_type(MethodParametersElement)                          \
1310                                                                           \
1311   declare_toplevel_type(ClassLoaderData)                                  \
1312   declare_toplevel_type(ClassLoaderDataGraph)                             \
1313                                                                           \
1314   /************************/                                              \
1315   /* PerfMemory - jvmstat */                                              \
1316   /************************/                                              \
1317                                                                           \
1318   declare_toplevel_type(PerfDataPrologue)                                 \
1319   declare_toplevel_type(PerfDataPrologue*)                                \
1320   declare_toplevel_type(PerfDataEntry)                                    \
1321   declare_toplevel_type(PerfMemory)                                       \
1322   declare_type(PerfData, CHeapObj&lt;mtInternal&gt;)                            \
1323                                                                           \
1324   /********************/                                                  \
1325   /* SystemDictionary */                                                  \
1326   /********************/                                                  \
1327                                                                           \
1328   declare_toplevel_type(BasicHashtable&lt;mtInternal&gt;)                       \
1329     declare_type(IntptrHashtable, BasicHashtable&lt;mtInternal&gt;)             \
1330   declare_toplevel_type(BasicHashtable&lt;mtSymbol&gt;)                         \
1331     declare_type(Dictionary, KlassHashtable)                              \
1332   declare_toplevel_type(BasicHashtableEntry&lt;mtInternal&gt;)                  \
1333   declare_type(IntptrHashtableEntry, BasicHashtableEntry&lt;mtInternal&gt;)     \
1334     declare_type(DictionaryEntry, KlassHashtableEntry)                    \
1335   declare_toplevel_type(HashtableBucket&lt;mtInternal&gt;)                      \
1336   declare_toplevel_type(SystemDictionary)                                 \
1337   declare_toplevel_type(vmSymbols)                                        \
1338                                                                           \
1339   declare_toplevel_type(GrowableArrayBase)                                \
1340   declare_toplevel_type(GrowableArray&lt;int&gt;)                               \
1341   declare_toplevel_type(Arena)                                            \
1342     declare_type(ResourceArea, Arena)                                     \
1343                                                                           \
1344   /***********************************************************/           \
1345   /* Thread hierarchy (needed for run-time type information) */           \
1346   /***********************************************************/           \
1347                                                                           \
1348   declare_toplevel_type(Threads)                                          \
1349   declare_toplevel_type(ThreadShadow)                                     \
1350     declare_type(Thread, ThreadShadow)                                    \
1351       declare_type(NonJavaThread, Thread)                                 \
1352         declare_type(NamedThread, NonJavaThread)                          \
1353         declare_type(WatcherThread, NonJavaThread)                        \
1354       declare_type(JavaThread, Thread)                                    \
1355         declare_type(JvmtiAgentThread, JavaThread)                        \
1356         declare_type(ServiceThread, JavaThread)                           \
1357         declare_type(NotificationThread, JavaThread)                      \
1358         declare_type(CompilerThread, JavaThread)                          \
1359         declare_type(CodeCacheSweeperThread, JavaThread)                  \
1360   declare_toplevel_type(OSThread)                                         \
1361   declare_toplevel_type(JavaFrameAnchor)                                  \
1362                                                                           \
1363   declare_toplevel_type(ThreadsSMRSupport)                                \
1364   declare_toplevel_type(ThreadsList)                                      \
1365                                                                           \
1366   /***************/                                                       \
1367   /* Interpreter */                                                       \
1368   /***************/                                                       \
1369                                                                           \
1370   declare_toplevel_type(AbstractInterpreter)                              \
1371                                                                           \
1372   /*********/                                                             \
1373   /* Stubs */                                                             \
1374   /*********/                                                             \
1375                                                                           \
1376   declare_toplevel_type(StubQueue)                                        \
1377   declare_toplevel_type(StubRoutines)                                     \
1378   declare_toplevel_type(Stub)                                             \
1379            declare_type(InterpreterCodelet, Stub)                         \
1380                                                                           \
1381   /*************/                                                         \
1382   /* JavaCalls */                                                         \
1383   /*************/                                                         \
1384                                                                           \
1385   declare_toplevel_type(JavaCallWrapper)                                  \
1386                                                                           \
1387   /*************/                                                         \
1388   /* CodeCache */                                                         \
1389   /*************/                                                         \
1390                                                                           \
1391   declare_toplevel_type(CodeCache)                                        \
1392                                                                           \
1393   /************/                                                          \
1394   /* CodeHeap */                                                          \
1395   /************/                                                          \
1396                                                                           \
1397   declare_toplevel_type(CodeHeap)                                         \
1398   declare_toplevel_type(CodeHeap*)                                        \
1399   declare_toplevel_type(HeapBlock)                                        \
1400   declare_toplevel_type(HeapBlock::Header)                                \
1401            declare_type(FreeBlock, HeapBlock)                             \
1402                                                                           \
1403   /*************************************************************/         \
1404   /* CodeBlob hierarchy (needed for run-time type information) */         \
1405   /*************************************************************/         \
1406                                                                           \
1407   declare_toplevel_type(SharedRuntime)                                    \
1408                                                                           \
1409   declare_toplevel_type(CodeBlob)                                         \
1410   declare_type(RuntimeBlob,              CodeBlob)                        \
1411   declare_type(BufferBlob,               RuntimeBlob)                     \
1412   declare_type(AdapterBlob,              BufferBlob)                      \
1413   declare_type(MethodHandlesAdapterBlob, BufferBlob)                      \
1414   declare_type(CompiledMethod,           CodeBlob)                        \
1415   declare_type(nmethod,                  CompiledMethod)                  \
1416   declare_type(RuntimeStub,              RuntimeBlob)                     \
1417   declare_type(SingletonBlob,            RuntimeBlob)                     \
1418   declare_type(SafepointBlob,            SingletonBlob)                   \
1419   declare_type(DeoptimizationBlob,       SingletonBlob)                   \
1420   declare_c2_type(ExceptionBlob,         SingletonBlob)                   \
1421   declare_c2_type(UncommonTrapBlob,      RuntimeBlob)                     \
1422                                                                           \
1423   /***************************************/                               \
1424   /* PcDesc and other compiled code info */                               \
1425   /***************************************/                               \
1426                                                                           \
1427   declare_toplevel_type(PcDesc)                                           \
1428   declare_toplevel_type(ExceptionCache)                                   \
1429   declare_toplevel_type(PcDescCache)                                      \
1430   declare_toplevel_type(Dependencies)                                     \
1431   declare_toplevel_type(CompileTask)                                      \
1432   declare_toplevel_type(Deoptimization)                                   \
1433   declare_toplevel_type(Deoptimization::UnrollBlock)                      \
1434                                                                           \
1435   /************************/                                              \
1436   /* ImmutableOopMap      */                                              \
1437   /************************/                                              \
1438                                                                           \
1439   declare_toplevel_type(ImmutableOopMapSet)                               \
1440   declare_toplevel_type(ImmutableOopMapPair)                              \
1441   declare_toplevel_type(ImmutableOopMap)                                  \
1442                                                                           \
1443   /********************/                                                  \
1444   /* CompressedStream */                                                  \
1445   /********************/                                                  \
1446                                                                           \
1447   declare_toplevel_type(CompressedStream)                                 \
1448                                                                           \
1449   /**************/                                                        \
1450   /* VMRegImpl  */                                                        \
1451   /**************/                                                        \
1452                                                                           \
1453   declare_toplevel_type(VMRegImpl)                                        \
1454                                                                           \
1455   /*********************************/                                     \
1456   /* JNIHandles and JNIHandleBlock */                                     \
1457   /*********************************/                                     \
1458                                                                           \
1459   declare_toplevel_type(JNIHandles)                                       \
1460   declare_toplevel_type(JNIHandleBlock)                                   \
1461   declare_toplevel_type(jobject)                                          \
1462                                                                           \
1463   /**************/                                                        \
1464   /* OopStorage */                                                        \
1465   /**************/                                                        \
1466                                                                           \
1467   declare_toplevel_type(OopStorage)                                       \
1468                                                                           \
1469   /**********************/                                                \
1470   /* Runtime1 (C1 only) */                                                \
1471   /**********************/                                                \
1472                                                                           \
1473   declare_c1_toplevel_type(Runtime1)                                      \
1474                                                                           \
1475   /************/                                                          \
1476   /* Monitors */                                                          \
1477   /************/                                                          \
1478                                                                           \
1479   declare_toplevel_type(ObjectMonitor)                                    \
1480   declare_toplevel_type(PaddedObjectMonitor)                              \
1481   declare_toplevel_type(ObjectSynchronizer)                               \
1482   declare_toplevel_type(BasicLock)                                        \
1483   declare_toplevel_type(BasicObjectLock)                                  \
1484                                                                           \
1485   /*********************/                                                 \
1486   /* Matcher (C2 only) */                                                 \
1487   /*********************/                                                 \
1488                                                                           \
1489   declare_c2_toplevel_type(Matcher)                                       \
1490   declare_c2_toplevel_type(Compile)                                       \
1491   declare_c2_toplevel_type(InlineTree)                                    \
1492   declare_c2_toplevel_type(OptoRegPair)                                   \
1493   declare_c2_toplevel_type(JVMState)                                      \
1494   declare_c2_toplevel_type(Phase)                                         \
1495     declare_c2_type(PhaseCFG, Phase)                                      \
1496     declare_c2_type(PhaseRegAlloc, Phase)                                 \
1497     declare_c2_type(PhaseChaitin, PhaseRegAlloc)                          \
1498   declare_c2_toplevel_type(CFGElement)                                    \
1499     declare_c2_type(Block, CFGElement)                                    \
1500   declare_c2_toplevel_type(Block_Array)                                   \
1501     declare_c2_type(Block_List, Block_Array)                              \
1502   declare_c2_toplevel_type(Node_Array)                                    \
1503   declare_c2_type(Node_List, Node_Array)                                  \
1504   declare_c2_type(Unique_Node_List, Node_List)                            \
1505   declare_c2_toplevel_type(Node)                                          \
1506   declare_c2_type(AddNode, Node)                                          \
1507   declare_c2_type(AddINode, AddNode)                                      \
1508   declare_c2_type(AddLNode, AddNode)                                      \
1509   declare_c2_type(AddFNode, AddNode)                                      \
1510   declare_c2_type(AddDNode, AddNode)                                      \
1511   declare_c2_type(AddPNode, Node)                                         \
1512   declare_c2_type(OrINode, AddNode)                                       \
1513   declare_c2_type(OrLNode, AddNode)                                       \
1514   declare_c2_type(XorINode, AddNode)                                      \
1515   declare_c2_type(XorLNode, AddNode)                                      \
1516   declare_c2_type(MaxNode, AddNode)                                       \
1517   declare_c2_type(MaxINode, MaxNode)                                      \
1518   declare_c2_type(MinINode, MaxNode)                                      \
1519   declare_c2_type(MaxFNode, MaxNode)                                      \
1520   declare_c2_type(MinFNode, MaxNode)                                      \
1521   declare_c2_type(MaxDNode, MaxNode)                                      \
1522   declare_c2_type(MinDNode, MaxNode)                                      \
1523   declare_c2_type(StartNode, MultiNode)                                   \
1524   declare_c2_type(StartOSRNode, StartNode)                                \
1525   declare_c2_type(ParmNode, ProjNode)                                     \
1526   declare_c2_type(ReturnNode, Node)                                       \
1527   declare_c2_type(RethrowNode, Node)                                      \
1528   declare_c2_type(TailCallNode, ReturnNode)                               \
1529   declare_c2_type(TailJumpNode, ReturnNode)                               \
1530   declare_c2_type(SafePointNode, MultiNode)                               \
1531   declare_c2_type(CallNode, SafePointNode)                                \
1532   declare_c2_type(CallJavaNode, CallNode)                                 \
1533   declare_c2_type(CallStaticJavaNode, CallJavaNode)                       \
1534   declare_c2_type(CallDynamicJavaNode, CallJavaNode)                      \
1535   declare_c2_type(CallRuntimeNode, CallNode)                              \
1536   declare_c2_type(CallLeafNode, CallRuntimeNode)                          \
1537   declare_c2_type(CallLeafNoFPNode, CallLeafNode)                         \
1538   declare_c2_type(AllocateNode, CallNode)                                 \
1539   declare_c2_type(AllocateArrayNode, AllocateNode)                        \
1540   declare_c2_type(LockNode, AbstractLockNode)                             \
1541   declare_c2_type(UnlockNode, AbstractLockNode)                           \
1542   declare_c2_type(FastLockNode, CmpNode)                                  \
1543   declare_c2_type(FastUnlockNode, CmpNode)                                \
1544   declare_c2_type(RegionNode, Node)                                       \
1545   declare_c2_type(JProjNode, ProjNode)                                    \
1546   declare_c2_type(PhiNode, TypeNode)                                      \
1547   declare_c2_type(GotoNode, Node)                                         \
1548   declare_c2_type(CProjNode, ProjNode)                                    \
1549   declare_c2_type(MultiBranchNode, MultiNode)                             \
1550   declare_c2_type(IfNode, MultiBranchNode)                                \
1551   declare_c2_type(IfTrueNode, CProjNode)                                  \
1552   declare_c2_type(IfFalseNode, CProjNode)                                 \
1553   declare_c2_type(PCTableNode, MultiBranchNode)                           \
1554   declare_c2_type(JumpNode, PCTableNode)                                  \
1555   declare_c2_type(JumpProjNode, JProjNode)                                \
1556   declare_c2_type(CatchNode, PCTableNode)                                 \
1557   declare_c2_type(CatchProjNode, CProjNode)                               \
1558   declare_c2_type(CreateExNode, TypeNode)                                 \
1559   declare_c2_type(ClearArrayNode, Node)                                   \
1560   declare_c2_type(NeverBranchNode, MultiBranchNode)                       \
1561   declare_c2_type(ConNode, TypeNode)                                      \
1562   declare_c2_type(ConINode, ConNode)                                      \
1563   declare_c2_type(ConPNode, ConNode)                                      \
1564   declare_c2_type(ConNNode, ConNode)                                      \
1565   declare_c2_type(ConLNode, ConNode)                                      \
1566   declare_c2_type(ConFNode, ConNode)                                      \
1567   declare_c2_type(ConDNode, ConNode)                                      \
1568   declare_c2_type(BinaryNode, Node)                                       \
1569   declare_c2_type(CMoveNode, TypeNode)                                    \
1570   declare_c2_type(CMoveDNode, CMoveNode)                                  \
1571   declare_c2_type(CMoveFNode, CMoveNode)                                  \
1572   declare_c2_type(CMoveINode, CMoveNode)                                  \
1573   declare_c2_type(CMoveLNode, CMoveNode)                                  \
1574   declare_c2_type(CMovePNode, CMoveNode)                                  \
1575   declare_c2_type(CMoveNNode, CMoveNode)                                  \
1576   declare_c2_type(EncodePNode, TypeNode)                                  \
1577   declare_c2_type(DecodeNNode, TypeNode)                                  \
1578   declare_c2_type(EncodePKlassNode, TypeNode)                             \
1579   declare_c2_type(DecodeNKlassNode, TypeNode)                             \
1580   declare_c2_type(ConstraintCastNode, TypeNode)                           \
1581   declare_c2_type(CastIINode, ConstraintCastNode)                         \
1582   declare_c2_type(CastPPNode, ConstraintCastNode)                         \
1583   declare_c2_type(CheckCastPPNode, TypeNode)                              \
1584   declare_c2_type(Conv2BNode, Node)                                       \
1585   declare_c2_type(ConvD2FNode, Node)                                      \
1586   declare_c2_type(ConvD2INode, Node)                                      \
1587   declare_c2_type(ConvD2LNode, Node)                                      \
1588   declare_c2_type(ConvF2DNode, Node)                                      \
1589   declare_c2_type(ConvF2INode, Node)                                      \
1590   declare_c2_type(ConvF2LNode, Node)                                      \
1591   declare_c2_type(ConvI2DNode, Node)                                      \
1592   declare_c2_type(ConvI2FNode, Node)                                      \
1593   declare_c2_type(ConvI2LNode, TypeNode)                                  \
1594   declare_c2_type(ConvL2DNode, Node)                                      \
1595   declare_c2_type(ConvL2FNode, Node)                                      \
1596   declare_c2_type(ConvL2INode, Node)                                      \
1597   declare_c2_type(CastX2PNode, Node)                                      \
1598   declare_c2_type(CastP2XNode, Node)                                      \
1599   declare_c2_type(SetVectMaskINode, Node)                                 \
1600   declare_c2_type(MemBarNode, MultiNode)                                  \
1601   declare_c2_type(MemBarAcquireNode, MemBarNode)                          \
1602   declare_c2_type(MemBarReleaseNode, MemBarNode)                          \
1603   declare_c2_type(LoadFenceNode, MemBarNode)                              \
1604   declare_c2_type(StoreFenceNode, MemBarNode)                             \
1605   declare_c2_type(MemBarVolatileNode, MemBarNode)                         \
1606   declare_c2_type(MemBarCPUOrderNode, MemBarNode)                         \
1607   declare_c2_type(OnSpinWaitNode, MemBarNode)                             \
1608   declare_c2_type(InitializeNode, MemBarNode)                             \
1609   declare_c2_type(ThreadLocalNode, Node)                                  \
1610   declare_c2_type(Opaque1Node, Node)                                      \
1611   declare_c2_type(Opaque2Node, Node)                                      \
1612   declare_c2_type(PartialSubtypeCheckNode, Node)                          \
1613   declare_c2_type(MoveI2FNode, Node)                                      \
1614   declare_c2_type(MoveL2DNode, Node)                                      \
1615   declare_c2_type(MoveF2INode, Node)                                      \
1616   declare_c2_type(MoveD2LNode, Node)                                      \
1617   declare_c2_type(DivINode, Node)                                         \
1618   declare_c2_type(DivLNode, Node)                                         \
1619   declare_c2_type(DivFNode, Node)                                         \
1620   declare_c2_type(DivDNode, Node)                                         \
1621   declare_c2_type(ModINode, Node)                                         \
1622   declare_c2_type(ModLNode, Node)                                         \
1623   declare_c2_type(ModFNode, Node)                                         \
1624   declare_c2_type(ModDNode, Node)                                         \
1625   declare_c2_type(DivModNode, MultiNode)                                  \
1626   declare_c2_type(DivModINode, DivModNode)                                \
1627   declare_c2_type(DivModLNode, DivModNode)                                \
1628   declare_c2_type(BoxLockNode, Node)                                      \
1629   declare_c2_type(LoopNode, RegionNode)                                   \
1630   declare_c2_type(CountedLoopNode, LoopNode)                              \
1631   declare_c2_type(CountedLoopEndNode, IfNode)                             \
1632   declare_c2_type(MachNode, Node)                                         \
1633   declare_c2_type(MachIdealNode, MachNode)                                \
1634   declare_c2_type(MachTypeNode, MachNode)                                 \
1635   declare_c2_type(MachBreakpointNode, MachIdealNode)                      \
1636   declare_c2_type(MachUEPNode, MachIdealNode)                             \
1637   declare_c2_type(MachPrologNode, MachIdealNode)                          \
1638   declare_c2_type(MachEpilogNode, MachIdealNode)                          \
1639   declare_c2_type(MachNopNode, MachIdealNode)                             \
1640   declare_c2_type(MachSpillCopyNode, MachIdealNode)                       \
1641   declare_c2_type(MachNullCheckNode, MachIdealNode)                       \
1642   declare_c2_type(MachProjNode, ProjNode)                                 \
1643   declare_c2_type(MachIfNode, MachNode)                                   \
1644   declare_c2_type(MachJumpNode, MachNode)                                 \
1645   declare_c2_type(MachFastLockNode, MachNode)                             \
1646   declare_c2_type(MachReturnNode, MachNode)                               \
1647   declare_c2_type(MachSafePointNode, MachReturnNode)                      \
1648   declare_c2_type(MachCallNode, MachSafePointNode)                        \
1649   declare_c2_type(MachCallJavaNode, MachCallNode)                         \
1650   declare_c2_type(MachCallStaticJavaNode, MachCallJavaNode)               \
1651   declare_c2_type(MachCallDynamicJavaNode, MachCallJavaNode)              \
1652   declare_c2_type(MachCallRuntimeNode, MachCallNode)                      \
1653   declare_c2_type(MachHaltNode, MachReturnNode)                           \
1654   declare_c2_type(MachTempNode, MachNode)                                 \
1655   declare_c2_type(MemNode, Node)                                          \
1656   declare_c2_type(MergeMemNode, Node)                                     \
1657   declare_c2_type(LoadNode, MemNode)                                      \
1658   declare_c2_type(LoadBNode, LoadNode)                                    \
1659   declare_c2_type(LoadUSNode, LoadNode)                                   \
1660   declare_c2_type(LoadINode, LoadNode)                                    \
1661   declare_c2_type(LoadRangeNode, LoadINode)                               \
1662   declare_c2_type(LoadLNode, LoadNode)                                    \
1663   declare_c2_type(LoadL_unalignedNode, LoadLNode)                         \
1664   declare_c2_type(LoadFNode, LoadNode)                                    \
1665   declare_c2_type(LoadDNode, LoadNode)                                    \
1666   declare_c2_type(LoadD_unalignedNode, LoadDNode)                         \
1667   declare_c2_type(LoadPNode, LoadNode)                                    \
1668   declare_c2_type(LoadNNode, LoadNode)                                    \
1669   declare_c2_type(LoadKlassNode, LoadPNode)                               \
1670   declare_c2_type(LoadNKlassNode, LoadNNode)                              \
1671   declare_c2_type(LoadSNode, LoadNode)                                    \
1672   declare_c2_type(StoreNode, MemNode)                                     \
1673   declare_c2_type(StoreBNode, StoreNode)                                  \
1674   declare_c2_type(StoreCNode, StoreNode)                                  \
1675   declare_c2_type(StoreINode, StoreNode)                                  \
1676   declare_c2_type(StoreLNode, StoreNode)                                  \
1677   declare_c2_type(StoreFNode, StoreNode)                                  \
1678   declare_c2_type(StoreDNode, StoreNode)                                  \
1679   declare_c2_type(StorePNode, StoreNode)                                  \
1680   declare_c2_type(StoreNNode, StoreNode)                                  \
1681   declare_c2_type(StoreNKlassNode, StoreNode)                             \
1682   declare_c2_type(StoreCMNode, StoreNode)                                 \
1683   declare_c2_type(LoadPLockedNode, LoadPNode)                             \
1684   declare_c2_type(SCMemProjNode, ProjNode)                                \
1685   declare_c2_type(LoadStoreNode, Node)                                    \
1686   declare_c2_type(StorePConditionalNode, LoadStoreNode)                   \
1687   declare_c2_type(StoreLConditionalNode, LoadStoreNode)                   \
1688   declare_c2_type(CompareAndSwapNode, LoadStoreConditionalNode)           \
1689   declare_c2_type(CompareAndSwapBNode, CompareAndSwapNode)                \
1690   declare_c2_type(CompareAndSwapSNode, CompareAndSwapNode)                \
1691   declare_c2_type(CompareAndSwapLNode, CompareAndSwapNode)                \
1692   declare_c2_type(CompareAndSwapINode, CompareAndSwapNode)                \
1693   declare_c2_type(CompareAndSwapPNode, CompareAndSwapNode)                \
1694   declare_c2_type(CompareAndSwapNNode, CompareAndSwapNode)                \
1695   declare_c2_type(WeakCompareAndSwapBNode, CompareAndSwapNode)            \
1696   declare_c2_type(WeakCompareAndSwapSNode, CompareAndSwapNode)            \
1697   declare_c2_type(WeakCompareAndSwapLNode, CompareAndSwapNode)            \
1698   declare_c2_type(WeakCompareAndSwapINode, CompareAndSwapNode)            \
1699   declare_c2_type(WeakCompareAndSwapPNode, CompareAndSwapNode)            \
1700   declare_c2_type(WeakCompareAndSwapNNode, CompareAndSwapNode)            \
1701   declare_c2_type(CompareAndExchangeNode, LoadStoreNode)                  \
1702   declare_c2_type(CompareAndExchangeBNode, CompareAndExchangeNode)        \
1703   declare_c2_type(CompareAndExchangeSNode, CompareAndExchangeNode)        \
1704   declare_c2_type(CompareAndExchangeLNode, CompareAndExchangeNode)        \
1705   declare_c2_type(CompareAndExchangeINode, CompareAndExchangeNode)        \
1706   declare_c2_type(CompareAndExchangePNode, CompareAndExchangeNode)        \
1707   declare_c2_type(CompareAndExchangeNNode, CompareAndExchangeNode)        \
1708   declare_c2_type(MulNode, Node)                                          \
1709   declare_c2_type(MulINode, MulNode)                                      \
1710   declare_c2_type(MulLNode, MulNode)                                      \
1711   declare_c2_type(MulFNode, MulNode)                                      \
1712   declare_c2_type(MulDNode, MulNode)                                      \
1713   declare_c2_type(MulHiLNode, Node)                                       \
1714   declare_c2_type(AndINode, MulINode)                                     \
1715   declare_c2_type(AndLNode, MulLNode)                                     \
1716   declare_c2_type(LShiftINode, Node)                                      \
1717   declare_c2_type(LShiftLNode, Node)                                      \
1718   declare_c2_type(RShiftINode, Node)                                      \
1719   declare_c2_type(RShiftLNode, Node)                                      \
1720   declare_c2_type(URShiftINode, Node)                                     \
1721   declare_c2_type(URShiftLNode, Node)                                     \
1722   declare_c2_type(MultiNode, Node)                                        \
1723   declare_c2_type(ProjNode, Node)                                         \
1724   declare_c2_type(TypeNode, Node)                                         \
1725   declare_c2_type(NodeHash, StackObj)                                     \
1726   declare_c2_type(RootNode, LoopNode)                                     \
1727   declare_c2_type(HaltNode, Node)                                         \
1728   declare_c2_type(SubNode, Node)                                          \
1729   declare_c2_type(SubINode, SubNode)                                      \
1730   declare_c2_type(SubLNode, SubNode)                                      \
1731   declare_c2_type(SubFPNode, SubNode)                                     \
1732   declare_c2_type(SubFNode, SubFPNode)                                    \
1733   declare_c2_type(SubDNode, SubFPNode)                                    \
1734   declare_c2_type(CmpNode, SubNode)                                       \
1735   declare_c2_type(CmpINode, CmpNode)                                      \
1736   declare_c2_type(CmpUNode, CmpNode)                                      \
1737   declare_c2_type(CmpPNode, CmpNode)                                      \
1738   declare_c2_type(CmpNNode, CmpNode)                                      \
1739   declare_c2_type(CmpLNode, CmpNode)                                      \
1740   declare_c2_type(CmpULNode, CmpNode)                                     \
1741   declare_c2_type(CmpL3Node, CmpLNode)                                    \
1742   declare_c2_type(CmpFNode, CmpNode)                                      \
1743   declare_c2_type(CmpF3Node, CmpFNode)                                    \
1744   declare_c2_type(CmpDNode, CmpNode)                                      \
1745   declare_c2_type(CmpD3Node, CmpDNode)                                    \
1746   declare_c2_type(BoolNode, Node)                                         \
1747   declare_c2_type(AbsNode, Node)                                          \
1748   declare_c2_type(AbsINode, AbsNode)                                      \
1749   declare_c2_type(AbsFNode, AbsNode)                                      \
1750   declare_c2_type(AbsDNode, AbsNode)                                      \
1751   declare_c2_type(CmpLTMaskNode, Node)                                    \
1752   declare_c2_type(NegNode, Node)                                          \
1753   declare_c2_type(NegFNode, NegNode)                                      \
1754   declare_c2_type(NegDNode, NegNode)                                      \
1755   declare_c2_type(AtanDNode, Node)                                        \
1756   declare_c2_type(SqrtFNode, Node)                                        \
1757   declare_c2_type(SqrtDNode, Node)                                        \
1758   declare_c2_type(ReverseBytesINode, Node)                                \
1759   declare_c2_type(ReverseBytesLNode, Node)                                \
1760   declare_c2_type(ReductionNode, Node)                                    \
1761   declare_c2_type(VectorNode, Node)                                       \
1762   declare_c2_type(AbsVBNode, VectorNode)                                   \
1763   declare_c2_type(AbsVSNode, VectorNode)                                   \
1764   declare_c2_type(AbsVINode, VectorNode)                                   \
1765   declare_c2_type(AbsVLNode, VectorNode)                                   \
1766   declare_c2_type(AddVBNode, VectorNode)                                  \
1767   declare_c2_type(AddVSNode, VectorNode)                                  \
1768   declare_c2_type(AddVINode, VectorNode)                                  \
1769   declare_c2_type(AddReductionVINode, ReductionNode)                      \
1770   declare_c2_type(AddVLNode, VectorNode)                                  \
1771   declare_c2_type(AddReductionVLNode, ReductionNode)                      \
1772   declare_c2_type(AddVFNode, VectorNode)                                  \
1773   declare_c2_type(AddReductionVFNode, ReductionNode)                      \
1774   declare_c2_type(AddVDNode, VectorNode)                                  \
1775   declare_c2_type(AddReductionVDNode, ReductionNode)                      \
1776   declare_c2_type(SubVBNode, VectorNode)                                  \
1777   declare_c2_type(SubVSNode, VectorNode)                                  \
1778   declare_c2_type(SubVINode, VectorNode)                                  \
1779   declare_c2_type(SubVLNode, VectorNode)                                  \
1780   declare_c2_type(SubVFNode, VectorNode)                                  \
1781   declare_c2_type(SubVDNode, VectorNode)                                  \
1782   declare_c2_type(MulVBNode, VectorNode)                                  \
1783   declare_c2_type(MulVSNode, VectorNode)                                  \
1784   declare_c2_type(MulVLNode, VectorNode)                                  \
1785   declare_c2_type(MulReductionVLNode, ReductionNode)                      \
1786   declare_c2_type(MulVINode, VectorNode)                                  \
1787   declare_c2_type(MulReductionVINode, ReductionNode)                      \
1788   declare_c2_type(MulVFNode, VectorNode)                                  \
1789   declare_c2_type(MulReductionVFNode, ReductionNode)                      \
1790   declare_c2_type(MulVDNode, VectorNode)                                  \
1791   declare_c2_type(NegVFNode, VectorNode)                                  \
1792   declare_c2_type(NegVDNode, VectorNode)                                  \
1793   declare_c2_type(FmaVDNode, VectorNode)                                  \
1794   declare_c2_type(FmaVFNode, VectorNode)                                  \
1795   declare_c2_type(CMoveVFNode, VectorNode)                                \
1796   declare_c2_type(CMoveVDNode, VectorNode)                                \
1797   declare_c2_type(MulReductionVDNode, ReductionNode)                      \
1798   declare_c2_type(DivVFNode, VectorNode)                                  \
1799   declare_c2_type(DivVDNode, VectorNode)                                  \
1800   declare_c2_type(PopCountVINode, VectorNode)                             \
1801   declare_c2_type(LShiftVBNode, VectorNode)                               \
1802   declare_c2_type(LShiftVSNode, VectorNode)                               \
1803   declare_c2_type(LShiftVINode, VectorNode)                               \
1804   declare_c2_type(LShiftVLNode, VectorNode)                               \
1805   declare_c2_type(RShiftVBNode, VectorNode)                               \
1806   declare_c2_type(RShiftVSNode, VectorNode)                               \
1807   declare_c2_type(RShiftVINode, VectorNode)                               \
1808   declare_c2_type(RShiftVLNode, VectorNode)                               \
1809   declare_c2_type(URShiftVBNode, VectorNode)                              \
1810   declare_c2_type(URShiftVSNode, VectorNode)                              \
1811   declare_c2_type(URShiftVINode, VectorNode)                              \
1812   declare_c2_type(URShiftVLNode, VectorNode)                              \
1813   declare_c2_type(AndVNode, VectorNode)                                   \
1814   declare_c2_type(AndReductionVNode, ReductionNode)                       \
1815   declare_c2_type(OrVNode, VectorNode)                                    \
1816   declare_c2_type(OrReductionVNode, ReductionNode)                        \
1817   declare_c2_type(XorVNode, VectorNode)                                   \
1818   declare_c2_type(XorReductionVNode, ReductionNode)                       \
1819   declare_c2_type(MaxVNode, VectorNode)                                   \
1820   declare_c2_type(MinVNode, VectorNode)                                   \
1821   declare_c2_type(MaxReductionVNode, ReductionNode)                       \
1822   declare_c2_type(MinReductionVNode, ReductionNode)                       \
1823   declare_c2_type(LoadVectorNode, LoadNode)                               \
1824   declare_c2_type(StoreVectorNode, StoreNode)                             \
1825   declare_c2_type(ReplicateBNode, VectorNode)                             \
1826   declare_c2_type(ReplicateSNode, VectorNode)                             \
1827   declare_c2_type(ReplicateINode, VectorNode)                             \
1828   declare_c2_type(ReplicateLNode, VectorNode)                             \
1829   declare_c2_type(ReplicateFNode, VectorNode)                             \
1830   declare_c2_type(ReplicateDNode, VectorNode)                             \
1831   declare_c2_type(PackNode, VectorNode)                                   \
1832   declare_c2_type(PackBNode, PackNode)                                    \
1833   declare_c2_type(PackSNode, PackNode)                                    \
1834   declare_c2_type(PackINode, PackNode)                                    \
1835   declare_c2_type(PackLNode, PackNode)                                    \
1836   declare_c2_type(PackFNode, PackNode)                                    \
1837   declare_c2_type(PackDNode, PackNode)                                    \
1838   declare_c2_type(Pack2LNode, PackNode)                                   \
1839   declare_c2_type(Pack2DNode, PackNode)                                   \
1840   declare_c2_type(ExtractNode, Node)                                      \
1841   declare_c2_type(ExtractBNode, ExtractNode)                              \
1842   declare_c2_type(ExtractUBNode, ExtractNode)                             \
1843   declare_c2_type(ExtractCNode, ExtractNode)                              \
1844   declare_c2_type(ExtractSNode, ExtractNode)                              \
1845   declare_c2_type(ExtractINode, ExtractNode)                              \
1846   declare_c2_type(ExtractLNode, ExtractNode)                              \
1847   declare_c2_type(ExtractFNode, ExtractNode)                              \
1848   declare_c2_type(ExtractDNode, ExtractNode)                              \
1849   declare_c2_type(OverflowNode, CmpNode)                                  \
1850   declare_c2_type(OverflowINode, OverflowNode)                            \
1851   declare_c2_type(OverflowAddINode, OverflowINode)                        \
1852   declare_c2_type(OverflowSubINode, OverflowINode)                        \
1853   declare_c2_type(OverflowMulINode, OverflowINode)                        \
1854   declare_c2_type(OverflowLNode, OverflowNode)                            \
1855   declare_c2_type(OverflowAddLNode, OverflowLNode)                        \
1856   declare_c2_type(OverflowSubLNode, OverflowLNode)                        \
1857   declare_c2_type(OverflowMulLNode, OverflowLNode)                        \
1858   declare_c2_type(FmaDNode, Node)                                         \
1859   declare_c2_type(FmaFNode, Node)                                         \
1860                                                                           \
1861   /*********************/                                                 \
1862   /* Adapter Blob Entries */                                              \
1863   /*********************/                                                 \
1864   declare_toplevel_type(AdapterHandlerEntry)                              \
1865   declare_toplevel_type(AdapterHandlerEntry*)                             \
1866                                                                           \
1867   /*********************/                                                 \
1868   /* CI */                                                                \
1869   /*********************/                                                 \
1870   declare_toplevel_type(ciEnv)                                            \
1871   declare_toplevel_type(ciObjectFactory)                                  \
1872   declare_toplevel_type(ciConstant)                                       \
1873   declare_toplevel_type(ciField)                                          \
1874   declare_toplevel_type(ciSymbol)                                         \
1875   declare_toplevel_type(ciBaseObject)                                     \
1876   declare_type(ciObject, ciBaseObject)                                    \
1877   declare_type(ciInstance, ciObject)                                      \
1878   declare_type(ciMetadata, ciBaseObject)                                  \
1879   declare_type(ciMethod, ciMetadata)                                      \
1880   declare_type(ciMethodData, ciMetadata)                                  \
1881   declare_type(ciType, ciMetadata)                                        \
1882   declare_type(ciKlass, ciType)                                           \
1883   declare_type(ciInstanceKlass, ciKlass)                                  \
1884   declare_type(ciArrayKlass, ciKlass)                                     \
1885   declare_type(ciTypeArrayKlass, ciArrayKlass)                            \
1886   declare_type(ciObjArrayKlass, ciArrayKlass)                             \
1887                                                                           \
1888   /********************/                                                  \
1889   /* -XX flags        */                                                  \
1890   /********************/                                                  \
1891                                                                           \
1892   declare_toplevel_type(JVMFlag)                                          \
1893   declare_toplevel_type(JVMFlag*)                                         \
1894                                                                           \
1895   /********************/                                                  \
1896   /* JVMTI            */                                                  \
1897   /********************/                                                  \
1898                                                                           \
1899   declare_toplevel_type(JvmtiExport)                                      \
1900                                                                           \
1901   /********************/                                                  \
1902   /* JDK/VM version   */                                                  \
1903   /********************/                                                  \
1904                                                                           \
1905   declare_toplevel_type(Abstract_VM_Version)                              \
1906   declare_toplevel_type(JDK_Version)                                      \
1907                                                                           \
1908   /*************/                                                         \
1909   /* Arguments */                                                         \
1910   /*************/                                                         \
1911                                                                           \
1912   declare_toplevel_type(Arguments)                                        \
1913                                                                           \
1914   /***********/                                                           \
1915   /* VMError */                                                           \
1916   /***********/                                                           \
1917                                                                           \
1918   declare_toplevel_type(VMError)                                          \
1919                                                                           \
1920   /***************/                                                       \
1921   /* Other types */                                                       \
1922   /***************/                                                       \
1923                                                                           \
1924   /* all enum types */                                                    \
1925                                                                           \
1926    declare_integer_type(Bytecodes::Code)                                  \
1927    declare_integer_type(Generation::Name)                                 \
1928    declare_integer_type(InstanceKlass::ClassState)                        \
1929    declare_integer_type(JavaThreadState)                                  \
1930    declare_integer_type(ThreadState)                                      \
1931    declare_integer_type(Location::Type)                                   \
1932    declare_integer_type(Location::Where)                                  \
1933    declare_integer_type(JVMFlag::Flags)                                   \
1934    COMPILER2_PRESENT(declare_integer_type(OptoReg::Name))                 \
1935                                                                           \
1936    declare_toplevel_type(CHeapObj&lt;mtInternal&gt;)                            \
1937             declare_type(Array&lt;int&gt;, MetaspaceObj)                        \
1938             declare_type(Array&lt;u1&gt;, MetaspaceObj)                         \
1939             declare_type(Array&lt;u2&gt;, MetaspaceObj)                         \
1940             declare_type(Array&lt;Klass*&gt;, MetaspaceObj)                     \
1941             declare_type(Array&lt;Method*&gt;, MetaspaceObj)                    \
1942                                                                           \
1943    declare_toplevel_type(BitMap)                                          \
1944             declare_type(BitMapView, BitMap)                              \
1945                                                                           \
1946   declare_integer_type(markWord)                                          \
1947   declare_integer_type(AccessFlags)  /* FIXME: wrong type (not integer) */\
1948   declare_toplevel_type(address)      /* FIXME: should this be an integer type? */\
1949   declare_integer_type(BasicType)   /* FIXME: wrong type (not integer) */ \
1950   declare_toplevel_type(BreakpointInfo)                                   \
1951   declare_toplevel_type(BreakpointInfo*)                                  \
1952   declare_toplevel_type(CodeBlob*)                                        \
1953   declare_toplevel_type(RuntimeBlob*)                                     \
1954   declare_toplevel_type(CompressedWriteStream*)                           \
1955   declare_toplevel_type(ConstantPoolCacheEntry)                           \
1956   declare_toplevel_type(elapsedTimer)                                     \
1957   declare_toplevel_type(frame)                                            \
1958   declare_toplevel_type(intptr_t*)                                        \
1959    declare_unsigned_integer_type(InvocationCounter) /* FIXME: wrong type (not integer) */ \
1960   declare_toplevel_type(JavaThread*)                                      \
1961   declare_toplevel_type(JavaThread *const *const)                         \
1962   declare_toplevel_type(java_lang_Class)                                  \
1963   declare_integer_type(JavaThread::AsyncRequests)                         \
1964   declare_integer_type(JavaThread::TerminatedTypes)                       \
1965   declare_toplevel_type(jbyte*)                                           \
1966   declare_toplevel_type(jbyte**)                                          \
1967   declare_toplevel_type(jint*)                                            \
1968   declare_toplevel_type(jniIdMapBase*)                                    \
1969   declare_unsigned_integer_type(juint)                                    \
1970   declare_unsigned_integer_type(julong)                                   \
1971   declare_toplevel_type(JNIHandleBlock*)                                  \
1972   declare_toplevel_type(JNIid)                                            \
1973   declare_toplevel_type(JNIid*)                                           \
1974   declare_toplevel_type(jmethodID*)                                       \
1975   declare_toplevel_type(Mutex*)                                           \
1976   declare_toplevel_type(nmethod*)                                         \
1977   COMPILER2_PRESENT(declare_unsigned_integer_type(node_idx_t))            \
1978   declare_toplevel_type(ObjectMonitor*)                                   \
1979   declare_toplevel_type(PaddedObjectMonitor*)                             \
1980   declare_toplevel_type(oop*)                                             \
1981   declare_toplevel_type(OopMapCache*)                                     \
1982   declare_toplevel_type(VMReg)                                            \
1983   declare_toplevel_type(OSThread*)                                        \
1984    declare_integer_type(ReferenceType)                                    \
1985   declare_toplevel_type(StubQueue*)                                       \
1986   declare_toplevel_type(Thread*)                                          \
1987   declare_toplevel_type(Universe)                                         \
1988   declare_toplevel_type(CompressedOops)                                   \
1989   declare_toplevel_type(CompressedKlassPointers)                          \
1990   declare_toplevel_type(os)                                               \
1991   declare_toplevel_type(vframeArray)                                      \
1992   declare_toplevel_type(vframeArrayElement)                               \
1993   declare_toplevel_type(Annotations*)                                     \
1994   declare_type(OopMapValue, StackObj)                                     \
1995   declare_type(FileMapInfo, CHeapObj&lt;mtInternal&gt;)                         \
1996   declare_toplevel_type(FileMapHeader)                                    \
1997   declare_toplevel_type(CDSFileMapRegion)                                 \
1998                                                                           \
1999   /************/                                                          \
2000   /* GC types */                                                          \
2001   /************/                                                          \
2002                                                                           \
2003   VM_TYPES_GC(declare_type,                                               \
2004               declare_toplevel_type,                                      \
2005               declare_integer_type)
2006 
2007 //--------------------------------------------------------------------------------
2008 // VM_INT_CONSTANTS
2009 //
2010 // This table contains integer constants required over in the
2011 // serviceability agent. The "declare_constant" macro is used for all
2012 // enums, etc., while "declare_preprocessor_constant" must be used for
2013 // all #defined constants.
2014 
2015 #define VM_INT_CONSTANTS(declare_constant,                                \
2016                          declare_constant_with_value,                     \
2017                          declare_preprocessor_constant,                   \
2018                          declare_c1_constant,                             \
2019                          declare_c2_constant,                             \
2020                          declare_c2_preprocessor_constant)                \
2021                                                                           \
2022   /****************/                                                      \
2023   /* GC constants */                                                      \
2024   /****************/                                                      \
2025                                                                           \
2026   VM_INT_CONSTANTS_GC(declare_constant,                                   \
2027                       declare_constant_with_value)                        \
2028                                                                           \
2029   /******************/                                                    \
2030   /* Useful globals */                                                    \
2031   /******************/                                                    \
2032                                                                           \
2033   declare_preprocessor_constant("ASSERT", DEBUG_ONLY(1) NOT_DEBUG(0))     \
2034                                                                           \
2035   /****************/                                                      \
2036   /* Object sizes */                                                      \
2037   /****************/                                                      \
2038                                                                           \
2039   declare_constant(oopSize)                                               \
2040   declare_constant(LogBytesPerWord)                                       \
2041   declare_constant(BytesPerWord)                                          \
2042   declare_constant(BytesPerLong)                                          \
2043                                                                           \
2044   declare_constant(LogKlassAlignmentInBytes)                              \
2045                                                                           \
2046   declare_constant(HeapWordSize)                                          \
2047   declare_constant(LogHeapWordSize)                                       \
2048                                                                           \
2049                                                                           \
2050   /************************/                                              \
2051   /* PerfMemory - jvmstat */                                              \
2052   /************************/                                              \
2053                                                                           \
2054   declare_preprocessor_constant("PERFDATA_MAJOR_VERSION", PERFDATA_MAJOR_VERSION) \
2055   declare_preprocessor_constant("PERFDATA_MINOR_VERSION", PERFDATA_MINOR_VERSION) \
2056   declare_preprocessor_constant("PERFDATA_BIG_ENDIAN", PERFDATA_BIG_ENDIAN)       \
2057   declare_preprocessor_constant("PERFDATA_LITTLE_ENDIAN", PERFDATA_LITTLE_ENDIAN) \
2058                                                                           \
2059                                                                           \
2060   /************************************************************/          \
2061   /* HotSpot specific JVM_ACC constants from global anon enum */          \
2062   /************************************************************/          \
2063                                                                           \
2064   declare_constant(JVM_ACC_WRITTEN_FLAGS)                                 \
2065   declare_constant(JVM_ACC_MONITOR_MATCH)                                 \
2066   declare_constant(JVM_ACC_HAS_MONITOR_BYTECODES)                         \
2067   declare_constant(JVM_ACC_HAS_LOOPS)                                     \
2068   declare_constant(JVM_ACC_LOOPS_FLAG_INIT)                               \
2069   declare_constant(JVM_ACC_QUEUED)                                        \
2070   declare_constant(JVM_ACC_NOT_C2_OSR_COMPILABLE)                         \
2071   declare_constant(JVM_ACC_HAS_LINE_NUMBER_TABLE)                         \
2072   declare_constant(JVM_ACC_HAS_CHECKED_EXCEPTIONS)                        \
2073   declare_constant(JVM_ACC_HAS_JSRS)                                      \
2074   declare_constant(JVM_ACC_IS_OLD)                                        \
2075   declare_constant(JVM_ACC_IS_OBSOLETE)                                   \
2076   declare_constant(JVM_ACC_IS_PREFIXED_NATIVE)                            \
2077   declare_constant(JVM_ACC_HAS_MIRANDA_METHODS)                           \
2078   declare_constant(JVM_ACC_HAS_VANILLA_CONSTRUCTOR)                       \
2079   declare_constant(JVM_ACC_HAS_FINALIZER)                                 \
2080   declare_constant(JVM_ACC_IS_CLONEABLE_FAST)                             \
2081   declare_constant(JVM_ACC_HAS_LOCAL_VARIABLE_TABLE)                      \
2082   declare_constant(JVM_ACC_PROMOTED_FLAGS)                                \
2083   declare_constant(JVM_ACC_FIELD_ACCESS_WATCHED)                          \
2084   declare_constant(JVM_ACC_FIELD_MODIFICATION_WATCHED)                    \
2085   declare_constant(JVM_ACC_FIELD_INTERNAL)                                \
2086   declare_constant(JVM_ACC_FIELD_STABLE)                                  \
2087   declare_constant(JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE)                   \
2088                                                                           \
2089   declare_constant(JVM_CONSTANT_Utf8)                                     \
2090   declare_constant(JVM_CONSTANT_Unicode)                                  \
2091   declare_constant(JVM_CONSTANT_Integer)                                  \
2092   declare_constant(JVM_CONSTANT_Float)                                    \
2093   declare_constant(JVM_CONSTANT_Long)                                     \
2094   declare_constant(JVM_CONSTANT_Double)                                   \
2095   declare_constant(JVM_CONSTANT_Class)                                    \
2096   declare_constant(JVM_CONSTANT_String)                                   \
2097   declare_constant(JVM_CONSTANT_Fieldref)                                 \
2098   declare_constant(JVM_CONSTANT_Methodref)                                \
2099   declare_constant(JVM_CONSTANT_InterfaceMethodref)                       \
2100   declare_constant(JVM_CONSTANT_NameAndType)                              \
2101   declare_constant(JVM_CONSTANT_MethodHandle)                             \
2102   declare_constant(JVM_CONSTANT_MethodType)                               \
2103   declare_constant(JVM_CONSTANT_Dynamic)                                  \
2104   declare_constant(JVM_CONSTANT_InvokeDynamic)                            \
2105   declare_constant(JVM_CONSTANT_Module)                                   \
2106   declare_constant(JVM_CONSTANT_Package)                                  \
2107   declare_constant(JVM_CONSTANT_ExternalMax)                              \
2108                                                                           \
2109   declare_constant(JVM_CONSTANT_Invalid)                                  \
2110   declare_constant(JVM_CONSTANT_InternalMin)                              \
2111   declare_constant(JVM_CONSTANT_UnresolvedClass)                          \
2112   declare_constant(JVM_CONSTANT_ClassIndex)                               \
2113   declare_constant(JVM_CONSTANT_StringIndex)                              \
2114   declare_constant(JVM_CONSTANT_UnresolvedClassInError)                   \
2115   declare_constant(JVM_CONSTANT_MethodHandleInError)                      \
2116   declare_constant(JVM_CONSTANT_MethodTypeInError)                        \
2117   declare_constant(JVM_CONSTANT_DynamicInError)                           \
2118   declare_constant(JVM_CONSTANT_InternalMax)                              \
2119                                                                           \
2120   /*****************************/                                         \
2121   /* Thread::SuspendFlags enum */                                         \
2122   /*****************************/                                         \
2123                                                                           \
2124   declare_constant(Thread::_external_suspend)                             \
2125   declare_constant(Thread::_ext_suspended)                                \
2126   declare_constant(Thread::_has_async_exception)                          \
2127                                                                           \
2128   /*******************/                                                   \
2129   /* JavaThreadState */                                                   \
2130   /*******************/                                                   \
2131                                                                           \
2132   declare_constant(_thread_uninitialized)                                 \
2133   declare_constant(_thread_new)                                           \
2134   declare_constant(_thread_new_trans)                                     \
2135   declare_constant(_thread_in_native)                                     \
2136   declare_constant(_thread_in_native_trans)                               \
2137   declare_constant(_thread_in_vm)                                         \
2138   declare_constant(_thread_in_vm_trans)                                   \
2139   declare_constant(_thread_in_Java)                                       \
2140   declare_constant(_thread_in_Java_trans)                                 \
2141   declare_constant(_thread_blocked)                                       \
2142   declare_constant(_thread_blocked_trans)                                 \
2143   declare_constant(JavaThread::_not_terminated)                           \
2144   declare_constant(JavaThread::_thread_exiting)                           \
2145                                                                           \
2146   /*******************/                                                   \
2147   /* JavaThreadState */                                                   \
2148   /*******************/                                                   \
2149                                                                           \
2150   declare_constant(ALLOCATED)                                             \
2151   declare_constant(INITIALIZED)                                           \
2152   declare_constant(RUNNABLE)                                              \
2153   declare_constant(MONITOR_WAIT)                                          \
2154   declare_constant(CONDVAR_WAIT)                                          \
2155   declare_constant(OBJECT_WAIT)                                           \
2156   declare_constant(BREAKPOINTED)                                          \
2157   declare_constant(SLEEPING)                                              \
2158   declare_constant(ZOMBIE)                                                \
2159                                                                           \
2160   /******************************/                                        \
2161   /* Klass misc. enum constants */                                        \
2162   /******************************/                                        \
2163                                                                           \
2164   declare_constant(Klass::_primary_super_limit)                           \
2165   declare_constant(Klass::_lh_neutral_value)                              \
2166   declare_constant(Klass::_lh_instance_slow_path_bit)                     \
2167   declare_constant(Klass::_lh_log2_element_size_shift)                    \
2168   declare_constant(Klass::_lh_log2_element_size_mask)                     \
2169   declare_constant(Klass::_lh_element_type_shift)                         \
2170   declare_constant(Klass::_lh_element_type_mask)                          \
2171   declare_constant(Klass::_lh_header_size_shift)                          \
2172   declare_constant(Klass::_lh_header_size_mask)                           \
2173   declare_constant(Klass::_lh_array_tag_shift)                            \
2174   declare_constant(Klass::_lh_array_tag_type_value)                       \
2175   declare_constant(Klass::_lh_array_tag_obj_value)                        \
2176                                                                           \
2177   /********************************/                                      \
2178   /* ConstMethod anon-enum */                                             \
2179   /********************************/                                      \
2180                                                                           \
2181   declare_constant(Method::_caller_sensitive)                             \
2182   declare_constant(Method::_force_inline)                                 \
2183   declare_constant(Method::_dont_inline)                                  \
2184   declare_constant(Method::_hidden)                                       \
2185                                                                           \
2186   declare_constant(Method::nonvirtual_vtable_index)                       \
2187                                                                           \
2188   declare_constant(Method::extra_stack_entries_for_jsr292)                \
2189                                                                           \
2190   declare_constant(ConstMethod::_has_linenumber_table)                    \
2191   declare_constant(ConstMethod::_has_checked_exceptions)                  \
2192   declare_constant(ConstMethod::_has_localvariable_table)                 \
2193   declare_constant(ConstMethod::_has_exception_table)                     \
2194   declare_constant(ConstMethod::_has_generic_signature)                   \
2195   declare_constant(ConstMethod::_has_method_parameters)                   \
2196   declare_constant(ConstMethod::_has_method_annotations)                  \
2197   declare_constant(ConstMethod::_has_parameter_annotations)               \
2198   declare_constant(ConstMethod::_has_default_annotations)                 \
2199   declare_constant(ConstMethod::_has_type_annotations)                    \
2200                                                                           \
2201   /**************/                                                        \
2202   /* DataLayout */                                                        \
2203   /**************/                                                        \
2204                                                                           \
2205   declare_constant(DataLayout::cell_size)                                 \
2206   declare_constant(DataLayout::no_tag)                                    \
2207   declare_constant(DataLayout::bit_data_tag)                              \
2208   declare_constant(DataLayout::counter_data_tag)                          \
2209   declare_constant(DataLayout::jump_data_tag)                             \
2210   declare_constant(DataLayout::receiver_type_data_tag)                    \
2211   declare_constant(DataLayout::virtual_call_data_tag)                     \
2212   declare_constant(DataLayout::ret_data_tag)                              \
2213   declare_constant(DataLayout::branch_data_tag)                           \
2214   declare_constant(DataLayout::multi_branch_data_tag)                     \
2215   declare_constant(DataLayout::arg_info_data_tag)                         \
2216   declare_constant(DataLayout::call_type_data_tag)                        \
2217   declare_constant(DataLayout::virtual_call_type_data_tag)                \
2218   declare_constant(DataLayout::parameters_type_data_tag)                  \
2219   declare_constant(DataLayout::speculative_trap_data_tag)                 \
2220                                                                           \
2221   /*************************************/                                 \
2222   /* InstanceKlass enum                */                                 \
2223   /*************************************/                                 \
2224                                                                           \
2225                                                                           \
2226   /*************************************/                                 \
2227   /* FieldInfo FieldOffset enum        */                                 \
2228   /*************************************/                                 \
2229                                                                           \
2230   declare_constant(FieldInfo::access_flags_offset)                        \
2231   declare_constant(FieldInfo::name_index_offset)                          \
2232   declare_constant(FieldInfo::signature_index_offset)                     \
2233   declare_constant(FieldInfo::initval_index_offset)                       \
2234   declare_constant(FieldInfo::low_packed_offset)                          \
2235   declare_constant(FieldInfo::high_packed_offset)                         \
2236   declare_constant(FieldInfo::field_slots)                                \
2237                                                                           \
2238   /*************************************/                                 \
2239   /* FieldInfo tag constants           */                                 \
2240   /*************************************/                                 \
2241                                                                           \
2242   declare_preprocessor_constant("FIELDINFO_TAG_SIZE", FIELDINFO_TAG_SIZE) \
2243   declare_preprocessor_constant("FIELDINFO_TAG_MASK", FIELDINFO_TAG_MASK) \
2244   declare_preprocessor_constant("FIELDINFO_TAG_OFFSET", FIELDINFO_TAG_OFFSET) \
2245                                                                           \
2246   /************************************************/                      \
2247   /* InstanceKlass InnerClassAttributeOffset enum */                      \
2248   /************************************************/                      \
2249                                                                           \
2250   declare_constant(InstanceKlass::inner_class_inner_class_info_offset)    \
2251   declare_constant(InstanceKlass::inner_class_outer_class_info_offset)    \
2252   declare_constant(InstanceKlass::inner_class_inner_name_offset)          \
2253   declare_constant(InstanceKlass::inner_class_access_flags_offset)        \
2254   declare_constant(InstanceKlass::inner_class_next_offset)                \
2255                                                                           \
2256   /*****************************************************/                 \
2257   /* InstanceKlass EnclosingMethodAttributeOffset enum */                 \
2258   /*****************************************************/                 \
2259                                                                           \
2260   declare_constant(InstanceKlass::enclosing_method_attribute_size)        \
2261                                                                           \
2262   /*********************************/                                     \
2263   /* InstanceKlass ClassState enum */                                     \
2264   /*********************************/                                     \
2265                                                                           \
2266   declare_constant(InstanceKlass::allocated)                              \
2267   declare_constant(InstanceKlass::loaded)                                 \
2268   declare_constant(InstanceKlass::linked)                                 \
2269   declare_constant(InstanceKlass::being_initialized)                      \
2270   declare_constant(InstanceKlass::fully_initialized)                      \
2271   declare_constant(InstanceKlass::initialization_error)                   \
2272                                                                           \
2273   /***************************************/                               \
2274   /* InstanceKlass enums for _misc_flags */                               \
2275   /***************************************/                               \
2276                                                                           \
2277   declare_constant(InstanceKlass::_misc_rewritten)                        \
2278   declare_constant(InstanceKlass::_misc_has_nonstatic_fields)             \
2279   declare_constant(InstanceKlass::_misc_should_verify_class)              \
2280   declare_constant(InstanceKlass::_misc_is_unsafe_anonymous)              \
2281   declare_constant(InstanceKlass::_misc_is_contended)                     \
2282   declare_constant(InstanceKlass::_misc_has_nonstatic_concrete_methods)   \
2283   declare_constant(InstanceKlass::_misc_declares_nonstatic_concrete_methods)\
2284   declare_constant(InstanceKlass::_misc_has_been_redefined)               \
2285   declare_constant(InstanceKlass::_misc_has_passed_fingerprint_check)     \
2286   declare_constant(InstanceKlass::_misc_is_scratch_class)                 \
2287   declare_constant(InstanceKlass::_misc_is_shared_boot_class)             \
2288   declare_constant(InstanceKlass::_misc_is_shared_platform_class)         \
2289   declare_constant(InstanceKlass::_misc_is_shared_app_class)              \
2290                                                                           \
2291   /*********************************/                                     \
2292   /* Symbol* - symbol max length */                                       \
2293   /*********************************/                                     \
2294                                                                           \
2295   declare_constant(Symbol::max_symbol_length)                             \
2296                                                                           \
2297   /***********************************************/                       \
2298   /* ConstantPool* layout enum for InvokeDynamic */                       \
2299   /***********************************************/                       \
2300                                                                           \
2301   declare_constant(ConstantPool::_indy_bsm_offset)                        \
2302   declare_constant(ConstantPool::_indy_argc_offset)                       \
2303   declare_constant(ConstantPool::_indy_argv_offset)                       \
2304   declare_constant(ConstantPool::CPCACHE_INDEX_TAG)                       \
2305                                                                           \
2306   /********************************/                                      \
2307   /* ConstantPoolCacheEntry enums */                                      \
2308   /********************************/                                      \
2309                                                                           \
2310   declare_constant(ConstantPoolCacheEntry::is_volatile_shift)             \
2311   declare_constant(ConstantPoolCacheEntry::is_final_shift)                \
2312   declare_constant(ConstantPoolCacheEntry::is_forced_virtual_shift)       \
2313   declare_constant(ConstantPoolCacheEntry::is_vfinal_shift)               \
2314   declare_constant(ConstantPoolCacheEntry::is_field_entry_shift)          \
2315   declare_constant(ConstantPoolCacheEntry::tos_state_shift)               \
2316                                                                           \
2317   /***************************************/                               \
2318   /* java_lang_Thread::ThreadStatus enum */                               \
2319   /***************************************/                               \
2320                                                                           \
2321   declare_constant(java_lang_Thread::NEW)                                 \
2322   declare_constant(java_lang_Thread::RUNNABLE)                            \
2323   declare_constant(java_lang_Thread::SLEEPING)                            \
2324   declare_constant(java_lang_Thread::IN_OBJECT_WAIT)                      \
2325   declare_constant(java_lang_Thread::IN_OBJECT_WAIT_TIMED)                \
2326   declare_constant(java_lang_Thread::PARKED)                              \
2327   declare_constant(java_lang_Thread::PARKED_TIMED)                        \
2328   declare_constant(java_lang_Thread::BLOCKED_ON_MONITOR_ENTER)            \
2329   declare_constant(java_lang_Thread::TERMINATED)                          \
2330                                                                           \
2331   /******************************/                                        \
2332   /* Debug info                 */                                        \
2333   /******************************/                                        \
2334                                                                           \
2335   declare_constant(Location::OFFSET_MASK)                                 \
2336   declare_constant(Location::OFFSET_SHIFT)                                \
2337   declare_constant(Location::TYPE_MASK)                                   \
2338   declare_constant(Location::TYPE_SHIFT)                                  \
2339   declare_constant(Location::WHERE_MASK)                                  \
2340   declare_constant(Location::WHERE_SHIFT)                                 \
2341                                                                           \
2342   /* constants from Location::Type enum  */                               \
2343                                                                           \
2344   declare_constant(Location::normal)                                      \
2345   declare_constant(Location::oop)                                         \
2346   declare_constant(Location::narrowoop)                                   \
2347   declare_constant(Location::int_in_long)                                 \
2348   declare_constant(Location::lng)                                         \
2349   declare_constant(Location::float_in_dbl)                                \
2350   declare_constant(Location::dbl)                                         \
2351   declare_constant(Location::addr)                                        \
2352   declare_constant(Location::invalid)                                     \
2353                                                                           \
2354   /* constants from Location::Where enum */                               \
2355                                                                           \
2356   declare_constant(Location::on_stack)                                    \
2357   declare_constant(Location::in_register)                                 \
2358                                                                           \
2359   declare_constant(Deoptimization::Reason_many)                           \
2360   declare_constant(Deoptimization::Reason_none)                           \
2361   declare_constant(Deoptimization::Reason_null_check)                     \
2362   declare_constant(Deoptimization::Reason_null_assert)                    \
2363   declare_constant(Deoptimization::Reason_range_check)                    \
2364   declare_constant(Deoptimization::Reason_class_check)                    \
2365   declare_constant(Deoptimization::Reason_array_check)                    \
2366   declare_constant(Deoptimization::Reason_intrinsic)                      \
2367   declare_constant(Deoptimization::Reason_bimorphic)                      \
2368   declare_constant(Deoptimization::Reason_profile_predicate)              \
2369   declare_constant(Deoptimization::Reason_unloaded)                       \
2370   declare_constant(Deoptimization::Reason_uninitialized)                  \
2371   declare_constant(Deoptimization::Reason_initialized)                    \
2372   declare_constant(Deoptimization::Reason_unreached)                      \
2373   declare_constant(Deoptimization::Reason_unhandled)                      \
2374   declare_constant(Deoptimization::Reason_constraint)                     \
2375   declare_constant(Deoptimization::Reason_div0_check)                     \
2376   declare_constant(Deoptimization::Reason_age)                            \
2377   declare_constant(Deoptimization::Reason_predicate)                      \
2378   declare_constant(Deoptimization::Reason_loop_limit_check)               \
2379   declare_constant(Deoptimization::Reason_speculate_class_check)          \
2380   declare_constant(Deoptimization::Reason_speculate_null_check)           \
2381   declare_constant(Deoptimization::Reason_speculate_null_assert)          \
2382   declare_constant(Deoptimization::Reason_rtm_state_change)               \
2383   declare_constant(Deoptimization::Reason_unstable_if)                    \
2384   declare_constant(Deoptimization::Reason_unstable_fused_if)              \
2385   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_aliasing)))                       \
2386   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_transfer_to_interpreter)))        \
2387   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_not_compiled_exception_handler))) \
2388   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_unresolved)))                     \
2389   NOT_ZERO(JVMCI_ONLY(declare_constant(Deoptimization::Reason_jsr_mismatch)))                   \
2390   declare_constant(Deoptimization::Reason_tenured)                        \
2391   declare_constant(Deoptimization::Reason_LIMIT)                          \
2392   declare_constant(Deoptimization::Reason_RECORDED_LIMIT)                 \
2393                                                                           \
2394   declare_constant(Deoptimization::Action_none)                           \
2395   declare_constant(Deoptimization::Action_maybe_recompile)                \
2396   declare_constant(Deoptimization::Action_reinterpret)                    \
2397   declare_constant(Deoptimization::Action_make_not_entrant)               \
2398   declare_constant(Deoptimization::Action_make_not_compilable)            \
2399   declare_constant(Deoptimization::Action_LIMIT)                          \
2400                                                                           \
2401   /***************************************************/                   \
2402   /* DEFAULT_CACHE_LINE_SIZE (globalDefinitions.hpp) */                   \
2403   /***************************************************/                   \
2404                                                                           \
2405   declare_preprocessor_constant("DEFAULT_CACHE_LINE_SIZE", DEFAULT_CACHE_LINE_SIZE) \
2406                                                                           \
2407   declare_constant(Deoptimization::Unpack_deopt)                          \
2408   declare_constant(Deoptimization::Unpack_exception)                      \
2409   declare_constant(Deoptimization::Unpack_uncommon_trap)                  \
2410   declare_constant(Deoptimization::Unpack_reexecute)                      \
2411                                                                           \
2412   declare_constant(Deoptimization::_action_bits)                          \
2413   declare_constant(Deoptimization::_reason_bits)                          \
2414   declare_constant(Deoptimization::_debug_id_bits)                        \
2415   declare_constant(Deoptimization::_action_shift)                         \
2416   declare_constant(Deoptimization::_reason_shift)                         \
2417   declare_constant(Deoptimization::_debug_id_shift)                       \
2418                                                                           \
2419   /******************************************/                            \
2420   /* BasicType enum (globalDefinitions.hpp) */                            \
2421   /******************************************/                            \
2422                                                                           \
2423   declare_constant(T_BOOLEAN)                                             \
2424   declare_constant(T_CHAR)                                                \
2425   declare_constant(T_FLOAT)                                               \
2426   declare_constant(T_DOUBLE)                                              \
2427   declare_constant(T_BYTE)                                                \
2428   declare_constant(T_SHORT)                                               \
2429   declare_constant(T_INT)                                                 \
2430   declare_constant(T_LONG)                                                \
2431   declare_constant(T_OBJECT)                                              \
2432   declare_constant(T_ARRAY)                                               \
2433   declare_constant(T_VOID)                                                \
2434   declare_constant(T_ADDRESS)                                             \
2435   declare_constant(T_NARROWOOP)                                           \
2436   declare_constant(T_METADATA)                                            \
2437   declare_constant(T_NARROWKLASS)                                         \
2438   declare_constant(T_CONFLICT)                                            \
2439   declare_constant(T_ILLEGAL)                                             \
2440                                                                           \
2441   /**********************************************/                        \
2442   /* BasicTypeSize enum (globalDefinitions.hpp) */                        \
2443   /**********************************************/                        \
2444                                                                           \
2445   declare_constant(T_BOOLEAN_size)                                        \
2446   declare_constant(T_CHAR_size)                                           \
2447   declare_constant(T_FLOAT_size)                                          \
2448   declare_constant(T_DOUBLE_size)                                         \
2449   declare_constant(T_BYTE_size)                                           \
2450   declare_constant(T_SHORT_size)                                          \
2451   declare_constant(T_INT_size)                                            \
2452   declare_constant(T_LONG_size)                                           \
2453   declare_constant(T_OBJECT_size)                                         \
2454   declare_constant(T_ARRAY_size)                                          \
2455   declare_constant(T_NARROWOOP_size)                                      \
2456   declare_constant(T_NARROWKLASS_size)                                    \
2457   declare_constant(T_VOID_size)                                           \
2458                                                                           \
2459   /*********************/                                                 \
2460   /* Matcher (C2 only) */                                                 \
2461   /*********************/                                                 \
2462                                                                           \
2463   declare_c2_preprocessor_constant("Matcher::interpreter_frame_pointer_reg", Matcher::interpreter_frame_pointer_reg()) \
2464                                                                           \
2465   /*********************************************/                         \
2466   /* MethodCompilation (globalDefinitions.hpp) */                         \
2467   /*********************************************/                         \
2468                                                                           \
2469   declare_constant(InvocationEntryBci)                                    \
2470                                                                           \
2471   /*************/                                                         \
2472   /* CompLevel */                                                         \
2473   /*************/                                                         \
2474                                                                           \
2475   declare_constant(CompLevel_any)                                         \
2476   declare_constant(CompLevel_all)                                         \
2477   declare_constant(CompLevel_none)                                        \
2478   declare_constant(CompLevel_simple)                                      \
2479   declare_constant(CompLevel_limited_profile)                             \
2480   declare_constant(CompLevel_full_profile)                                \
2481   declare_constant(CompLevel_full_optimization)                           \
2482   declare_constant(CompLevel_aot)                                         \
2483                                                                           \
2484   /***************/                                                       \
2485   /* OopMapValue */                                                       \
2486   /***************/                                                       \
2487                                                                           \
2488   declare_constant(OopMapValue::type_bits)                                \
2489   declare_constant(OopMapValue::register_bits)                            \
2490   declare_constant(OopMapValue::type_shift)                               \
2491   declare_constant(OopMapValue::register_shift)                           \
2492   declare_constant(OopMapValue::type_mask)                                \
2493   declare_constant(OopMapValue::type_mask_in_place)                       \
2494   declare_constant(OopMapValue::register_mask)                            \
2495   declare_constant(OopMapValue::register_mask_in_place)                   \
2496   declare_constant(OopMapValue::unused_value)                             \
2497   declare_constant(OopMapValue::oop_value)                                \
2498   declare_constant(OopMapValue::narrowoop_value)                          \
2499   declare_constant(OopMapValue::callee_saved_value)                       \
2500   declare_constant(OopMapValue::derived_oop_value)                        \
2501                                                                           \
2502   /******************/                                                    \
2503   /* JNIHandleBlock */                                                    \
2504   /******************/                                                    \
2505                                                                           \
2506   declare_constant(JNIHandleBlock::block_size_in_oops)                    \
2507                                                                           \
2508   /**********************/                                                \
2509   /* ObjectSynchronizer */                                                \
2510   /**********************/                                                \
2511                                                                           \
2512   declare_constant(ObjectSynchronizer::_BLOCKSIZE)                        \
2513                                                                           \
2514   /**********************/                                                \
2515   /* PcDesc             */                                                \
2516   /**********************/                                                \
2517                                                                           \
2518   declare_constant(PcDesc::PCDESC_reexecute)                              \
2519   declare_constant(PcDesc::PCDESC_is_method_handle_invoke)                \
2520   declare_constant(PcDesc::PCDESC_return_oop)                             \
2521                                                                           \
2522   /**********************/                                                \
2523   /* frame              */                                                \
2524   /**********************/                                                \
2525   NOT_ZERO(PPC64_ONLY(declare_constant(frame::entry_frame_locals_size)))  \
2526                                                                           \
2527   NOT_ZERO(X86_ONLY(declare_constant(frame::entry_frame_call_wrapper_offset)))      \
2528   declare_constant(frame::pc_return_offset)                               \
2529                                                                           \
2530   /*************/                                                         \
2531   /* vmSymbols */                                                         \
2532   /*************/                                                         \
2533                                                                           \
2534   declare_constant(vmSymbols::FIRST_SID)                                  \
2535   declare_constant(vmSymbols::SID_LIMIT)                                  \
2536                                                                           \
2537   /****************/                                                      \
2538   /* vmIntrinsics */                                                      \
2539   /****************/                                                      \
2540                                                                           \
2541   declare_constant(vmIntrinsics::_invokeBasic)                            \
2542   declare_constant(vmIntrinsics::_linkToVirtual)                          \
2543   declare_constant(vmIntrinsics::_linkToStatic)                           \
2544   declare_constant(vmIntrinsics::_linkToSpecial)                          \
2545   declare_constant(vmIntrinsics::_linkToInterface)                        \
2546                                                                           \
2547   /********************************/                                      \
2548   /* Calling convention constants */                                      \
2549   /********************************/                                      \
2550                                                                           \
2551   declare_constant(RegisterImpl::number_of_registers)                     \
2552   declare_constant(ConcreteRegisterImpl::number_of_registers)             \
2553   declare_preprocessor_constant("REG_COUNT", REG_COUNT)                \
2554   declare_c2_preprocessor_constant("SAVED_ON_ENTRY_REG_COUNT", SAVED_ON_ENTRY_REG_COUNT) \
2555   declare_c2_preprocessor_constant("C_SAVED_ON_ENTRY_REG_COUNT", C_SAVED_ON_ENTRY_REG_COUNT) \
2556                                                                           \
2557   /************/                                                          \
2558   /* PerfData */                                                          \
2559   /************/                                                          \
2560                                                                           \
2561   /***********************/                                               \
2562   /* PerfData Units enum */                                               \
2563   /***********************/                                               \
2564                                                                           \
2565   declare_constant(PerfData::U_None)                                      \
2566   declare_constant(PerfData::U_Bytes)                                     \
2567   declare_constant(PerfData::U_Ticks)                                     \
2568   declare_constant(PerfData::U_Events)                                    \
2569   declare_constant(PerfData::U_String)                                    \
2570   declare_constant(PerfData::U_Hertz)                                     \
2571                                                                           \
2572   /****************/                                                      \
2573   /* JVMCI */                                                             \
2574   /****************/                                                      \
2575                                                                           \
2576   declare_preprocessor_constant("INCLUDE_JVMCI", INCLUDE_JVMCI)           \
2577                                                                           \
2578   /****************/                                                      \
2579   /*  VMRegImpl   */                                                      \
2580   /****************/                                                      \
2581   declare_constant(VMRegImpl::stack_slot_size)                            \
2582                                                                           \
2583   /******************************/                                        \
2584   /*  -XX flags (value origin)  */                                        \
2585   /******************************/                                        \
2586   declare_constant(JVMFlag::DEFAULT)                                      \
2587   declare_constant(JVMFlag::COMMAND_LINE)                                 \
2588   declare_constant(JVMFlag::ENVIRON_VAR)                                  \
2589   declare_constant(JVMFlag::CONFIG_FILE)                                  \
2590   declare_constant(JVMFlag::MANAGEMENT)                                   \
2591   declare_constant(JVMFlag::ERGONOMIC)                                    \
2592   declare_constant(JVMFlag::ATTACH_ON_DEMAND)                             \
2593   declare_constant(JVMFlag::INTERNAL)                                     \
2594   declare_constant(JVMFlag::JIMAGE_RESOURCE)                              \
2595   declare_constant(JVMFlag::VALUE_ORIGIN_MASK)                            \
2596   declare_constant(JVMFlag::ORIG_COMMAND_LINE)
2597 
2598 //--------------------------------------------------------------------------------
2599 // VM_LONG_CONSTANTS
2600 //
2601 // This table contains long constants required over in the
2602 // serviceability agent. The "declare_constant" macro is used for all
2603 // enums, etc., while "declare_preprocessor_constant" must be used for
2604 // all #defined constants.
2605 
2606 #define VM_LONG_CONSTANTS(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
2607                                                                           \
2608   /****************/                                                      \
2609   /* GC constants */                                                      \
2610   /****************/                                                      \
2611                                                                           \
2612   VM_LONG_CONSTANTS_GC(declare_constant)                                  \
2613                                                                           \
2614   /*********************/                                                 \
2615   /* markWord constants */                                                \
2616   /*********************/                                                 \
2617                                                                           \
2618   /* Note: some of these are declared as long constants just for */       \
2619   /* consistency. The mask constants are the only ones requiring */       \
2620   /* 64 bits (on 64-bit platforms). */                                    \
2621                                                                           \
2622   declare_constant(markWord::age_bits)                                    \
2623   declare_constant(markWord::lock_bits)                                   \
2624   declare_constant(markWord::biased_lock_bits)                            \
2625   declare_constant(markWord::max_hash_bits)                               \
2626   declare_constant(markWord::hash_bits)                                   \
2627                                                                           \
2628   declare_constant(markWord::lock_shift)                                  \
2629   declare_constant(markWord::biased_lock_shift)                           \
2630   declare_constant(markWord::age_shift)                                   \
2631   declare_constant(markWord::hash_shift)                                  \
2632                                                                           \
2633   declare_constant(markWord::lock_mask)                                   \
2634   declare_constant(markWord::lock_mask_in_place)                          \
2635   declare_constant(markWord::biased_lock_mask)                            \
2636   declare_constant(markWord::biased_lock_mask_in_place)                   \
2637   declare_constant(markWord::biased_lock_bit_in_place)                    \
2638   declare_constant(markWord::age_mask)                                    \
2639   declare_constant(markWord::age_mask_in_place)                           \
2640   declare_constant(markWord::epoch_mask)                                  \
2641   declare_constant(markWord::epoch_mask_in_place)                         \
2642   declare_constant(markWord::hash_mask)                                   \
2643   declare_constant(markWord::hash_mask_in_place)                          \
2644   declare_constant(markWord::biased_lock_alignment)                       \
2645                                                                           \
2646   declare_constant(markWord::locked_value)                                \
2647   declare_constant(markWord::unlocked_value)                              \
2648   declare_constant(markWord::monitor_value)                               \
2649   declare_constant(markWord::marked_value)                                \
2650   declare_constant(markWord::biased_lock_pattern)                         \
2651                                                                           \
2652   declare_constant(markWord::no_hash)                                     \
2653   declare_constant(markWord::no_hash_in_place)                            \
2654   declare_constant(markWord::no_lock_in_place)                            \
2655   declare_constant(markWord::max_age)                                     \
2656                                                                           \
2657   /* InvocationCounter constants */                                       \
2658   declare_constant(InvocationCounter::count_increment)                    \
2659   declare_constant(InvocationCounter::count_shift)
2660 
2661 
2662 //--------------------------------------------------------------------------------
2663 //
2664 
2665 // Generate and check a nonstatic field in non-product builds
2666 #ifndef PRODUCT
2667 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2668 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2669 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2670 #else
2671 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2672 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2673 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)
2674 #endif /* PRODUCT */
2675 
2676 // Generate and check a nonstatic field in C1 builds
2677 #ifdef COMPILER1
2678 # define GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2679 # define CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2680 # define ENSURE_C1_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2681 #else
2682 # define GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2683 # define CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2684 # define ENSURE_C1_FIELD_TYPE_PRESENT(a, b, c)
2685 #endif /* COMPILER1 */
2686 // Generate and check a nonstatic field in C2 builds
2687 #ifdef COMPILER2
2688 # define GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2689 # define CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2690 # define ENSURE_C2_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2691 #else
2692 # define GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2693 # define CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2694 # define ENSURE_C2_FIELD_TYPE_PRESENT(a, b, c)
2695 #endif /* COMPILER2 */
2696 
2697 // Generate but do not check a static field in C1 builds
2698 #ifdef COMPILER1
2699 # define GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2700 #else
2701 # define GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2702 #endif /* COMPILER1 */
2703 
2704 // Generate but do not check a static field in C2 builds
2705 #ifdef COMPILER2
2706 # define GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2707 #else
2708 # define GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2709 #endif /* COMPILER2 */
2710 
2711 //--------------------------------------------------------------------------------
2712 // VMTypeEntry build-specific macros
2713 //
2714 
2715 #ifdef COMPILER1
2716 # define GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY(a)               GENERATE_TOPLEVEL_VM_TYPE_ENTRY(a)
2717 # define CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
2718 #else
2719 # define GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
2720 # define CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
2721 #endif /* COMPILER1 */
2722 
2723 #ifdef COMPILER2
2724 # define GENERATE_C2_VM_TYPE_ENTRY(a, b)                     GENERATE_VM_TYPE_ENTRY(a, b)
2725 # define CHECK_C2_VM_TYPE_ENTRY(a, b)                        CHECK_VM_TYPE_ENTRY(a, b)
2726 # define GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY(a)               GENERATE_TOPLEVEL_VM_TYPE_ENTRY(a)
2727 # define CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
2728 #else
2729 # define GENERATE_C2_VM_TYPE_ENTRY(a, b)
2730 # define CHECK_C2_VM_TYPE_ENTRY(a, b)
2731 # define GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
2732 # define CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
2733 #endif /* COMPILER2 */
2734 
2735 
2736 //--------------------------------------------------------------------------------
2737 // VMIntConstantEntry build-specific macros
2738 //
2739 
2740 // Generate an int constant for a C1 build
2741 #ifdef COMPILER1
2742 # define GENERATE_C1_VM_INT_CONSTANT_ENTRY(name)  GENERATE_VM_INT_CONSTANT_ENTRY(name)
2743 #else
2744 # define GENERATE_C1_VM_INT_CONSTANT_ENTRY(name)
2745 #endif /* COMPILER1 */
2746 
2747 // Generate an int constant for a C2 build
2748 #ifdef COMPILER2
2749 # define GENERATE_C2_VM_INT_CONSTANT_ENTRY(name)                      GENERATE_VM_INT_CONSTANT_ENTRY(name)
2750 # define GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)  GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)
2751 #else
2752 # define GENERATE_C2_VM_INT_CONSTANT_ENTRY(name)
2753 # define GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)
2754 #endif /* COMPILER1 */
2755 
2756 
2757 //--------------------------------------------------------------------------------
2758 // VMLongConstantEntry build-specific macros
2759 //
2760 
2761 // Generate a long constant for a C1 build
2762 #ifdef COMPILER1
2763 # define GENERATE_C1_VM_LONG_CONSTANT_ENTRY(name)  GENERATE_VM_LONG_CONSTANT_ENTRY(name)
2764 #else
2765 # define GENERATE_C1_VM_LONG_CONSTANT_ENTRY(name)
2766 #endif /* COMPILER1 */
2767 
2768 // Generate a long constant for a C2 build
2769 #ifdef COMPILER2
2770 # define GENERATE_C2_VM_LONG_CONSTANT_ENTRY(name)                     GENERATE_VM_LONG_CONSTANT_ENTRY(name)
2771 # define GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value) GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value)
2772 #else
2773 # define GENERATE_C2_VM_LONG_CONSTANT_ENTRY(name)
2774 # define GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value)
2775 #endif /* COMPILER1 */
2776 
2777 
2778 //
2779 // Instantiation of VMStructEntries, VMTypeEntries and VMIntConstantEntries
2780 //
2781 
2782 // These initializers are allowed to access private fields in classes
2783 // as long as class VMStructs is a friend
2784 VMStructEntry VMStructs::localHotSpotVMStructs[] = {
2785 
2786   VM_STRUCTS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2787              GENERATE_STATIC_VM_STRUCT_ENTRY,
2788              GENERATE_STATIC_PTR_VOLATILE_VM_STRUCT_ENTRY,
2789              GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
2790              GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2791              GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2792              GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY,
2793              GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
2794              GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
2795              GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
2796 
2797 
2798   VM_STRUCTS_OS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2799                 GENERATE_STATIC_VM_STRUCT_ENTRY,
2800                 GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
2801                 GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2802                 GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2803                 GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
2804                 GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
2805                 GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
2806 
2807   VM_STRUCTS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2808                  GENERATE_STATIC_VM_STRUCT_ENTRY,
2809                  GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
2810                  GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2811                  GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2812                  GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
2813                  GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
2814                  GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
2815 
2816   VM_STRUCTS_OS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2817                     GENERATE_STATIC_VM_STRUCT_ENTRY,
2818                     GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
2819                     GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
2820                     GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2821                     GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
2822                     GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
2823                     GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
2824 
2825   GENERATE_VM_STRUCT_LAST_ENTRY()
2826 };
2827 
2828 size_t VMStructs::localHotSpotVMStructsLength() {
2829   return sizeof(localHotSpotVMStructs) / sizeof(VMStructEntry);
2830 }
2831 
2832 VMTypeEntry VMStructs::localHotSpotVMTypes[] = {
2833 
2834   VM_TYPES(GENERATE_VM_TYPE_ENTRY,
2835            GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
2836            GENERATE_OOP_VM_TYPE_ENTRY,
2837            GENERATE_INTEGER_VM_TYPE_ENTRY,
2838            GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
2839            GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
2840            GENERATE_C2_VM_TYPE_ENTRY,
2841            GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
2842 
2843 
2844   VM_TYPES_OS(GENERATE_VM_TYPE_ENTRY,
2845               GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
2846               GENERATE_OOP_VM_TYPE_ENTRY,
2847               GENERATE_INTEGER_VM_TYPE_ENTRY,
2848               GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
2849               GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
2850               GENERATE_C2_VM_TYPE_ENTRY,
2851               GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
2852 
2853   VM_TYPES_CPU(GENERATE_VM_TYPE_ENTRY,
2854                GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
2855                GENERATE_OOP_VM_TYPE_ENTRY,
2856                GENERATE_INTEGER_VM_TYPE_ENTRY,
2857                GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
2858                GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
2859                GENERATE_C2_VM_TYPE_ENTRY,
2860                GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
2861 
2862   VM_TYPES_OS_CPU(GENERATE_VM_TYPE_ENTRY,
2863                   GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
2864                   GENERATE_OOP_VM_TYPE_ENTRY,
2865                   GENERATE_INTEGER_VM_TYPE_ENTRY,
2866                   GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
2867                   GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
2868                   GENERATE_C2_VM_TYPE_ENTRY,
2869                   GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
2870 
2871   GENERATE_VM_TYPE_LAST_ENTRY()
2872 };
2873 
2874 size_t VMStructs::localHotSpotVMTypesLength() {
2875   return sizeof(localHotSpotVMTypes) / sizeof(VMTypeEntry);
2876 }
2877 
2878 VMIntConstantEntry VMStructs::localHotSpotVMIntConstants[] = {
2879 
2880   VM_INT_CONSTANTS(GENERATE_VM_INT_CONSTANT_ENTRY,
2881                    GENERATE_VM_INT_CONSTANT_WITH_VALUE_ENTRY,
2882                    GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
2883                    GENERATE_C1_VM_INT_CONSTANT_ENTRY,
2884                    GENERATE_C2_VM_INT_CONSTANT_ENTRY,
2885                    GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
2886 
2887   VM_INT_CONSTANTS_OS(GENERATE_VM_INT_CONSTANT_ENTRY,
2888                       GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
2889                       GENERATE_C1_VM_INT_CONSTANT_ENTRY,
2890                       GENERATE_C2_VM_INT_CONSTANT_ENTRY,
2891                       GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
2892 
2893   VM_INT_CONSTANTS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
2894                        GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
2895                        GENERATE_C1_VM_INT_CONSTANT_ENTRY,
2896                        GENERATE_C2_VM_INT_CONSTANT_ENTRY,
2897                        GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
2898 
2899   VM_INT_CONSTANTS_OS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
2900                           GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
2901                           GENERATE_C1_VM_INT_CONSTANT_ENTRY,
2902                           GENERATE_C2_VM_INT_CONSTANT_ENTRY,
2903                           GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
2904 
2905   GENERATE_VM_INT_CONSTANT_LAST_ENTRY()
2906 };
2907 
2908 size_t VMStructs::localHotSpotVMIntConstantsLength() {
2909   return sizeof(localHotSpotVMIntConstants) / sizeof(VMIntConstantEntry);
2910 }
2911 
2912 VMLongConstantEntry VMStructs::localHotSpotVMLongConstants[] = {
2913 
2914   VM_LONG_CONSTANTS(GENERATE_VM_LONG_CONSTANT_ENTRY,
2915                     GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
2916                     GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
2917                     GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
2918                     GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
2919 
2920   VM_LONG_CONSTANTS_OS(GENERATE_VM_LONG_CONSTANT_ENTRY,
2921                        GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
2922                        GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
2923                        GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
2924                        GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
2925 
2926   VM_LONG_CONSTANTS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
2927                         GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
2928                         GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
2929                         GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
2930                         GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
2931 
2932   VM_LONG_CONSTANTS_OS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
2933                            GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
2934                            GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
2935                            GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
2936                            GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
2937 
2938   GENERATE_VM_LONG_CONSTANT_LAST_ENTRY()
2939 };
2940 
2941 size_t VMStructs::localHotSpotVMLongConstantsLength() {
2942   return sizeof(localHotSpotVMLongConstants) / sizeof(VMLongConstantEntry);
2943 }
2944 
2945 extern "C" {
2946 
2947 #define STRIDE(array) ((char*)&amp;array[1] - (char*)&amp;array[0])
2948 
2949 JNIEXPORT VMStructEntry* gHotSpotVMStructs = VMStructs::localHotSpotVMStructs;
2950 JNIEXPORT uint64_t gHotSpotVMStructEntryTypeNameOffset = offset_of(VMStructEntry, typeName);
2951 JNIEXPORT uint64_t gHotSpotVMStructEntryFieldNameOffset = offset_of(VMStructEntry, fieldName);
2952 JNIEXPORT uint64_t gHotSpotVMStructEntryTypeStringOffset = offset_of(VMStructEntry, typeString);
2953 JNIEXPORT uint64_t gHotSpotVMStructEntryIsStaticOffset = offset_of(VMStructEntry, isStatic);
2954 JNIEXPORT uint64_t gHotSpotVMStructEntryOffsetOffset = offset_of(VMStructEntry, offset);
2955 JNIEXPORT uint64_t gHotSpotVMStructEntryAddressOffset = offset_of(VMStructEntry, address);
2956 JNIEXPORT uint64_t gHotSpotVMStructEntryArrayStride = STRIDE(gHotSpotVMStructs);
2957 
2958 JNIEXPORT VMTypeEntry* gHotSpotVMTypes = VMStructs::localHotSpotVMTypes;
2959 JNIEXPORT uint64_t gHotSpotVMTypeEntryTypeNameOffset = offset_of(VMTypeEntry, typeName);
2960 JNIEXPORT uint64_t gHotSpotVMTypeEntrySuperclassNameOffset = offset_of(VMTypeEntry, superclassName);
2961 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsOopTypeOffset = offset_of(VMTypeEntry, isOopType);
2962 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsIntegerTypeOffset = offset_of(VMTypeEntry, isIntegerType);
2963 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsUnsignedOffset = offset_of(VMTypeEntry, isUnsigned);
2964 JNIEXPORT uint64_t gHotSpotVMTypeEntrySizeOffset = offset_of(VMTypeEntry, size);
2965 JNIEXPORT uint64_t gHotSpotVMTypeEntryArrayStride = STRIDE(gHotSpotVMTypes);
2966 
2967 JNIEXPORT VMIntConstantEntry* gHotSpotVMIntConstants = VMStructs::localHotSpotVMIntConstants;
2968 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryNameOffset = offset_of(VMIntConstantEntry, name);
2969 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryValueOffset = offset_of(VMIntConstantEntry, value);
2970 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryArrayStride = STRIDE(gHotSpotVMIntConstants);
2971 
2972 JNIEXPORT VMLongConstantEntry* gHotSpotVMLongConstants = VMStructs::localHotSpotVMLongConstants;
2973 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryNameOffset = offset_of(VMLongConstantEntry, name);
2974 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryValueOffset = offset_of(VMLongConstantEntry, value);
2975 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryArrayStride = STRIDE(gHotSpotVMLongConstants);
2976 } // "C"
2977 
2978 #ifdef ASSERT
2979 // This is used both to check the types of referenced fields and
2980 // to ensure that all of the field types are present.
2981 void VMStructs::init() {
2982   VM_STRUCTS(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
2983              CHECK_STATIC_VM_STRUCT_ENTRY,
2984              CHECK_STATIC_PTR_VOLATILE_VM_STRUCT_ENTRY,
2985              CHECK_NO_OP,
2986              CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
2987              CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2988              CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY,
2989              CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
2990              CHECK_NO_OP,
2991              CHECK_NO_OP);
2992 
2993 
2994   VM_STRUCTS_CPU(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
2995                  CHECK_STATIC_VM_STRUCT_ENTRY,
2996                  CHECK_NO_OP,
2997                  CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
2998                  CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
2999                  CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
3000                  CHECK_NO_OP,
3001                  CHECK_NO_OP);
3002 
3003   VM_STRUCTS_OS_CPU(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3004                     CHECK_STATIC_VM_STRUCT_ENTRY,
3005                     CHECK_NO_OP,
3006                     CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
3007                     CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3008                     CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
3009                     CHECK_NO_OP,
3010                     CHECK_NO_OP);
3011 
3012   VM_TYPES(CHECK_VM_TYPE_ENTRY,
3013            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3014            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3015            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3016            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3017            CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3018            CHECK_C2_VM_TYPE_ENTRY,
3019            CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3020 
3021 
3022   VM_TYPES_CPU(CHECK_VM_TYPE_ENTRY,
3023                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3024                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3025                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3026                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3027                CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3028                CHECK_C2_VM_TYPE_ENTRY,
3029                CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3030 
3031   VM_TYPES_OS_CPU(CHECK_VM_TYPE_ENTRY,
3032                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3033                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3034                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3035                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3036                   CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3037                   CHECK_C2_VM_TYPE_ENTRY,
3038                   CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3039 
3040   //
3041   // Split VM_STRUCTS() invocation into two parts to allow MS VC++ 6.0
3042   // to build with the source mounted over SNC3.2. Symptom was that
3043   // debug build failed with an internal compiler error. Has been seen
3044   // mounting sources from Solaris 2.6 and 2.7 hosts, but so far not
3045   // 2.8 hosts. Appears to occur because line is too long.
3046   //
3047   // If an assertion failure is triggered here it means that an entry
3048   // in VMStructs::localHotSpotVMStructs[] was not found in
3049   // VMStructs::localHotSpotVMTypes[]. (The assertion itself had to be
3050   // made less descriptive because of this above bug -- see the
3051   // definition of ENSURE_FIELD_TYPE_PRESENT.)
3052   //
3053   // NOTE: taken out because this was just not working on everyone's
3054   // Solstice NFS setup. If everyone switches to local workspaces on
3055   // Win32, we can put this back in.
3056 #ifndef _WINDOWS
3057   VM_STRUCTS(ENSURE_FIELD_TYPE_PRESENT,
3058              CHECK_NO_OP,
3059              CHECK_NO_OP,
3060              CHECK_NO_OP,
3061              CHECK_NO_OP,
3062              CHECK_NO_OP,
3063              CHECK_NO_OP,
3064              CHECK_NO_OP,
3065              CHECK_NO_OP,
3066              CHECK_NO_OP);
3067 
3068   VM_STRUCTS(CHECK_NO_OP,
3069              ENSURE_FIELD_TYPE_PRESENT,
3070              ENSURE_FIELD_TYPE_PRESENT,
3071              CHECK_NO_OP,
3072              ENSURE_FIELD_TYPE_PRESENT,
3073              ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3074              ENSURE_C1_FIELD_TYPE_PRESENT,
3075              ENSURE_C2_FIELD_TYPE_PRESENT,
3076              CHECK_NO_OP,
3077              CHECK_NO_OP);
3078 
3079   VM_STRUCTS_CPU(ENSURE_FIELD_TYPE_PRESENT,
3080                  ENSURE_FIELD_TYPE_PRESENT,
3081                  CHECK_NO_OP,
3082                  ENSURE_FIELD_TYPE_PRESENT,
3083                  ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3084                  ENSURE_C2_FIELD_TYPE_PRESENT,
3085                  CHECK_NO_OP,
3086                  CHECK_NO_OP);
3087   VM_STRUCTS_OS_CPU(ENSURE_FIELD_TYPE_PRESENT,
3088                     ENSURE_FIELD_TYPE_PRESENT,
3089                     CHECK_NO_OP,
3090                     ENSURE_FIELD_TYPE_PRESENT,
3091                     ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3092                     ENSURE_C2_FIELD_TYPE_PRESENT,
3093                     CHECK_NO_OP,
3094                     CHECK_NO_OP);
3095 #endif // !_WINDOWS
3096 }
3097 
3098 static int recursiveFindType(VMTypeEntry* origtypes, const char* typeName, bool isRecurse) {
3099   {
3100     VMTypeEntry* types = origtypes;
3101     while (types-&gt;typeName != NULL) {
3102       if (strcmp(typeName, types-&gt;typeName) == 0) {
3103         // Found it
3104         return 1;
3105       }
3106       ++types;
3107     }
3108   }
3109   // Search for the base type by peeling off const and *
3110   size_t len = strlen(typeName);
3111   if (typeName[len-1] == '*') {
3112     char * s = NEW_C_HEAP_ARRAY(char, len, mtInternal);
3113     strncpy(s, typeName, len - 1);
3114     s[len-1] = '\0';
3115     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3116     if (recursiveFindType(origtypes, s, true) == 1) {
3117       FREE_C_HEAP_ARRAY(char, s);
3118       return 1;
3119     }
3120     FREE_C_HEAP_ARRAY(char, s);
3121   }
3122   const char* start = NULL;
3123   if (strstr(typeName, "GrowableArray&lt;") == typeName) {
3124     start = typeName + strlen("GrowableArray&lt;");
3125   } else if (strstr(typeName, "Array&lt;") == typeName) {
3126     start = typeName + strlen("Array&lt;");
3127   }
3128   if (start != NULL) {
3129     const char * end = strrchr(typeName, '&gt;');
3130     int len = end - start + 1;
3131     char * s = NEW_C_HEAP_ARRAY(char, len, mtInternal);
3132     strncpy(s, start, len - 1);
3133     s[len-1] = '\0';
3134     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3135     if (recursiveFindType(origtypes, s, true) == 1) {
3136       FREE_C_HEAP_ARRAY(char, s);
3137       return 1;
3138     }
3139     FREE_C_HEAP_ARRAY(char, s);
3140   }
3141   if (strstr(typeName, "const ") == typeName) {
3142     const char * s = typeName + strlen("const ");
3143     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3144     if (recursiveFindType(origtypes, s, true) == 1) {
3145       return 1;
3146     }
3147   }
3148   if (strstr(typeName, " const") == typeName + len - 6) {
3149     char * s = os::strdup_check_oom(typeName);
3150     s[len - 6] = '\0';
3151     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3152     if (recursiveFindType(origtypes, s, true) == 1) {
3153       os::free(s);
3154       return 1;
3155     }
3156     os::free(s);
3157   }
3158   if (!isRecurse) {
3159     tty-&gt;print_cr("type \"%s\" not found", typeName);
3160   }
3161   return 0;
3162 }
3163 
3164 int VMStructs::findType(const char* typeName) {
3165   VMTypeEntry* types = gHotSpotVMTypes;
3166 
3167   return recursiveFindType(types, typeName, false);
3168 }
3169 
3170 void vmStructs_init() {
3171   VMStructs::init();
3172 }
3173 #endif // ASSERT
<a name="2" id="anc2"></a><b style="font-size: large; color: red">--- EOF ---</b>















































































</pre><form name="eof"><input name="value" value="2" type="hidden" /></form></body></html>
